import{initializeApp as SA}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";import{getFirestore as bA,collection as RA}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var od={exports:{}},rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function wA(){if(Y_)return rl;Y_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:s,type:a,key:d,ref:l!==void 0?l:null,props:c}}return rl.Fragment=t,rl.jsx=i,rl.jsxs=i,rl}var $_;function IA(){return $_||($_=1,od.exports=wA()),od.exports}var vt=IA(),ld={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function CA(){if(Z_)return St;Z_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),O=Symbol.iterator;function x(C){return C===null||typeof C!="object"?null:(C=O&&C[O]||C["@@iterator"],typeof C=="function"?C:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,nt={};function Z(C,X,et){this.props=C,this.context=X,this.refs=nt,this.updater=et||G}Z.prototype.isReactComponent={},Z.prototype.setState=function(C,X){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,X,"setState")},Z.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function At(){}At.prototype=Z.prototype;function _t(C,X,et){this.props=C,this.context=X,this.refs=nt,this.updater=et||G}var lt=_t.prototype=new At;lt.constructor=_t,W(lt,Z.prototype),lt.isPureReactComponent=!0;var Vt=Array.isArray,gt={H:null,A:null,T:null,S:null,V:null},wt=Object.prototype.hasOwnProperty;function M(C,X,et,$,ot,It){return et=It.ref,{$$typeof:s,type:C,key:X,ref:et!==void 0?et:null,props:It}}function S(C,X){return M(C.type,X,void 0,void 0,void 0,C.props)}function w(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function N(C){var X={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(et){return X[et]})}var V=/\/+/g;function I(C,X){return typeof C=="object"&&C!==null&&C.key!=null?N(""+C.key):X.toString(36)}function b(){}function zt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(b,b):(C.status="pending",C.then(function(X){C.status==="pending"&&(C.status="fulfilled",C.value=X)},function(X){C.status==="pending"&&(C.status="rejected",C.reason=X)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Gt(C,X,et,$,ot){var It=typeof C;(It==="undefined"||It==="boolean")&&(C=null);var yt=!1;if(C===null)yt=!0;else switch(It){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(C.$$typeof){case s:case t:yt=!0;break;case A:return yt=C._init,Gt(yt(C._payload),X,et,$,ot)}}if(yt)return ot=ot(C),yt=$===""?"."+I(C,0):$,Vt(ot)?(et="",yt!=null&&(et=yt.replace(V,"$&/")+"/"),Gt(ot,X,et,"",function(zn){return zn})):ot!=null&&(w(ot)&&(ot=S(ot,et+(ot.key==null||C&&C.key===ot.key?"":(""+ot.key).replace(V,"$&/")+"/")+yt)),X.push(ot)),1;yt=0;var we=$===""?".":$+":";if(Vt(C))for(var Jt=0;Jt<C.length;Jt++)$=C[Jt],It=we+I($,Jt),yt+=Gt($,X,et,It,ot);else if(Jt=x(C),typeof Jt=="function")for(C=Jt.call(C),Jt=0;!($=C.next()).done;)$=$.value,It=we+I($,Jt++),yt+=Gt($,X,et,It,ot);else if(It==="object"){if(typeof C.then=="function")return Gt(zt(C),X,et,$,ot);throw X=String(C),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return yt}function H(C,X,et){if(C==null)return C;var $=[],ot=0;return Gt(C,$,"","",function(It){return X.call(et,It,ot++)}),$}function tt(C){if(C._status===-1){var X=C._result;X=X(),X.then(function(et){(C._status===0||C._status===-1)&&(C._status=1,C._result=et)},function(et){(C._status===0||C._status===-1)&&(C._status=2,C._result=et)}),C._status===-1&&(C._status=0,C._result=X)}if(C._status===1)return C._result.default;throw C._result}var at=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Bt(){}return St.Children={map:H,forEach:function(C,X,et){H(C,function(){X.apply(this,arguments)},et)},count:function(C){var X=0;return H(C,function(){X++}),X},toArray:function(C){return H(C,function(X){return X})||[]},only:function(C){if(!w(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},St.Component=Z,St.Fragment=i,St.Profiler=l,St.PureComponent=_t,St.StrictMode=a,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gt,St.__COMPILER_RUNTIME={__proto__:null,c:function(C){return gt.H.useMemoCache(C)}},St.cache=function(C){return function(){return C.apply(null,arguments)}},St.cloneElement=function(C,X,et){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var $=W({},C.props),ot=C.key,It=void 0;if(X!=null)for(yt in X.ref!==void 0&&(It=void 0),X.key!==void 0&&(ot=""+X.key),X)!wt.call(X,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&X.ref===void 0||($[yt]=X[yt]);var yt=arguments.length-2;if(yt===1)$.children=et;else if(1<yt){for(var we=Array(yt),Jt=0;Jt<yt;Jt++)we[Jt]=arguments[Jt+2];$.children=we}return M(C.type,ot,void 0,void 0,It,$)},St.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},St.createElement=function(C,X,et){var $,ot={},It=null;if(X!=null)for($ in X.key!==void 0&&(It=""+X.key),X)wt.call(X,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ot[$]=X[$]);var yt=arguments.length-2;if(yt===1)ot.children=et;else if(1<yt){for(var we=Array(yt),Jt=0;Jt<yt;Jt++)we[Jt]=arguments[Jt+2];ot.children=we}if(C&&C.defaultProps)for($ in yt=C.defaultProps,yt)ot[$]===void 0&&(ot[$]=yt[$]);return M(C,It,void 0,void 0,null,ot)},St.createRef=function(){return{current:null}},St.forwardRef=function(C){return{$$typeof:g,render:C}},St.isValidElement=w,St.lazy=function(C){return{$$typeof:A,_payload:{_status:-1,_result:C},_init:tt}},St.memo=function(C,X){return{$$typeof:v,type:C,compare:X===void 0?null:X}},St.startTransition=function(C){var X=gt.T,et={};gt.T=et;try{var $=C(),ot=gt.S;ot!==null&&ot(et,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(Bt,at)}catch(It){at(It)}finally{gt.T=X}},St.unstable_useCacheRefresh=function(){return gt.H.useCacheRefresh()},St.use=function(C){return gt.H.use(C)},St.useActionState=function(C,X,et){return gt.H.useActionState(C,X,et)},St.useCallback=function(C,X){return gt.H.useCallback(C,X)},St.useContext=function(C){return gt.H.useContext(C)},St.useDebugValue=function(){},St.useDeferredValue=function(C,X){return gt.H.useDeferredValue(C,X)},St.useEffect=function(C,X,et){var $=gt.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(C,X)},St.useId=function(){return gt.H.useId()},St.useImperativeHandle=function(C,X,et){return gt.H.useImperativeHandle(C,X,et)},St.useInsertionEffect=function(C,X){return gt.H.useInsertionEffect(C,X)},St.useLayoutEffect=function(C,X){return gt.H.useLayoutEffect(C,X)},St.useMemo=function(C,X){return gt.H.useMemo(C,X)},St.useOptimistic=function(C,X){return gt.H.useOptimistic(C,X)},St.useReducer=function(C,X,et){return gt.H.useReducer(C,X,et)},St.useRef=function(C){return gt.H.useRef(C)},St.useState=function(C){return gt.H.useState(C)},St.useSyncExternalStore=function(C,X,et){return gt.H.useSyncExternalStore(C,X,et)},St.useTransition=function(){return gt.H.useTransition()},St.version="19.1.0",St}var W_;function Xd(){return W_||(W_=1,ld.exports=CA()),ld.exports}var fn=Xd(),ud={exports:{}},sl={},cd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function DA(){return J_||(J_=1,function(s){function t(H,tt){var at=H.length;H.push(tt);t:for(;0<at;){var Bt=at-1>>>1,C=H[Bt];if(0<l(C,tt))H[Bt]=tt,H[at]=C,at=Bt;else break t}}function i(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var tt=H[0],at=H.pop();if(at!==tt){H[0]=at;t:for(var Bt=0,C=H.length,X=C>>>1;Bt<X;){var et=2*(Bt+1)-1,$=H[et],ot=et+1,It=H[ot];if(0>l($,at))ot<C&&0>l(It,$)?(H[Bt]=It,H[ot]=at,Bt=ot):(H[Bt]=$,H[et]=at,Bt=et);else if(ot<C&&0>l(It,at))H[Bt]=It,H[ot]=at,Bt=ot;else break t}}return tt}function l(H,tt){var at=H.sortIndex-tt.sortIndex;return at!==0?at:H.id-tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var p=[],v=[],A=1,O=null,x=3,G=!1,W=!1,nt=!1,Z=!1,At=typeof setTimeout=="function"?setTimeout:null,_t=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;function Vt(H){for(var tt=i(v);tt!==null;){if(tt.callback===null)a(v);else if(tt.startTime<=H)a(v),tt.sortIndex=tt.expirationTime,t(p,tt);else break;tt=i(v)}}function gt(H){if(nt=!1,Vt(H),!W)if(i(p)!==null)W=!0,wt||(wt=!0,I());else{var tt=i(v);tt!==null&&Gt(gt,tt.startTime-H)}}var wt=!1,M=-1,S=5,w=-1;function N(){return Z?!0:!(s.unstable_now()-w<S)}function V(){if(Z=!1,wt){var H=s.unstable_now();w=H;var tt=!0;try{t:{W=!1,nt&&(nt=!1,_t(M),M=-1),G=!0;var at=x;try{e:{for(Vt(H),O=i(p);O!==null&&!(O.expirationTime>H&&N());){var Bt=O.callback;if(typeof Bt=="function"){O.callback=null,x=O.priorityLevel;var C=Bt(O.expirationTime<=H);if(H=s.unstable_now(),typeof C=="function"){O.callback=C,Vt(H),tt=!0;break e}O===i(p)&&a(p),Vt(H)}else a(p);O=i(p)}if(O!==null)tt=!0;else{var X=i(v);X!==null&&Gt(gt,X.startTime-H),tt=!1}}break t}finally{O=null,x=at,G=!1}tt=void 0}}finally{tt?I():wt=!1}}}var I;if(typeof lt=="function")I=function(){lt(V)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,zt=b.port2;b.port1.onmessage=V,I=function(){zt.postMessage(null)}}else I=function(){At(V,0)};function Gt(H,tt){M=At(function(){H(s.unstable_now())},tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(H){switch(x){case 1:case 2:case 3:var tt=3;break;default:tt=x}var at=x;x=tt;try{return H()}finally{x=at}},s.unstable_requestPaint=function(){Z=!0},s.unstable_runWithPriority=function(H,tt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var at=x;x=H;try{return tt()}finally{x=at}},s.unstable_scheduleCallback=function(H,tt,at){var Bt=s.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?Bt+at:Bt):at=Bt,H){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=at+C,H={id:A++,callback:tt,priorityLevel:H,startTime:at,expirationTime:C,sortIndex:-1},at>Bt?(H.sortIndex=at,t(v,H),i(p)===null&&H===i(v)&&(nt?(_t(M),M=-1):nt=!0,Gt(gt,at-Bt))):(H.sortIndex=C,t(p,H),W||G||(W=!0,wt||(wt=!0,I()))),H},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(H){var tt=x;return function(){var at=x;x=tt;try{return H.apply(this,arguments)}finally{x=at}}}}(hd)),hd}var ty;function OA(){return ty||(ty=1,cd.exports=DA()),cd.exports}var fd={exports:{}},je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function NA(){if(ey)return je;ey=1;var s=Xd();function t(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,v,A){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:O==null?null:""+O,children:p,containerInfo:v,implementation:A}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,je.createPortal=function(p,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return c(p,v,null,A)},je.flushSync=function(p){var v=d.T,A=a.p;try{if(d.T=null,a.p=2,p)return p()}finally{d.T=v,a.p=A,a.d.f()}},je.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,a.d.C(p,v))},je.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},je.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var A=v.as,O=g(A,v.crossOrigin),x=typeof v.integrity=="string"?v.integrity:void 0,G=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?a.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:O,integrity:x,fetchPriority:G}):A==="script"&&a.d.X(p,{crossOrigin:O,integrity:x,fetchPriority:G,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},je.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=g(v.as,v.crossOrigin);a.d.M(p,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&a.d.M(p)},je.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,O=g(A,v.crossOrigin);a.d.L(p,A,{crossOrigin:O,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},je.preloadModule=function(p,v){if(typeof p=="string")if(v){var A=g(v.as,v.crossOrigin);a.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else a.d.m(p)},je.requestFormReset=function(p){a.d.r(p)},je.unstable_batchedUpdates=function(p,v){return p(v)},je.useFormState=function(p,v,A){return d.H.useFormState(p,v,A)},je.useFormStatus=function(){return d.H.useHostTransitionStatus()},je.version="19.1.0",je}var ny;function MA(){if(ny)return fd.exports;ny=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),fd.exports=NA(),fd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function VA(){if(iy)return sl;iy=1;var s=OA(),t=Xd(),i=MA();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(a(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(a(188));return n!==e?null:e}for(var r=e,o=n;;){var h=r.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===r)return g(h),e;if(f===o)return g(h),n;f=f.sibling}throw Error(a(188))}if(r.return!==o.return)r=h,o=f;else{for(var y=!1,E=h.child;E;){if(E===r){y=!0,r=h,o=f;break}if(E===o){y=!0,o=h,r=f;break}E=E.sibling}if(!y){for(E=f.child;E;){if(E===r){y=!0,r=f,o=h;break}if(E===o){y=!0,o=f,r=h;break}E=E.sibling}if(!y)throw Error(a(189))}}if(r.alternate!==o)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var A=Object.assign,O=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),At=Symbol.for("react.provider"),_t=Symbol.for("react.consumer"),lt=Symbol.for("react.context"),Vt=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var b=Symbol.for("react.client.reference");function zt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===b?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case Z:return"Profiler";case nt:return"StrictMode";case gt:return"Suspense";case wt:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case G:return"Portal";case lt:return(e.displayName||"Context")+".Provider";case _t:return(e._context.displayName||"Context")+".Consumer";case Vt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:zt(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return zt(e(n))}catch{}}return null}var Gt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},Bt=[],C=-1;function X(e){return{current:e}}function et(e){0>C||(e.current=Bt[C],Bt[C]=null,C--)}function $(e,n){C++,Bt[C]=e.current,e.current=n}var ot=X(null),It=X(null),yt=X(null),we=X(null);function Jt(e,n){switch($(yt,n),$(It,e),$(ot,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?S_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=S_(n),e=b_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}et(ot),$(ot,e)}function zn(){et(ot),et(It),et(yt)}function ji(e){e.memoizedState!==null&&$(we,e);var n=ot.current,r=b_(n,e.type);n!==r&&($(It,e),$(ot,r))}function ui(e){It.current===e&&(et(ot),et(It)),we.current===e&&(et(we),Jo._currentValue=at)}var Lr=Object.prototype.hasOwnProperty,xr=s.unstable_scheduleCallback,zr=s.unstable_cancelCallback,Ya=s.unstable_shouldYield,kl=s.unstable_requestPaint,mn=s.unstable_now,ah=s.unstable_getCurrentPriorityLevel,$a=s.unstable_ImmediatePriority,Ms=s.unstable_UserBlockingPriority,Br=s.unstable_NormalPriority,oh=s.unstable_LowPriority,Vs=s.unstable_IdlePriority,Za=s.log,Ll=s.unstable_setDisableYieldValue,se=null,Ft=null;function nn(e){if(typeof Za=="function"&&Ll(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(se,e)}catch{}}var qe=Math.clz32?Math.clz32:qr,xl=Math.log,lh=Math.LN2;function qr(e){return e>>>=0,e===0?32:31-(xl(e)/lh|0)|0}var Hr=256,jr=4194304;function Dn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ps(e,n,r){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Dn(o):(y&=E,y!==0?h=Dn(y):r||(r=E&~e,r!==0&&(h=Dn(r))))):(E=o&~f,E!==0?h=Dn(E):y!==0?h=Dn(y):r||(r=o&~e,r!==0&&(h=Dn(r)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,r=n&-n,f>=r||f===32&&(r&4194048)!==0)?n:h}function Gr(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Wa(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ja(){var e=Hr;return Hr<<=1,(Hr&4194048)===0&&(Hr=256),e}function to(){var e=jr;return jr<<=1,(jr&62914560)===0&&(jr=4194304),e}function ci(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function hi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eo(e,n,r,o,h,f){var y=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,L=e.hiddenUpdates;for(r=y&~r;0<r;){var j=31-qe(r),K=1<<j;E[j]=0,R[j]=-1;var z=L[j];if(z!==null)for(L[j]=null,j=0;j<z.length;j++){var B=z[j];B!==null&&(B.lane&=-536870913)}r&=~K}o!==0&&Bn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~n))}function Bn(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-qe(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|r&4194090}function no(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var o=31-qe(r),h=1<<o;h&n|e[o]&n&&(e[o]|=n),r&=~h}}function Gi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Us(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Fi(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:j_(e.type))}function zl(e,n){var r=tt.p;try{return tt.p=e,n()}finally{tt.p=r}}var ee=Math.random().toString(36).slice(2),ye="__reactFiber$"+ee,de="__reactProps$"+ee,gn="__reactContainer$"+ee,io="__reactEvents$"+ee,uh="__reactListeners$"+ee,Ki="__reactHandles$"+ee,Bl="__reactResources$"+ee,Fr="__reactMarker$"+ee;function Qi(e){delete e[ye],delete e[de],delete e[io],delete e[uh],delete e[Ki]}function fi(e){var n=e[ye];if(n)return n;for(var r=e.parentNode;r;){if(n=r[gn]||r[ye]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=C_(e);e!==null;){if(r=e[ye])return r;e=C_(e)}return n}e=r,r=e.parentNode}return null}function qn(e){if(e=e[ye]||e[gn]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Hn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function Xe(e){var n=e[Bl];return n||(n=e[Bl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ue(e){e[Fr]=!0}var ro=new Set,ks={};function On(e,n){di(e,n),di(e+"Capture",n)}function di(e,n){for(ks[e]=n,e=0;e<n.length;e++)ro.add(n[e])}var ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hl={},Kr={};function jl(e){return Lr.call(Kr,e)?!0:Lr.call(Hl,e)?!1:ql.test(e)?Kr[e]=!0:(Hl[e]=!0,!1)}function Xi(e,n,r){if(jl(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function jn(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function Ve(e,n,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+o)}}var Qr,Gl;function mi(e){if(Qr===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Qr=n&&n[1]||"",Gl=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qr+e+Gl}var Ls=!1;function xs(e,n){if(!e||Ls)return"";Ls=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],E=f[1];if(y&&E){var R=y.split(`
`),L=E.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===L.length)for(o=R.length-1,h=L.length-1;1<=o&&0<=h&&R[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==L[h]){var j=`
`+R[o].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=o&&0<=h);break}}}finally{Ls=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?mi(r):""}function so(e){switch(e.tag){case 26:case 27:case 5:return mi(e.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return xs(e.type,!1);case 11:return xs(e.type.render,!1);case 1:return xs(e.type,!0);case 31:return mi("Activity");default:return""}}function zs(e){try{var n="";do n+=so(e),e=e.return;while(e);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Ye(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ao(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ch(e){var n=ao(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,f=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(y){o=""+y,f.call(this,y)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Bs(e){e._valueTracker||(e._valueTracker=ch(e))}function oo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return e&&(o=ao(e)?e.checked?"true":"false":e.value),e=o,e!==r?(n.setValue(e),!0):!1}function Xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var hh=/[\n"\\]/g;function me(e){return e.replace(hh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function rn(e,n,r,o,h,f,y,E){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ye(n)):e.value!==""+Ye(n)&&(e.value=""+Ye(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?Yi(e,y,Ye(n)):r!=null?Yi(e,y,Ye(r)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Ye(E):e.removeAttribute("name")}function Yr(e,n,r,o,h,f,y,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;r=r!=null?""+Ye(r):"",n=n!=null?""+Ye(n):r,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function Yi(e,n,r){n==="number"&&Xr(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function gi(e,n,r,o){if(e=e.options,n){n={};for(var h=0;h<r.length;h++)n["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=n.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Ye(r),n=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Xt(e,n,r){if(n!=null&&(n=""+Ye(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+Ye(r):""}function $r(e,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(a(92));if(Gt(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Ye(n),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o)}function pn(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fl(e,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,r):typeof r!="number"||r===0||Zr.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function lo(e,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&r[h]!==o&&Fl(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&Fl(e,f,n[f])}function uo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qs(e){return dh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var pi=null;function _n(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,yi=null;function co(e){var n=qn(e);if(n&&(e=n.stateNode)){var r=e[de]||null;t:switch(e=n.stateNode,n.type){case"input":if(rn(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+me(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==e&&o.form===e.form){var h=o[de]||null;if(!h)throw Error(a(90));rn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===e.form&&oo(o)}break t;case"textarea":Xt(e,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&gi(e,!!r.multiple,n,!1)}}}var Gn=!1;function Kl(e,n,r){if(Gn)return e(n,r);Gn=!0;try{var o=e(n);return o}finally{if(Gn=!1,(_i!==null||yi!==null)&&(zu(),_i&&(n=_i,e=yi,yi=_i=null,co(n),e)))for(n=0;n<e.length;n++)co(e[n])}}function Wr(e,n){var r=e.stateNode;if(r===null)return null;var o=r[de]||null;if(o===null)return null;r=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yn=!1;if(Nn)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){yn=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{yn=!1}var Fn=null,$i=null,vi=null;function ho(){if(vi)return vi;var e,n=$i,r=n.length,o,h="value"in Fn?Fn.value:Fn.textContent,f=h.length;for(e=0;e<r&&n[e]===h[e];e++);var y=r-e;for(o=1;o<=y&&n[r-o]===h[f-o];o++);return vi=h.slice(e,1<o?1-o:void 0)}function Kn(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Qn(){return!0}function fo(){return!1}function Ie(e){function n(r,o,h,f,y){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(r=e[E],this[E]=r?r(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Qn:fo,this.isPropagationStopped=fo,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),n}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=Ie(Ht),ts=A({},Ht,{view:0,detail:0}),Ql=Ie(ts),js,Gs,Xn,es=A({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&e.type==="mousemove"?(js=e.screenX-Xn.screenX,Gs=e.screenY-Xn.screenY):Gs=js=0,Xn=e),js)},movementY:function(e){return"movementY"in e?e.movementY:Gs}}),vn=Ie(es),Xl=A({},es,{dataTransfer:0}),mh=Ie(Xl),ns=A({},ts,{relatedTarget:0}),Fs=Ie(ns),mo=A({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Ks=Ie(mo),Yl=A({},Ht,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qs=Ie(Yl),gh=A({},Ht,{data:0}),go=Ie(gh),is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$l={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function po(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Zl[e])?!!n[e]:!1}function rs(){return po}var Wl=A({},ts,{key:function(e){if(e.key){var n=is[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Kn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$l[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rs,charCode:function(e){return e.type==="keypress"?Kn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xs=Ie(Wl),Jl=A({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_o=Ie(Jl),Ei=A({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rs}),tu=Ie(Ei),eu=A({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),nu=Ie(eu),iu=A({},es,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ys=Ie(iu),$e=A({},Ht,{newState:0,oldState:0}),ru=Ie($e),su=[9,13,27,32],Yn=Nn&&"CompositionEvent"in window,u=null;Nn&&"documentMode"in document&&(u=document.documentMode);var m=Nn&&"TextEvent"in window&&!u,_=Nn&&(!Yn||u&&8<u&&11>=u),T=" ",U=!1;function q(e,n){switch(e){case"keyup":return su.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pt=!1;function ve(e,n){switch(e){case"compositionend":return J(n);case"keypress":return n.which!==32?null:(U=!0,T);case"textInput":return e=n.data,e===T&&U?null:e;default:return null}}function Ut(e,n){if(Pt)return e==="compositionend"||!Yn&&q(e,n)?(e=ho(),vi=$i=Fn=null,Pt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _&&n.locale!=="ko"?null:n.data;default:return null}}var Ce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ee(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ce[e.type]:n==="textarea"}function Ti(e,n,r,o){_i?yi?yi.push(o):yi=[o]:_i=o,n=Fu(n,"onChange"),0<n.length&&(r=new Hs("onChange","change",null,r,o),e.push({event:r,listeners:n}))}var Pe=null,$n=null;function yo(e){y_(e,0)}function au(e){var n=Hn(e);if(oo(n))return e}function zm(e,n){if(e==="change")return n}var Bm=!1;if(Nn){var ph;if(Nn){var _h="oninput"in document;if(!_h){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),_h=typeof qm.oninput=="function"}ph=_h}else ph=!1;Bm=ph&&(!document.documentMode||9<document.documentMode)}function Hm(){Pe&&(Pe.detachEvent("onpropertychange",jm),$n=Pe=null)}function jm(e){if(e.propertyName==="value"&&au($n)){var n=[];Ti(n,$n,e,_n(e)),Kl(yo,n)}}function JT(e,n,r){e==="focusin"?(Hm(),Pe=n,$n=r,Pe.attachEvent("onpropertychange",jm)):e==="focusout"&&Hm()}function t0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return au($n)}function e0(e,n){if(e==="click")return au(n)}function n0(e,n){if(e==="input"||e==="change")return au(n)}function i0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var sn=typeof Object.is=="function"?Object.is:i0;function vo(e,n){if(sn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!Lr.call(n,h)||!sn(e[h],n[h]))return!1}return!0}function Gm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fm(e,n){var r=Gm(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=n&&o>=n)return{node:r,offset:n-e};e=o}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Gm(r)}}function Km(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Km(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Qm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Xr(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Xr(e.document)}return n}function yh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var r0=Nn&&"documentMode"in document&&11>=document.documentMode,$s=null,vh=null,Eo=null,Eh=!1;function Xm(e,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Eh||$s==null||$s!==Xr(o)||(o=$s,"selectionStart"in o&&yh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Eo&&vo(Eo,o)||(Eo=o,o=Fu(vh,"onSelect"),0<o.length&&(n=new Hs("onSelect","select",null,n,r),e.push({event:n,listeners:o}),n.target=$s)))}function ss(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Zs={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},Th={},Ym={};Nn&&(Ym=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function as(e){if(Th[e])return Th[e];if(!Zs[e])return e;var n=Zs[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Ym)return Th[e]=n[r];return e}var $m=as("animationend"),Zm=as("animationiteration"),Wm=as("animationstart"),s0=as("transitionrun"),a0=as("transitionstart"),o0=as("transitioncancel"),Jm=as("transitionend"),tg=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function Mn(e,n){tg.set(e,n),On(n,[e])}var eg=new WeakMap;function En(e,n){if(typeof e=="object"&&e!==null){var r=eg.get(e);return r!==void 0?r:(n={value:e,source:n,stack:zs(n)},eg.set(e,n),n)}return{value:e,source:n,stack:zs(n)}}var Tn=[],Ws=0,Sh=0;function ou(){for(var e=Ws,n=Sh=Ws=0;n<e;){var r=Tn[n];Tn[n++]=null;var o=Tn[n];Tn[n++]=null;var h=Tn[n];Tn[n++]=null;var f=Tn[n];if(Tn[n++]=null,o!==null&&h!==null){var y=o.pending;y===null?h.next=h:(h.next=y.next,y.next=h),o.pending=h}f!==0&&ng(r,h,f)}}function lu(e,n,r,o){Tn[Ws++]=e,Tn[Ws++]=n,Tn[Ws++]=r,Tn[Ws++]=o,Sh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function bh(e,n,r,o){return lu(e,n,r,o),uu(e)}function Js(e,n){return lu(e,null,null,n),uu(e)}function ng(e,n,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var h=!1,f=e.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-qe(r),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=r|536870912),f):null}function uu(e){if(50<Fo)throw Fo=0,Nf=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ta={};function l0(e,n,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,n,r,o){return new l0(e,n,r,o)}function Rh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ai(e,n){var r=e.alternate;return r===null?(r=an(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ig(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function cu(e,n,r,o,h,f){var y=0;if(o=e,typeof e=="function")Rh(e)&&(y=1);else if(typeof e=="string")y=cA(e,r,ot.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=an(31,r,n,h),e.elementType=w,e.lanes=f,e;case W:return os(r.children,h,f,n);case nt:y=8,h|=24;break;case Z:return e=an(12,r,n,h|2),e.elementType=Z,e.lanes=f,e;case gt:return e=an(13,r,n,h),e.elementType=gt,e.lanes=f,e;case wt:return e=an(19,r,n,h),e.elementType=wt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case At:case lt:y=10;break t;case _t:y=9;break t;case Vt:y=11;break t;case M:y=14;break t;case S:y=16,o=null;break t}y=29,r=Error(a(130,e===null?"null":typeof e,"")),o=null}return n=an(y,r,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function os(e,n,r,o){return e=an(7,e,o,n),e.lanes=r,e}function wh(e,n,r){return e=an(6,e,null,n),e.lanes=r,e}function Ih(e,n,r){return n=an(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ea=[],na=0,hu=null,fu=0,An=[],Sn=0,ls=null,Si=1,bi="";function us(e,n){ea[na++]=fu,ea[na++]=hu,hu=e,fu=n}function rg(e,n,r){An[Sn++]=Si,An[Sn++]=bi,An[Sn++]=ls,ls=e;var o=Si;e=bi;var h=32-qe(o)-1;o&=~(1<<h),r+=1;var f=32-qe(n)+h;if(30<f){var y=h-h%5;f=(o&(1<<y)-1).toString(32),o>>=y,h-=y,Si=1<<32-qe(n)+h|r<<h|o,bi=f+e}else Si=1<<f|r<<h|o,bi=e}function Ch(e){e.return!==null&&(us(e,1),rg(e,1,0))}function Dh(e){for(;e===hu;)hu=ea[--na],ea[na]=null,fu=ea[--na],ea[na]=null;for(;e===ls;)ls=An[--Sn],An[Sn]=null,bi=An[--Sn],An[Sn]=null,Si=An[--Sn],An[Sn]=null}var Ze=null,ae=null,qt=!1,cs=null,Zn=!1,Oh=Error(a(519));function hs(e){var n=Error(a(418,""));throw So(En(n,e)),Oh}function sg(e){var n=e.stateNode,r=e.type,o=e.memoizedProps;switch(n[ye]=e,n[de]=o,r){case"dialog":Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":case"embed":Ot("load",n);break;case"video":case"audio":for(r=0;r<Qo.length;r++)Ot(Qo[r],n);break;case"source":Ot("error",n);break;case"img":case"image":case"link":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"input":Ot("invalid",n),Yr(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Bs(n);break;case"select":Ot("invalid",n);break;case"textarea":Ot("invalid",n),$r(n,o.value,o.defaultValue,o.children),Bs(n)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||A_(n.textContent,r)?(o.popover!=null&&(Ot("beforetoggle",n),Ot("toggle",n)),o.onScroll!=null&&Ot("scroll",n),o.onScrollEnd!=null&&Ot("scrollend",n),o.onClick!=null&&(n.onclick=Ku),n=!0):n=!1,n||hs(e)}function ag(e){for(Ze=e.return;Ze;)switch(Ze.tag){case 5:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Ze=Ze.return}}function To(e){if(e!==Ze)return!1;if(!qt)return ag(e),qt=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Qf(e.type,e.memoizedProps)),r=!r),r&&ae&&hs(e),ag(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(n===0){ae=Pn(e.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;e=e.nextSibling}ae=null}}else n===27?(n=ae,fr(e.type)?(e=Zf,Zf=null,ae=e):ae=n):ae=Ze?Pn(e.stateNode.nextSibling):null;return!0}function Ao(){ae=Ze=null,qt=!1}function og(){var e=cs;return e!==null&&(tn===null?tn=e:tn.push.apply(tn,e),cs=null),e}function So(e){cs===null?cs=[e]:cs.push(e)}var Nh=X(null),fs=null,Ri=null;function Zi(e,n,r){$(Nh,n._currentValue),n._currentValue=r}function wi(e){e._currentValue=Nh.current,et(Nh)}function Mh(e,n,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===r)break;e=e.return}}function Vh(e,n,r,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var y=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var R=0;R<n.length;R++)if(E.context===n[R]){f.lanes|=r,E=f.alternate,E!==null&&(E.lanes|=r),Mh(f.return,r,e),o||(y=null);break t}f=E.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(a(341));y.lanes|=r,f=y.alternate,f!==null&&(f.lanes|=r),Mh(y,r,e),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===e){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function bo(e,n,r,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(a(387));if(y=y.memoizedProps,y!==null){var E=h.type;sn(h.pendingProps.value,y.value)||(e!==null?e.push(E):e=[E])}}else if(h===we.current){if(y=h.alternate,y===null)throw Error(a(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Jo):e=[Jo])}h=h.return}e!==null&&Vh(n,e,r,o),n.flags|=262144}function du(e){for(e=e.firstContext;e!==null;){if(!sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ds(e){fs=e,Ri=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function He(e){return lg(fs,e)}function mu(e,n){return fs===null&&ds(e),lg(e,n)}function lg(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ri===null){if(e===null)throw Error(a(308));Ri=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ri=Ri.next=n;return r}var u0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},c0=s.unstable_scheduleCallback,h0=s.unstable_NormalPriority,Te={$$typeof:lt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new u0,data:new Map,refCount:0}}function Ro(e){e.refCount--,e.refCount===0&&c0(h0,function(){e.controller.abort()})}var wo=null,Uh=0,ia=0,ra=null;function f0(e,n){if(wo===null){var r=wo=[];Uh=0,ia=xf(),ra={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Uh++,n.then(ug,ug),n}function ug(){if(--Uh===0&&wo!==null){ra!==null&&(ra.status="fulfilled");var e=wo;wo=null,ia=0,ra=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function d0(e,n){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<r.length;h++)(0,r[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var cg=H.S;H.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&f0(e,n),cg!==null&&cg(e,n)};var ms=X(null);function kh(){var e=ms.current;return e!==null?e:te.pooledCache}function gu(e,n){n===null?$(ms,ms.current):$(ms,n.pool)}function hg(){var e=kh();return e===null?null:{parent:Te._currentValue,pool:e}}var Io=Error(a(460)),fg=Error(a(474)),pu=Error(a(542)),Lh={then:function(){}};function dg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _u(){}function mg(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(_u,_u),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,pg(e),e;default:if(typeof n.status=="string")n.then(_u,_u);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,pg(e),e}throw Co=n,Io}}var Co=null;function gg(){if(Co===null)throw Error(a(459));var e=Co;return Co=null,e}function pg(e){if(e===Io||e===pu)throw Error(a(483))}var Wi=!1;function xh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ji(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tr(e,n,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Kt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=uu(e),ng(e,null,r),n}return lu(e,o,n,r),uu(e)}function Do(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,no(e,r)}}function Bh(e,n){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?h=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?h=f=n:f=f.next=n}else h=f=n;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var qh=!1;function Oo(){if(qh){var e=ra;if(e!==null)throw e}}function No(e,n,r,o){qh=!1;var h=e.updateQueue;Wi=!1;var f=h.firstBaseUpdate,y=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,L=R.next;R.next=null,y===null?f=L:y.next=L,y=R;var j=e.alternate;j!==null&&(j=j.updateQueue,E=j.lastBaseUpdate,E!==y&&(E===null?j.firstBaseUpdate=L:E.next=L,j.lastBaseUpdate=R))}if(f!==null){var K=h.baseState;y=0,j=L=R=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(kt&z)===z:(o&z)===z){z!==0&&z===ia&&(qh=!0),j!==null&&(j=j.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var mt=e,ut=E;z=n;var Zt=r;switch(ut.tag){case 1:if(mt=ut.payload,typeof mt=="function"){K=mt.call(Zt,K,z);break t}K=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=ut.payload,z=typeof mt=="function"?mt.call(Zt,K,z):mt,z==null)break t;K=A({},K,z);break t;case 2:Wi=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},j===null?(L=j=B,R=K):j=j.next=B,y|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);j===null&&(R=K),h.baseState=R,h.firstBaseUpdate=L,h.lastBaseUpdate=j,f===null&&(h.shared.lanes=0),lr|=y,e.lanes=y,e.memoizedState=K}}function _g(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function yg(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)_g(r[e],n)}var sa=X(null),yu=X(0);function vg(e,n){e=Vi,$(yu,e),$(sa,n),Vi=e|n.baseLanes}function Hh(){$(yu,Vi),$(sa,sa.current)}function jh(){Vi=yu.current,et(sa),et(yu)}var er=0,bt=null,Yt=null,ge=null,vu=!1,aa=!1,gs=!1,Eu=0,Mo=0,oa=null,m0=0;function ce(){throw Error(a(321))}function Gh(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!sn(e[r],n[r]))return!1;return!0}function Fh(e,n,r,o,h,f){return er=f,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?np:ip,gs=!1,f=r(o,h),gs=!1,aa&&(f=Tg(n,r,o,h)),Eg(e),f}function Eg(e){H.H=wu;var n=Yt!==null&&Yt.next!==null;if(er=0,ge=Yt=bt=null,vu=!1,Mo=0,oa=null,n)throw Error(a(300));e===null||De||(e=e.dependencies,e!==null&&du(e)&&(De=!0))}function Tg(e,n,r,o){bt=e;var h=0;do{if(aa&&(oa=null),Mo=0,aa=!1,25<=h)throw Error(a(301));if(h+=1,ge=Yt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=T0,f=n(r,o)}while(aa);return f}function g0(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?Vo(n):n,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(bt.flags|=1024),n}function Kh(){var e=Eu!==0;return Eu=0,e}function Qh(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function Xh(e){if(vu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}vu=!1}er=0,ge=Yt=bt=null,aa=!1,Mo=Eu=0,oa=null}function We(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?bt.memoizedState=ge=e:ge=ge.next=e,ge}function pe(){if(Yt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var n=ge===null?bt.memoizedState:ge.next;if(n!==null)ge=n,Yt=e;else{if(e===null)throw bt.alternate===null?Error(a(467)):Error(a(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},ge===null?bt.memoizedState=ge=e:ge=ge.next=e}return ge}function Yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(e){var n=Mo;return Mo+=1,oa===null&&(oa=[]),e=mg(oa,e,n),n=bt,(ge===null?n.memoizedState:ge.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?np:ip),e}function Tu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Vo(e);if(e.$$typeof===lt)return He(e)}throw Error(a(438,String(e)))}function $h(e){var n=null,r=bt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=bt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Yh(),bt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),o=0;o<e;o++)r[o]=N;return n.index++,r}function Ii(e,n){return typeof n=="function"?n(e):n}function Au(e){var n=pe();return Zh(n,Yt,e)}function Zh(e,n,r){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var y=h.next;h.next=f.next,f.next=y}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var E=y=null,R=null,L=n,j=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(kt&K)===K:(er&K)===K){var z=L.revertLane;if(z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===ia&&(j=!0);else if((er&z)===z){L=L.next,z===ia&&(j=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(E=R=K,y=f):R=R.next=K,bt.lanes|=z,lr|=z;K=L.action,gs&&r(f,K),f=L.hasEagerState?L.eagerState:r(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(E=R=z,y=f):R=R.next=z,bt.lanes|=K,lr|=K;L=L.next}while(L!==null&&L!==n);if(R===null?y=f:R.next=E,!sn(f,e.memoizedState)&&(De=!0,j&&(r=ra,r!==null)))throw r;e.memoizedState=f,e.baseState=y,e.baseQueue=R,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Wh(e){var n=pe(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var o=r.dispatch,h=r.pending,f=n.memoizedState;if(h!==null){r.pending=null;var y=h=h.next;do f=e(f,y.action),y=y.next;while(y!==h);sn(f,n.memoizedState)||(De=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),r.lastRenderedState=f}return[f,o]}function Ag(e,n,r){var o=bt,h=pe(),f=qt;if(f){if(r===void 0)throw Error(a(407));r=r()}else r=n();var y=!sn((Yt||h).memoizedState,r);y&&(h.memoizedState=r,De=!0),h=h.queue;var E=Rg.bind(null,o,h,e);if(Po(2048,8,E,[e]),h.getSnapshot!==n||y||ge!==null&&ge.memoizedState.tag&1){if(o.flags|=2048,la(9,Su(),bg.bind(null,o,h,r,n),null),te===null)throw Error(a(349));f||(er&124)!==0||Sg(o,n,r)}return r}function Sg(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=bt.updateQueue,n===null?(n=Yh(),bt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function bg(e,n,r,o){n.value=r,n.getSnapshot=o,wg(n)&&Ig(e)}function Rg(e,n,r){return r(function(){wg(n)&&Ig(e)})}function wg(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!sn(e,r)}catch{return!0}}function Ig(e){var n=Js(e,2);n!==null&&hn(n,e,2)}function Jh(e){var n=We();if(typeof e=="function"){var r=e;if(e=r(),gs){nn(!0);try{r()}finally{nn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},n}function Cg(e,n,r,o){return e.baseState=r,Zh(e,Yt,typeof o=="function"?o:Ii)}function p0(e,n,r,o,h){if(Ru(e))throw Error(a(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};H.T!==null?r(!0):f.isTransition=!1,o(f),r=n.pending,r===null?(f.next=n.pending=f,Dg(n,f)):(f.next=r.next,n.pending=r.next=f)}}function Dg(e,n){var r=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=H.T,y={};H.T=y;try{var E=r(h,o),R=H.S;R!==null&&R(y,E),Og(e,n,E)}catch(L){tf(e,n,L)}finally{H.T=f}}else try{f=r(h,o),Og(e,n,f)}catch(L){tf(e,n,L)}}function Og(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Ng(e,n,o)},function(o){return tf(e,n,o)}):Ng(e,n,r)}function Ng(e,n,r){n.status="fulfilled",n.value=r,Mg(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,Dg(e,r)))}function tf(e,n,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,Mg(n),n=n.next;while(n!==o)}e.action=null}function Mg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Vg(e,n){return n}function Pg(e,n){if(qt){var r=te.formState;if(r!==null){t:{var o=bt;if(qt){if(ae){e:{for(var h=ae,f=Zn;h.nodeType!==8;){if(!f){h=null;break e}if(h=Pn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ae=Pn(h.nextSibling),o=h.data==="F!";break t}}hs(o)}o=!1}o&&(n=r[0])}}return r=We(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:n},r.queue=o,r=Jg.bind(null,bt,o),o.dispatch=r,o=Jh(!1),f=af.bind(null,bt,!1,o.queue),o=We(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,r=p0.bind(null,bt,h,f,r),h.dispatch=r,o.memoizedState=e,[n,r,!1]}function Ug(e){var n=pe();return kg(n,Yt,e)}function kg(e,n,r){if(n=Zh(e,n,Vg)[0],e=Au(Ii)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Vo(n)}catch(y){throw y===Io?pu:y}else o=n;n=pe();var h=n.queue,f=h.dispatch;return r!==n.memoizedState&&(bt.flags|=2048,la(9,Su(),_0.bind(null,h,r),null)),[o,f,e]}function _0(e,n){e.action=n}function Lg(e){var n=pe(),r=Yt;if(r!==null)return kg(n,r,e);pe(),n=n.memoizedState,r=pe();var o=r.queue.dispatch;return r.memoizedState=e,[n,o,!1]}function la(e,n,r,o){return e={tag:e,create:r,deps:o,inst:n,next:null},n=bt.updateQueue,n===null&&(n=Yh(),bt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,n.lastEffect=e),e}function Su(){return{destroy:void 0,resource:void 0}}function xg(){return pe().memoizedState}function bu(e,n,r,o){var h=We();o=o===void 0?null:o,bt.flags|=e,h.memoizedState=la(1|n,Su(),r,o)}function Po(e,n,r,o){var h=pe();o=o===void 0?null:o;var f=h.memoizedState.inst;Yt!==null&&o!==null&&Gh(o,Yt.memoizedState.deps)?h.memoizedState=la(n,f,r,o):(bt.flags|=e,h.memoizedState=la(1|n,f,r,o))}function zg(e,n){bu(8390656,8,e,n)}function Bg(e,n){Po(2048,8,e,n)}function qg(e,n){return Po(4,2,e,n)}function Hg(e,n){return Po(4,4,e,n)}function jg(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Gg(e,n,r){r=r!=null?r.concat([e]):null,Po(4,4,jg.bind(null,n,e),r)}function ef(){}function Fg(e,n){var r=pe();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Gh(n,o[1])?o[0]:(r.memoizedState=[e,n],e)}function Kg(e,n){var r=pe();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Gh(n,o[1]))return o[0];if(o=e(),gs){nn(!0);try{e()}finally{nn(!1)}}return r.memoizedState=[o,n],o}function nf(e,n,r){return r===void 0||(er&1073741824)!==0?e.memoizedState=n:(e.memoizedState=r,e=Yp(),bt.lanes|=e,lr|=e,r)}function Qg(e,n,r,o){return sn(r,n)?r:sa.current!==null?(e=nf(e,r,o),sn(e,n)||(De=!0),e):(er&42)===0?(De=!0,e.memoizedState=r):(e=Yp(),bt.lanes|=e,lr|=e,n)}function Xg(e,n,r,o,h){var f=tt.p;tt.p=f!==0&&8>f?f:8;var y=H.T,E={};H.T=E,af(e,!1,n,r);try{var R=h(),L=H.S;if(L!==null&&L(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var j=d0(R,o);Uo(e,n,j,cn(e))}else Uo(e,n,o,cn(e))}catch(K){Uo(e,n,{then:function(){},status:"rejected",reason:K},cn())}finally{tt.p=f,H.T=y}}function y0(){}function rf(e,n,r,o){if(e.tag!==5)throw Error(a(476));var h=Yg(e).queue;Xg(e,h,n,at,r===null?y0:function(){return $g(e),r(o)})}function Yg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:at},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function $g(e){var n=Yg(e).next.queue;Uo(e,n,{},cn())}function sf(){return He(Jo)}function Zg(){return pe().memoizedState}function Wg(){return pe().memoizedState}function v0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=cn();e=Ji(r);var o=tr(n,e,r);o!==null&&(hn(o,n,r),Do(o,n,r)),n={cache:Ph()},e.payload=n;return}n=n.return}}function E0(e,n,r){var o=cn();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ru(e)?tp(n,r):(r=bh(e,n,r,o),r!==null&&(hn(r,e,o),ep(r,n,o)))}function Jg(e,n,r){var o=cn();Uo(e,n,r,o)}function Uo(e,n,r,o){var h={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ru(e))tp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,E=f(y,r);if(h.hasEagerState=!0,h.eagerState=E,sn(E,y))return lu(e,n,h,0),te===null&&ou(),!1}catch{}finally{}if(r=bh(e,n,h,o),r!==null)return hn(r,e,o),ep(r,n,o),!0}return!1}function af(e,n,r,o){if(o={lane:2,revertLane:xf(),action:o,hasEagerState:!1,eagerState:null,next:null},Ru(e)){if(n)throw Error(a(479))}else n=bh(e,r,o,2),n!==null&&hn(n,e,2)}function Ru(e){var n=e.alternate;return e===bt||n!==null&&n===bt}function tp(e,n){aa=vu=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function ep(e,n,r){if((r&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,no(e,r)}}var wu={readContext:He,use:Tu,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce},np={readContext:He,use:Tu,useCallback:function(e,n){return We().memoizedState=[e,n===void 0?null:n],e},useContext:He,useEffect:zg,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,bu(4194308,4,jg.bind(null,n,e),r)},useLayoutEffect:function(e,n){return bu(4194308,4,e,n)},useInsertionEffect:function(e,n){bu(4,2,e,n)},useMemo:function(e,n){var r=We();n=n===void 0?null:n;var o=e();if(gs){nn(!0);try{e()}finally{nn(!1)}}return r.memoizedState=[o,n],o},useReducer:function(e,n,r){var o=We();if(r!==void 0){var h=r(n);if(gs){nn(!0);try{r(n)}finally{nn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=E0.bind(null,bt,e),[o.memoizedState,e]},useRef:function(e){var n=We();return e={current:e},n.memoizedState=e},useState:function(e){e=Jh(e);var n=e.queue,r=Jg.bind(null,bt,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:ef,useDeferredValue:function(e,n){var r=We();return nf(r,e,n)},useTransition:function(){var e=Jh(!1);return e=Xg.bind(null,bt,e.queue,!0,!1),We().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var o=bt,h=We();if(qt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),te===null)throw Error(a(349));(kt&124)!==0||Sg(o,n,r)}h.memoizedState=r;var f={value:r,getSnapshot:n};return h.queue=f,zg(Rg.bind(null,o,f,e),[e]),o.flags|=2048,la(9,Su(),bg.bind(null,o,f,r,n),null),r},useId:function(){var e=We(),n=te.identifierPrefix;if(qt){var r=bi,o=Si;r=(o&~(1<<32-qe(o)-1)).toString(32)+r,n="«"+n+"R"+r,r=Eu++,0<r&&(n+="H"+r.toString(32)),n+="»"}else r=m0++,n="«"+n+"r"+r.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:sf,useFormState:Pg,useActionState:Pg,useOptimistic:function(e){var n=We();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=af.bind(null,bt,!0,r),r.dispatch=n,[e,n]},useMemoCache:$h,useCacheRefresh:function(){return We().memoizedState=v0.bind(null,bt)}},ip={readContext:He,use:Tu,useCallback:Fg,useContext:He,useEffect:Bg,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Kg,useReducer:Au,useRef:xg,useState:function(){return Au(Ii)},useDebugValue:ef,useDeferredValue:function(e,n){var r=pe();return Qg(r,Yt.memoizedState,e,n)},useTransition:function(){var e=Au(Ii)[0],n=pe().memoizedState;return[typeof e=="boolean"?e:Vo(e),n]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:sf,useFormState:Ug,useActionState:Ug,useOptimistic:function(e,n){var r=pe();return Cg(r,Yt,e,n)},useMemoCache:$h,useCacheRefresh:Wg},T0={readContext:He,use:Tu,useCallback:Fg,useContext:He,useEffect:Bg,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Kg,useReducer:Wh,useRef:xg,useState:function(){return Wh(Ii)},useDebugValue:ef,useDeferredValue:function(e,n){var r=pe();return Yt===null?nf(r,e,n):Qg(r,Yt.memoizedState,e,n)},useTransition:function(){var e=Wh(Ii)[0],n=pe().memoizedState;return[typeof e=="boolean"?e:Vo(e),n]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:sf,useFormState:Lg,useActionState:Lg,useOptimistic:function(e,n){var r=pe();return Yt!==null?Cg(r,Yt,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:$h,useCacheRefresh:Wg},ua=null,ko=0;function Iu(e){var n=ko;return ko+=1,ua===null&&(ua=[]),mg(ua,e,n)}function Lo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Cu(e,n){throw n.$$typeof===O?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function rp(e){var n=e._init;return n(e._payload)}function sp(e){function n(P,D){if(e){var k=P.deletions;k===null?(P.deletions=[D],P.flags|=16):k.push(D)}}function r(P,D){if(!e)return null;for(;D!==null;)n(P,D),D=D.sibling;return null}function o(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function h(P,D){return P=Ai(P,D),P.index=0,P.sibling=null,P}function f(P,D,k){return P.index=k,e?(k=P.alternate,k!==null?(k=k.index,k<D?(P.flags|=67108866,D):k):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function y(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,D,k,F){return D===null||D.tag!==6?(D=wh(k,P.mode,F),D.return=P,D):(D=h(D,k),D.return=P,D)}function R(P,D,k,F){var rt=k.type;return rt===W?j(P,D,k.props.children,F,k.key):D!==null&&(D.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&rp(rt)===D.type)?(D=h(D,k.props),Lo(D,k),D.return=P,D):(D=cu(k.type,k.key,k.props,null,P.mode,F),Lo(D,k),D.return=P,D)}function L(P,D,k,F){return D===null||D.tag!==4||D.stateNode.containerInfo!==k.containerInfo||D.stateNode.implementation!==k.implementation?(D=Ih(k,P.mode,F),D.return=P,D):(D=h(D,k.children||[]),D.return=P,D)}function j(P,D,k,F,rt){return D===null||D.tag!==7?(D=os(k,P.mode,F,rt),D.return=P,D):(D=h(D,k),D.return=P,D)}function K(P,D,k){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=wh(""+D,P.mode,k),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return k=cu(D.type,D.key,D.props,null,P.mode,k),Lo(k,D),k.return=P,k;case G:return D=Ih(D,P.mode,k),D.return=P,D;case S:var F=D._init;return D=F(D._payload),K(P,D,k)}if(Gt(D)||I(D))return D=os(D,P.mode,k,null),D.return=P,D;if(typeof D.then=="function")return K(P,Iu(D),k);if(D.$$typeof===lt)return K(P,mu(P,D),k);Cu(P,D)}return null}function z(P,D,k,F){var rt=D!==null?D.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return rt!==null?null:E(P,D,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case x:return k.key===rt?R(P,D,k,F):null;case G:return k.key===rt?L(P,D,k,F):null;case S:return rt=k._init,k=rt(k._payload),z(P,D,k,F)}if(Gt(k)||I(k))return rt!==null?null:j(P,D,k,F,null);if(typeof k.then=="function")return z(P,D,Iu(k),F);if(k.$$typeof===lt)return z(P,D,mu(P,k),F);Cu(P,k)}return null}function B(P,D,k,F,rt){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return P=P.get(k)||null,E(D,P,""+F,rt);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case x:return P=P.get(F.key===null?k:F.key)||null,R(D,P,F,rt);case G:return P=P.get(F.key===null?k:F.key)||null,L(D,P,F,rt);case S:var Ct=F._init;return F=Ct(F._payload),B(P,D,k,F,rt)}if(Gt(F)||I(F))return P=P.get(k)||null,j(D,P,F,rt,null);if(typeof F.then=="function")return B(P,D,k,Iu(F),rt);if(F.$$typeof===lt)return B(P,D,k,mu(D,F),rt);Cu(D,F)}return null}function mt(P,D,k,F){for(var rt=null,Ct=null,st=D,ft=D=0,Ne=null;st!==null&&ft<k.length;ft++){st.index>ft?(Ne=st,st=null):Ne=st.sibling;var xt=z(P,st,k[ft],F);if(xt===null){st===null&&(st=Ne);break}e&&st&&xt.alternate===null&&n(P,st),D=f(xt,D,ft),Ct===null?rt=xt:Ct.sibling=xt,Ct=xt,st=Ne}if(ft===k.length)return r(P,st),qt&&us(P,ft),rt;if(st===null){for(;ft<k.length;ft++)st=K(P,k[ft],F),st!==null&&(D=f(st,D,ft),Ct===null?rt=st:Ct.sibling=st,Ct=st);return qt&&us(P,ft),rt}for(st=o(st);ft<k.length;ft++)Ne=B(st,P,ft,k[ft],F),Ne!==null&&(e&&Ne.alternate!==null&&st.delete(Ne.key===null?ft:Ne.key),D=f(Ne,D,ft),Ct===null?rt=Ne:Ct.sibling=Ne,Ct=Ne);return e&&st.forEach(function(_r){return n(P,_r)}),qt&&us(P,ft),rt}function ut(P,D,k,F){if(k==null)throw Error(a(151));for(var rt=null,Ct=null,st=D,ft=D=0,Ne=null,xt=k.next();st!==null&&!xt.done;ft++,xt=k.next()){st.index>ft?(Ne=st,st=null):Ne=st.sibling;var _r=z(P,st,xt.value,F);if(_r===null){st===null&&(st=Ne);break}e&&st&&_r.alternate===null&&n(P,st),D=f(_r,D,ft),Ct===null?rt=_r:Ct.sibling=_r,Ct=_r,st=Ne}if(xt.done)return r(P,st),qt&&us(P,ft),rt;if(st===null){for(;!xt.done;ft++,xt=k.next())xt=K(P,xt.value,F),xt!==null&&(D=f(xt,D,ft),Ct===null?rt=xt:Ct.sibling=xt,Ct=xt);return qt&&us(P,ft),rt}for(st=o(st);!xt.done;ft++,xt=k.next())xt=B(st,P,ft,xt.value,F),xt!==null&&(e&&xt.alternate!==null&&st.delete(xt.key===null?ft:xt.key),D=f(xt,D,ft),Ct===null?rt=xt:Ct.sibling=xt,Ct=xt);return e&&st.forEach(function(AA){return n(P,AA)}),qt&&us(P,ft),rt}function Zt(P,D,k,F){if(typeof k=="object"&&k!==null&&k.type===W&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case x:t:{for(var rt=k.key;D!==null;){if(D.key===rt){if(rt=k.type,rt===W){if(D.tag===7){r(P,D.sibling),F=h(D,k.props.children),F.return=P,P=F;break t}}else if(D.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&rp(rt)===D.type){r(P,D.sibling),F=h(D,k.props),Lo(F,k),F.return=P,P=F;break t}r(P,D);break}else n(P,D);D=D.sibling}k.type===W?(F=os(k.props.children,P.mode,F,k.key),F.return=P,P=F):(F=cu(k.type,k.key,k.props,null,P.mode,F),Lo(F,k),F.return=P,P=F)}return y(P);case G:t:{for(rt=k.key;D!==null;){if(D.key===rt)if(D.tag===4&&D.stateNode.containerInfo===k.containerInfo&&D.stateNode.implementation===k.implementation){r(P,D.sibling),F=h(D,k.children||[]),F.return=P,P=F;break t}else{r(P,D);break}else n(P,D);D=D.sibling}F=Ih(k,P.mode,F),F.return=P,P=F}return y(P);case S:return rt=k._init,k=rt(k._payload),Zt(P,D,k,F)}if(Gt(k))return mt(P,D,k,F);if(I(k)){if(rt=I(k),typeof rt!="function")throw Error(a(150));return k=rt.call(k),ut(P,D,k,F)}if(typeof k.then=="function")return Zt(P,D,Iu(k),F);if(k.$$typeof===lt)return Zt(P,D,mu(P,k),F);Cu(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,D!==null&&D.tag===6?(r(P,D.sibling),F=h(D,k),F.return=P,P=F):(r(P,D),F=wh(k,P.mode,F),F.return=P,P=F),y(P)):r(P,D)}return function(P,D,k,F){try{ko=0;var rt=Zt(P,D,k,F);return ua=null,rt}catch(st){if(st===Io||st===pu)throw st;var Ct=an(29,st,null,P.mode);return Ct.lanes=F,Ct.return=P,Ct}finally{}}}var ca=sp(!0),ap=sp(!1),bn=X(null),Wn=null;function nr(e){var n=e.alternate;$(Ae,Ae.current&1),$(bn,e),Wn===null&&(n===null||sa.current!==null||n.memoizedState!==null)&&(Wn=e)}function op(e){if(e.tag===22){if($(Ae,Ae.current),$(bn,e),Wn===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Wn=e)}}else ir()}function ir(){$(Ae,Ae.current),$(bn,bn.current)}function Ci(e){et(bn),Wn===e&&(Wn=null),et(Ae)}var Ae=X(0);function Du(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||$f(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function of(e,n,r,o){n=e.memoizedState,r=r(o,n),r=r==null?n:A({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var lf={enqueueSetState:function(e,n,r){e=e._reactInternals;var o=cn(),h=Ji(o);h.payload=n,r!=null&&(h.callback=r),n=tr(e,h,o),n!==null&&(hn(n,e,o),Do(n,e,o))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var o=cn(),h=Ji(o);h.tag=1,h.payload=n,r!=null&&(h.callback=r),n=tr(e,h,o),n!==null&&(hn(n,e,o),Do(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=cn(),o=Ji(r);o.tag=2,n!=null&&(o.callback=n),n=tr(e,o,r),n!==null&&(hn(n,e,r),Do(n,e,r))}};function lp(e,n,r,o,h,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):n.prototype&&n.prototype.isPureReactComponent?!vo(r,o)||!vo(h,f):!0}function up(e,n,r,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==e&&lf.enqueueReplaceState(n,n.state,null)}function ps(e,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(e=e.defaultProps){r===n&&(r=A({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}var Ou=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function cp(e){Ou(e)}function hp(e){console.error(e)}function fp(e){Ou(e)}function Nu(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function dp(e,n,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(e,n,r){return r=Ji(r),r.tag=3,r.payload={element:null},r.callback=function(){Nu(e,n)},r}function mp(e){return e=Ji(e),e.tag=3,e}function gp(e,n,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){dp(n,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){dp(n,r,o),typeof h!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function A0(e,n,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&bo(n,r,h,!0),r=bn.current,r!==null){switch(r.tag){case 13:return Wn===null?Vf():r.alternate===null&&oe===0&&(oe=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===Lh?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),Uf(e,o,h)),!1;case 22:return r.flags|=65536,o===Lh?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),Uf(e,o,h)),!1}throw Error(a(435,r.tag))}return Uf(e,o,h),Vf(),!1}if(qt)return n=bn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Oh&&(e=Error(a(422),{cause:o}),So(En(e,r)))):(o!==Oh&&(n=Error(a(423),{cause:o}),So(En(n,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=En(o,r),h=uf(e.stateNode,o,h),Bh(e,h),oe!==4&&(oe=2)),!1;var f=Error(a(520),{cause:o});if(f=En(f,r),Go===null?Go=[f]:Go.push(f),oe!==4&&(oe=2),n===null)return!0;o=En(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=uf(r.stateNode,o,e),Bh(r,e),!1;case 1:if(n=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ur===null||!ur.has(f))))return r.flags|=65536,h&=-h,r.lanes|=h,h=mp(h),gp(h,e,r,o),Bh(r,h),!1}r=r.return}while(r!==null);return!1}var pp=Error(a(461)),De=!1;function Ue(e,n,r,o){n.child=e===null?ap(n,null,r,o):ca(n,e.child,r,o)}function _p(e,n,r,o,h){r=r.render;var f=n.ref;if("ref"in o){var y={};for(var E in o)E!=="ref"&&(y[E]=o[E])}else y=o;return ds(n),o=Fh(e,n,r,y,f,h),E=Kh(),e!==null&&!De?(Qh(e,n,h),Di(e,n,h)):(qt&&E&&Ch(n),n.flags|=1,Ue(e,n,o,h),n.child)}function yp(e,n,r,o,h){if(e===null){var f=r.type;return typeof f=="function"&&!Rh(f)&&f.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=f,vp(e,n,f,o,h)):(e=cu(r.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!_f(e,h)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:vo,r(y,o)&&e.ref===n.ref)return Di(e,n,h)}return n.flags|=1,e=Ai(f,o),e.ref=n.ref,e.return=n,n.child=e}function vp(e,n,r,o,h){if(e!==null){var f=e.memoizedProps;if(vo(f,o)&&e.ref===n.ref)if(De=!1,n.pendingProps=o=f,_f(e,h))(e.flags&131072)!==0&&(De=!0);else return n.lanes=e.lanes,Di(e,n,h)}return cf(e,n,r,o,h)}function Ep(e,n,r){var o=n.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|r:r,e!==null){for(h=n.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Tp(e,n,o,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&gu(n,f!==null?f.cachePool:null),f!==null?vg(n,f):Hh(),op(n);else return n.lanes=n.childLanes=536870912,Tp(e,n,f!==null?f.baseLanes|r:r,r)}else f!==null?(gu(n,f.cachePool),vg(n,f),ir(),n.memoizedState=null):(e!==null&&gu(n,null),Hh(),ir());return Ue(e,n,h,r),n.child}function Tp(e,n,r,o){var h=kh();return h=h===null?null:{parent:Te._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&gu(n,null),Hh(),op(n),e!==null&&bo(e,n,o,!0),null}function Mu(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function cf(e,n,r,o,h){return ds(n),r=Fh(e,n,r,o,void 0,h),o=Kh(),e!==null&&!De?(Qh(e,n,h),Di(e,n,h)):(qt&&o&&Ch(n),n.flags|=1,Ue(e,n,r,h),n.child)}function Ap(e,n,r,o,h,f){return ds(n),n.updateQueue=null,r=Tg(n,o,r,h),Eg(e),o=Kh(),e!==null&&!De?(Qh(e,n,f),Di(e,n,f)):(qt&&o&&Ch(n),n.flags|=1,Ue(e,n,r,f),n.child)}function Sp(e,n,r,o,h){if(ds(n),n.stateNode===null){var f=ta,y=r.contextType;typeof y=="object"&&y!==null&&(f=He(y)),f=new r(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=lf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},xh(n),y=r.contextType,f.context=typeof y=="object"&&y!==null?He(y):ta,f.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(of(n,r,y,o),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&lf.enqueueReplaceState(f,f.state,null),No(n,o,f,h),Oo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,R=ps(r,E);f.props=R;var L=f.context,j=r.contextType;y=ta,typeof j=="object"&&j!==null&&(y=He(j));var K=r.getDerivedStateFromProps;j=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,j||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==y)&&up(n,f,o,y),Wi=!1;var z=n.memoizedState;f.state=z,No(n,o,f,h),Oo(),L=n.memoizedState,E||z!==L||Wi?(typeof K=="function"&&(of(n,r,K,o),L=n.memoizedState),(R=Wi||lp(n,r,R,o,z,L,y))?(j||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=y,o=R):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,zh(e,n),y=n.memoizedProps,j=ps(r,y),f.props=j,K=n.pendingProps,z=f.context,L=r.contextType,R=ta,typeof L=="object"&&L!==null&&(R=He(L)),E=r.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==K||z!==R)&&up(n,f,o,R),Wi=!1,z=n.memoizedState,f.state=z,No(n,o,f,h),Oo();var B=n.memoizedState;y!==K||z!==B||Wi||e!==null&&e.dependencies!==null&&du(e.dependencies)?(typeof E=="function"&&(of(n,r,E,o),B=n.memoizedState),(j=Wi||lp(n,r,j,o,z,B,R)||e!==null&&e.dependencies!==null&&du(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,R)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=B),f.props=o,f.state=B,f.context=R,o=j):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Mu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=ca(n,e.child,null,h),n.child=ca(n,null,r,h)):Ue(e,n,r,h),n.memoizedState=f.state,e=n.child):e=Di(e,n,h),e}function bp(e,n,r,o){return Ao(),n.flags|=256,Ue(e,n,r,o),n.child}var hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(e){return{baseLanes:e,cachePool:hg()}}function df(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Rn),e}function Rp(e,n,r){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Ae.current&2)!==0),y&&(h=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(qt){if(h?nr(n):ir(),qt){var E=ae,R;if(R=E){t:{for(R=E,E=Zn;R.nodeType!==8;){if(!E){E=null;break t}if(R=Pn(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(n.memoizedState={dehydrated:E,treeContext:ls!==null?{id:Si,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},R=an(18,null,null,0),R.stateNode=E,R.return=n,n.child=R,Ze=n,ae=null,R=!0):R=!1}R||hs(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return $f(E)?n.lanes=32:n.lanes=536870912,null;Ci(n)}return E=o.children,o=o.fallback,h?(ir(),h=n.mode,E=Vu({mode:"hidden",children:E},h),o=os(o,h,r,null),E.return=n,o.return=n,E.sibling=o,n.child=E,h=n.child,h.memoizedState=ff(r),h.childLanes=df(e,y,r),n.memoizedState=hf,o):(nr(n),mf(n,E))}if(R=e.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(f)n.flags&256?(nr(n),n.flags&=-257,n=gf(e,n,r)):n.memoizedState!==null?(ir(),n.child=e.child,n.flags|=128,n=null):(ir(),h=o.fallback,E=n.mode,o=Vu({mode:"visible",children:o.children},E),h=os(h,E,r,null),h.flags|=2,o.return=n,h.return=n,o.sibling=h,n.child=o,ca(n,e.child,null,r),o=n.child,o.memoizedState=ff(r),o.childLanes=df(e,y,r),n.memoizedState=hf,n=h);else if(nr(n),$f(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var L=y.dgst;y=L,o=Error(a(419)),o.stack="",o.digest=y,So({value:o,source:null,stack:null}),n=gf(e,n,r)}else if(De||bo(e,n,r,!1),y=(r&e.childLanes)!==0,De||y){if(y=te,y!==null&&(o=r&-r,o=(o&42)!==0?1:Gi(o),o=(o&(y.suspendedLanes|r))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,Js(e,o),hn(y,e,o),pp;E.data==="$?"||Vf(),n=gf(e,n,r)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=R.treeContext,ae=Pn(E.nextSibling),Ze=n,qt=!0,cs=null,Zn=!1,e!==null&&(An[Sn++]=Si,An[Sn++]=bi,An[Sn++]=ls,Si=e.id,bi=e.overflow,ls=n),n=mf(n,o.children),n.flags|=4096);return n}return h?(ir(),h=o.fallback,E=n.mode,R=e.child,L=R.sibling,o=Ai(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,L!==null?h=Ai(L,h):(h=os(h,E,r,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,o=h,h=n.child,E=e.child.memoizedState,E===null?E=ff(r):(R=E.cachePool,R!==null?(L=Te._currentValue,R=R.parent!==L?{parent:L,pool:L}:R):R=hg(),E={baseLanes:E.baseLanes|r,cachePool:R}),h.memoizedState=E,h.childLanes=df(e,y,r),n.memoizedState=hf,o):(nr(n),r=e.child,e=r.sibling,r=Ai(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=r,n.memoizedState=null,r)}function mf(e,n){return n=Vu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Vu(e,n){return e=an(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function gf(e,n,r){return ca(n,e.child,null,r),e=mf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function wp(e,n,r){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Mh(e.return,n,r)}function pf(e,n,r,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=h)}function Ip(e,n,r){var o=n.pendingProps,h=o.revealOrder,f=o.tail;if(Ue(e,n,o.children,r),o=Ae.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wp(e,r,n);else if(e.tag===19)wp(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch($(Ae,o),h){case"forwards":for(r=n.child,h=null;r!==null;)e=r.alternate,e!==null&&Du(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=n.child,n.child=null):(h=r.sibling,r.sibling=null),pf(n,!1,h,r,f);break;case"backwards":for(r=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Du(e)===null){n.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}pf(n,!0,r,null,f);break;case"together":pf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Di(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),lr|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(bo(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,r=Ai(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Ai(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function _f(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&du(e)))}function S0(e,n,r){switch(n.tag){case 3:Jt(n,n.stateNode.containerInfo),Zi(n,Te,e.memoizedState.cache),Ao();break;case 27:case 5:ji(n);break;case 4:Jt(n,n.stateNode.containerInfo);break;case 10:Zi(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(nr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Rp(e,n,r):(nr(n),e=Di(e,n,r),e!==null?e.sibling:null);nr(n);break;case 19:var h=(e.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(bo(e,n,r,!1),o=(r&n.childLanes)!==0),h){if(o)return Ip(e,n,r);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$(Ae,Ae.current),o)break;return null;case 22:case 23:return n.lanes=0,Ep(e,n,r);case 24:Zi(n,Te,e.memoizedState.cache)}return Di(e,n,r)}function Cp(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)De=!0;else{if(!_f(e,r)&&(n.flags&128)===0)return De=!1,S0(e,n,r);De=(e.flags&131072)!==0}else De=!1,qt&&(n.flags&1048576)!==0&&rg(n,fu,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,h=o._init;if(o=h(o._payload),n.type=o,typeof o=="function")Rh(o)?(e=ps(o,e),n.tag=1,n=Sp(null,n,o,e,r)):(n.tag=0,n=cf(null,n,o,e,r));else{if(o!=null){if(h=o.$$typeof,h===Vt){n.tag=11,n=_p(null,n,o,e,r);break t}else if(h===M){n.tag=14,n=yp(null,n,o,e,r);break t}}throw n=zt(o)||o,Error(a(306,n,""))}}return n;case 0:return cf(e,n,n.type,n.pendingProps,r);case 1:return o=n.type,h=ps(o,n.pendingProps),Sp(e,n,o,h,r);case 3:t:{if(Jt(n,n.stateNode.containerInfo),e===null)throw Error(a(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,zh(e,n),No(n,o,null,r);var y=n.memoizedState;if(o=y.cache,Zi(n,Te,o),o!==f.cache&&Vh(n,[Te],r,!0),Oo(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=bp(e,n,o,r);break t}else if(o!==h){h=En(Error(a(424)),n),So(h),n=bp(e,n,o,r);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ae=Pn(e.firstChild),Ze=n,qt=!0,cs=null,Zn=!0,r=ap(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ao(),o===h){n=Di(e,n,r);break t}Ue(e,n,o,r)}n=n.child}return n;case 26:return Mu(e,n),e===null?(r=M_(n.type,null,n.pendingProps,null))?n.memoizedState=r:qt||(r=n.type,e=n.pendingProps,o=Qu(yt.current).createElement(r),o[ye]=n,o[de]=e,Le(o,r,e),ue(o),n.stateNode=o):n.memoizedState=M_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ji(n),e===null&&qt&&(o=n.stateNode=D_(n.type,n.pendingProps,yt.current),Ze=n,Zn=!0,h=ae,fr(n.type)?(Zf=h,ae=Pn(o.firstChild)):ae=h),Ue(e,n,n.pendingProps.children,r),Mu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&qt&&((h=o=ae)&&(o=Z0(o,n.type,n.pendingProps,Zn),o!==null?(n.stateNode=o,Ze=n,ae=Pn(o.firstChild),Zn=!1,h=!0):h=!1),h||hs(n)),ji(n),h=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,Qf(h,f)?o=null:y!==null&&Qf(h,y)&&(n.flags|=32),n.memoizedState!==null&&(h=Fh(e,n,g0,null,null,r),Jo._currentValue=h),Mu(e,n),Ue(e,n,o,r),n.child;case 6:return e===null&&qt&&((e=r=ae)&&(r=W0(r,n.pendingProps,Zn),r!==null?(n.stateNode=r,Ze=n,ae=null,e=!0):e=!1),e||hs(n)),null;case 13:return Rp(e,n,r);case 4:return Jt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ca(n,null,o,r):Ue(e,n,o,r),n.child;case 11:return _p(e,n,n.type,n.pendingProps,r);case 7:return Ue(e,n,n.pendingProps,r),n.child;case 8:return Ue(e,n,n.pendingProps.children,r),n.child;case 12:return Ue(e,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Zi(n,n.type,o.value),Ue(e,n,o.children,r),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ds(n),h=He(h),o=o(h),n.flags|=1,Ue(e,n,o,r),n.child;case 14:return yp(e,n,n.type,n.pendingProps,r);case 15:return vp(e,n,n.type,n.pendingProps,r);case 19:return Ip(e,n,r);case 31:return o=n.pendingProps,r=n.mode,o={mode:o.mode,children:o.children},e===null?(r=Vu(o,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=Ai(e.child,o),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Ep(e,n,r);case 24:return ds(n),o=He(Te),e===null?(h=kh(),h===null&&(h=te,f=Ph(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=r),h=f),n.memoizedState={parent:o,cache:h},xh(n),Zi(n,Te,h)):((e.lanes&r)!==0&&(zh(e,n),No(n,null,null,r),Oo()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Zi(n,Te,o)):(o=f.cache,Zi(n,Te,o),o!==h.cache&&Vh(n,[Te],r,!0))),Ue(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Oi(e){e.flags|=4}function Dp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!L_(n)){if(n=bn.current,n!==null&&((kt&4194048)===kt?Wn!==null:(kt&62914560)!==kt&&(kt&536870912)===0||n!==Wn))throw Co=Lh,fg;e.flags|=8192}}function Pu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?to():536870912,e.lanes|=n,ma|=n)}function xo(e,n){if(!qt)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ie(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(n)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=r,n}function b0(e,n,r){var o=n.pendingProps;switch(Dh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(n),null;case 1:return ie(n),null;case 3:return r=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),wi(Te),zn(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(To(n)?Oi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,og())),ie(n),null;case 26:return r=n.memoizedState,e===null?(Oi(n),r!==null?(ie(n),Dp(n,r)):(ie(n),n.flags&=-16777217)):r?r!==e.memoizedState?(Oi(n),ie(n),Dp(n,r)):(ie(n),n.flags&=-16777217):(e.memoizedProps!==o&&Oi(n),ie(n),n.flags&=-16777217),null;case 27:ui(n),r=yt.current;var h=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Oi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return ie(n),null}e=ot.current,To(n)?sg(n):(e=D_(h,o,r),n.stateNode=e,Oi(n))}return ie(n),null;case 5:if(ui(n),r=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Oi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return ie(n),null}if(e=ot.current,To(n))sg(n);else{switch(h=Qu(yt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(r,{is:o.is}):h.createElement(r)}}e[ye]=n,e[de]=o;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=e;t:switch(Le(e,r,o),r){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Oi(n)}}return ie(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Oi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(e=yt.current,To(n)){if(e=n.stateNode,r=n.memoizedProps,o=null,h=Ze,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[ye]=n,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||A_(e.nodeValue,r)),e||hs(n)}else e=Qu(e).createTextNode(o),e[ye]=n,n.stateNode=e}return ie(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=To(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[ye]=n}else Ao(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ie(n),h=!1}else h=og(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Ci(n),n):(Ci(n),null)}if(Ci(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=o!==null,e=e!==null&&e.memoizedState!==null,r){o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return r!==e&&r&&(n.child.flags|=8192),Pu(n,n.updateQueue),ie(n),null;case 4:return zn(),e===null&&Hf(n.stateNode.containerInfo),ie(n),null;case 10:return wi(n.type),ie(n),null;case 19:if(et(Ae),h=n.memoizedState,h===null)return ie(n),null;if(o=(n.flags&128)!==0,f=h.rendering,f===null)if(o)xo(h,!1);else{if(oe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Du(e),f!==null){for(n.flags|=128,xo(h,!1),e=f.updateQueue,n.updateQueue=e,Pu(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)ig(r,e),r=r.sibling;return $(Ae,Ae.current&1|2),n.child}e=e.sibling}h.tail!==null&&mn()>Lu&&(n.flags|=128,o=!0,xo(h,!1),n.lanes=4194304)}else{if(!o)if(e=Du(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Pu(n,e),xo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qt)return ie(n),null}else 2*mn()-h.renderingStartTime>Lu&&r!==536870912&&(n.flags|=128,o=!0,xo(h,!1),n.lanes=4194304);h.isBackwards?(f.sibling=n.child,n.child=f):(e=h.last,e!==null?e.sibling=f:n.child=f,h.last=f)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=mn(),n.sibling=null,e=Ae.current,$(Ae,o?e&1|2:e&1),n):(ie(n),null);case 22:case 23:return Ci(n),jh(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(ie(n),n.subtreeFlags&6&&(n.flags|=8192)):ie(n),r=n.updateQueue,r!==null&&Pu(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),e!==null&&et(ms),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),wi(Te),ie(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function R0(e,n){switch(Dh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return wi(Te),zn(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ui(n),null;case 13:if(Ci(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Ao()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return et(Ae),null;case 4:return zn(),null;case 10:return wi(n.type),null;case 22:case 23:return Ci(n),jh(),e!==null&&et(ms),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return wi(Te),null;case 25:return null;default:return null}}function Op(e,n){switch(Dh(n),n.tag){case 3:wi(Te),zn();break;case 26:case 27:case 5:ui(n);break;case 4:zn();break;case 13:Ci(n);break;case 19:et(Ae);break;case 10:wi(n.type);break;case 22:case 23:Ci(n),jh(),e!==null&&et(ms);break;case 24:wi(Te)}}function zo(e,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&e)===e){o=void 0;var f=r.create,y=r.inst;o=f(),y.destroy=o}r=r.next}while(r!==h)}}catch(E){Wt(n,n.return,E)}}function rr(e,n,r){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var y=o.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,h=n;var R=r,L=E;try{L()}catch(j){Wt(h,R,j)}}}o=o.next}while(o!==f)}}catch(j){Wt(n,n.return,j)}}function Np(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{yg(n,r)}catch(o){Wt(e,e.return,o)}}}function Mp(e,n,r){r.props=ps(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Wt(e,n,o)}}function Bo(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(h){Wt(e,n,h)}}function Jn(e,n){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){Wt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){Wt(e,n,h)}else r.current=null}function Vp(e){var n=e.type,r=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break t;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){Wt(e,e.return,h)}}function yf(e,n,r){try{var o=e.stateNode;K0(o,e.type,r,n),o[de]=n}catch(h){Wt(e,e.return,h)}}function Pp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fr(e.type)||e.tag===4}function vf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Pp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ef(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ku));else if(o!==4&&(o===27&&fr(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Ef(e,n,r),e=e.sibling;e!==null;)Ef(e,n,r),e=e.sibling}function Uu(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(o!==4&&(o===27&&fr(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Uu(e,n,r),e=e.sibling;e!==null;)Uu(e,n,r),e=e.sibling}function Up(e){var n=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Le(n,o,r),n[ye]=e,n[de]=r}catch(f){Wt(e,e.return,f)}}var Ni=!1,he=!1,Tf=!1,kp=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function w0(e,n){if(e=e.containerInfo,Ff=Ju,e=Qm(e),yh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break t}var y=0,E=-1,R=-1,L=0,j=0,K=e,z=null;e:for(;;){for(var B;K!==r||h!==0&&K.nodeType!==3||(E=y+h),K!==f||o!==0&&K.nodeType!==3||(R=y+o),K.nodeType===3&&(y+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===r&&++L===h&&(E=y),z===f&&++j===o&&(R=y),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}r=E===-1||R===-1?null:{start:E,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kf={focusedElem:e,selectionRange:r},Ju=!1,Oe=n;Oe!==null;)if(n=Oe,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Oe=e;else for(;Oe!==null;){switch(n=Oe,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,r=n,h=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var mt=ps(r.type,h,r.elementType===r.type);e=o.getSnapshotBeforeUpdate(mt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ut){Wt(r,r.return,ut)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)Yf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Yf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,Oe=e;break}Oe=n.return}}function Lp(e,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:sr(e,r),o&4&&zo(5,r);break;case 1:if(sr(e,r),o&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(y){Wt(r,r.return,y)}else{var h=ps(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Wt(r,r.return,y)}}o&64&&Np(r),o&512&&Bo(r,r.return);break;case 3:if(sr(e,r),o&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{yg(e,n)}catch(y){Wt(r,r.return,y)}}break;case 27:n===null&&o&4&&Up(r);case 26:case 5:sr(e,r),n===null&&o&4&&Vp(r),o&512&&Bo(r,r.return);break;case 12:sr(e,r);break;case 13:sr(e,r),o&4&&Bp(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=U0.bind(null,r),J0(e,r))));break;case 22:if(o=r.memoizedState!==null||Ni,!o){n=n!==null&&n.memoizedState!==null||he,h=Ni;var f=he;Ni=o,(he=n)&&!f?ar(e,r,(r.subtreeFlags&8772)!==0):sr(e,r),Ni=h,he=f}break;case 30:break;default:sr(e,r)}}function xp(e){var n=e.alternate;n!==null&&(e.alternate=null,xp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Qi(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ne=null,Je=!1;function Mi(e,n,r){for(r=r.child;r!==null;)zp(e,n,r),r=r.sibling}function zp(e,n,r){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(se,r)}catch{}switch(r.tag){case 26:he||Jn(r,n),Mi(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:he||Jn(r,n);var o=ne,h=Je;fr(r.type)&&(ne=r.stateNode,Je=!1),Mi(e,n,r),Yo(r.stateNode),ne=o,Je=h;break;case 5:he||Jn(r,n);case 6:if(o=ne,h=Je,ne=null,Mi(e,n,r),ne=o,Je=h,ne!==null)if(Je)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(r.stateNode)}catch(f){Wt(r,n,f)}else try{ne.removeChild(r.stateNode)}catch(f){Wt(r,n,f)}break;case 18:ne!==null&&(Je?(e=ne,I_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),il(e)):I_(ne,r.stateNode));break;case 4:o=ne,h=Je,ne=r.stateNode.containerInfo,Je=!0,Mi(e,n,r),ne=o,Je=h;break;case 0:case 11:case 14:case 15:he||rr(2,r,n),he||rr(4,r,n),Mi(e,n,r);break;case 1:he||(Jn(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Mp(r,n,o)),Mi(e,n,r);break;case 21:Mi(e,n,r);break;case 22:he=(o=he)||r.memoizedState!==null,Mi(e,n,r),he=o;break;default:Mi(e,n,r)}}function Bp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{il(e)}catch(r){Wt(n,n.return,r)}}function I0(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new kp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new kp),n;default:throw Error(a(435,e.tag))}}function Af(e,n){var r=I0(e);n.forEach(function(o){var h=k0.bind(null,e,o);r.has(o)||(r.add(o),o.then(h,h))})}function on(e,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],f=e,y=n,E=y;t:for(;E!==null;){switch(E.tag){case 27:if(fr(E.type)){ne=E.stateNode,Je=!1;break t}break;case 5:ne=E.stateNode,Je=!1;break t;case 3:case 4:ne=E.stateNode.containerInfo,Je=!0;break t}E=E.return}if(ne===null)throw Error(a(160));zp(f,y,h),ne=null,Je=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)qp(n,e),n=n.sibling}var Vn=null;function qp(e,n){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:on(n,e),ln(e),o&4&&(rr(3,e,e.return),zo(3,e),rr(5,e,e.return));break;case 1:on(n,e),ln(e),o&512&&(he||r===null||Jn(r,r.return)),o&64&&Ni&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=Vn;if(on(n,e),ln(e),o&512&&(he||r===null||Jn(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){t:{o=e.type,r=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Fr]||f[ye]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Le(f,o,r),f[ye]=e,ue(f),o=f;break t;case"link":var y=U_("link","href",h).get(o+(r.href||""));if(y){for(var E=0;E<y.length;E++)if(f=y[E],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(E,1);break e}}f=h.createElement(o),Le(f,o,r),h.head.appendChild(f);break;case"meta":if(y=U_("meta","content",h).get(o+(r.content||""))){for(E=0;E<y.length;E++)if(f=y[E],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(E,1);break e}}f=h.createElement(o),Le(f,o,r),h.head.appendChild(f);break;default:throw Error(a(468,o))}f[ye]=e,ue(f),o=f}e.stateNode=o}else k_(h,e.type,e.stateNode);else e.stateNode=P_(h,o,e.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?k_(h,e.type,e.stateNode):P_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&yf(e,e.memoizedProps,r.memoizedProps)}break;case 27:on(n,e),ln(e),o&512&&(he||r===null||Jn(r,r.return)),r!==null&&o&4&&yf(e,e.memoizedProps,r.memoizedProps);break;case 5:if(on(n,e),ln(e),o&512&&(he||r===null||Jn(r,r.return)),e.flags&32){h=e.stateNode;try{pn(h,"")}catch(B){Wt(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,yf(e,h,r!==null?r.memoizedProps:h)),o&1024&&(Tf=!0);break;case 6:if(on(n,e),ln(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(B){Wt(e,e.return,B)}}break;case 3:if($u=null,h=Vn,Vn=Xu(n.containerInfo),on(n,e),Vn=h,ln(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{il(n.containerInfo)}catch(B){Wt(e,e.return,B)}Tf&&(Tf=!1,Hp(e));break;case 4:o=Vn,Vn=Xu(e.stateNode.containerInfo),on(n,e),ln(e),Vn=o;break;case 12:on(n,e),ln(e);break;case 13:on(n,e),ln(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Cf=mn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Af(e,o)));break;case 22:h=e.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,L=Ni,j=he;if(Ni=L||h,he=j||R,on(n,e),he=j,Ni=L,ln(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(r===null||R||Ni||he||_s(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){R=r=n;try{if(f=R.stateNode,h)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=R.stateNode;var K=R.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Wt(R,R.return,B)}}}else if(n.tag===6){if(r===null){R=n;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(B){Wt(R,R.return,B)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Af(e,r))));break;case 19:on(n,e),ln(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Af(e,o)));break;case 30:break;case 21:break;default:on(n,e),ln(e)}}function ln(e){var n=e.flags;if(n&2){try{for(var r,o=e.return;o!==null;){if(Pp(o)){r=o;break}o=o.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var h=r.stateNode,f=vf(e);Uu(e,f,h);break;case 5:var y=r.stateNode;r.flags&32&&(pn(y,""),r.flags&=-33);var E=vf(e);Uu(e,E,y);break;case 3:case 4:var R=r.stateNode.containerInfo,L=vf(e);Ef(e,L,R);break;default:throw Error(a(161))}}catch(j){Wt(e,e.return,j)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Hp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Hp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function sr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Lp(e,n.alternate,n),n=n.sibling}function _s(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:rr(4,n,n.return),_s(n);break;case 1:Jn(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Mp(n,n.return,r),_s(n);break;case 27:Yo(n.stateNode);case 26:case 5:Jn(n,n.return),_s(n);break;case 22:n.memoizedState===null&&_s(n);break;case 30:_s(n);break;default:_s(n)}e=e.sibling}}function ar(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:ar(h,f,r),zo(4,f);break;case 1:if(ar(h,f,r),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Wt(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)_g(R[h],E)}catch(L){Wt(o,o.return,L)}}r&&y&64&&Np(f),Bo(f,f.return);break;case 27:Up(f);case 26:case 5:ar(h,f,r),r&&o===null&&y&4&&Vp(f),Bo(f,f.return);break;case 12:ar(h,f,r);break;case 13:ar(h,f,r),r&&y&4&&Bp(h,f);break;case 22:f.memoizedState===null&&ar(h,f,r),Bo(f,f.return);break;case 30:break;default:ar(h,f,r)}n=n.sibling}}function Sf(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ro(r))}function bf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ro(e))}function ti(e,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jp(e,n,r,o),n=n.sibling}function jp(e,n,r,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ti(e,n,r,o),h&2048&&zo(9,n);break;case 1:ti(e,n,r,o);break;case 3:ti(e,n,r,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ro(e)));break;case 12:if(h&2048){ti(e,n,r,o),e=n.stateNode;try{var f=n.memoizedProps,y=f.id,E=f.onPostCommit;typeof E=="function"&&E(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Wt(n,n.return,R)}}else ti(e,n,r,o);break;case 13:ti(e,n,r,o);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?ti(e,n,r,o):qo(e,n):f._visibility&2?ti(e,n,r,o):(f._visibility|=2,ha(e,n,r,o,(n.subtreeFlags&10256)!==0)),h&2048&&Sf(y,n);break;case 24:ti(e,n,r,o),h&2048&&bf(n.alternate,n);break;default:ti(e,n,r,o)}}function ha(e,n,r,o,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,y=n,E=r,R=o,L=y.flags;switch(y.tag){case 0:case 11:case 15:ha(f,y,E,R,h),zo(8,y);break;case 23:break;case 22:var j=y.stateNode;y.memoizedState!==null?j._visibility&2?ha(f,y,E,R,h):qo(f,y):(j._visibility|=2,ha(f,y,E,R,h)),h&&L&2048&&Sf(y.alternate,y);break;case 24:ha(f,y,E,R,h),h&&L&2048&&bf(y.alternate,y);break;default:ha(f,y,E,R,h)}n=n.sibling}}function qo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,o=n,h=o.flags;switch(o.tag){case 22:qo(r,o),h&2048&&Sf(o.alternate,o);break;case 24:qo(r,o),h&2048&&bf(o.alternate,o);break;default:qo(r,o)}n=n.sibling}}var Ho=8192;function fa(e){if(e.subtreeFlags&Ho)for(e=e.child;e!==null;)Gp(e),e=e.sibling}function Gp(e){switch(e.tag){case 26:fa(e),e.flags&Ho&&e.memoizedState!==null&&fA(Vn,e.memoizedState,e.memoizedProps);break;case 5:fa(e);break;case 3:case 4:var n=Vn;Vn=Xu(e.stateNode.containerInfo),fa(e),Vn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ho,Ho=16777216,fa(e),Ho=n):fa(e));break;default:fa(e)}}function Fp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function jo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Oe=o,Qp(o,e)}Fp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Kp(e),e=e.sibling}function Kp(e){switch(e.tag){case 0:case 11:case 15:jo(e),e.flags&2048&&rr(9,e,e.return);break;case 3:jo(e);break;case 12:jo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ku(e)):jo(e);break;default:jo(e)}}function ku(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Oe=o,Qp(o,e)}Fp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:rr(8,n,n.return),ku(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,ku(n));break;default:ku(n)}e=e.sibling}}function Qp(e,n){for(;Oe!==null;){var r=Oe;switch(r.tag){case 0:case 11:case 15:rr(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ro(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Oe=o;else t:for(r=e;Oe!==null;){o=Oe;var h=o.sibling,f=o.return;if(xp(o),o===r){Oe=null;break t}if(h!==null){h.return=f,Oe=h;break t}Oe=f}}}var C0={getCacheForType:function(e){var n=He(Te),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r}},D0=typeof WeakMap=="function"?WeakMap:Map,Kt=0,te=null,Dt=null,kt=0,Qt=0,un=null,or=!1,da=!1,Rf=!1,Vi=0,oe=0,lr=0,ys=0,wf=0,Rn=0,ma=0,Go=null,tn=null,If=!1,Cf=0,Lu=1/0,xu=null,ur=null,ke=0,cr=null,ga=null,pa=0,Df=0,Of=null,Xp=null,Fo=0,Nf=null;function cn(){if((Kt&2)!==0&&kt!==0)return kt&-kt;if(H.T!==null){var e=ia;return e!==0?e:xf()}return Fi()}function Yp(){Rn===0&&(Rn=(kt&536870912)===0||qt?Ja():536870912);var e=bn.current;return e!==null&&(e.flags|=32),Rn}function hn(e,n,r){(e===te&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(_a(e,0),hr(e,kt,Rn,!1)),hi(e,r),((Kt&2)===0||e!==te)&&(e===te&&((Kt&2)===0&&(ys|=r),oe===4&&hr(e,kt,Rn,!1)),ei(e))}function $p(e,n,r){if((Kt&6)!==0)throw Error(a(327));var o=!r&&(n&124)===0&&(n&e.expiredLanes)===0||Gr(e,n),h=o?M0(e,n):Pf(e,n,!0),f=o;do{if(h===0){da&&!o&&hr(e,n,0,!1);break}else{if(r=e.current.alternate,f&&!O0(r)){h=Pf(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;t:{var E=e;h=Go;var R=E.current.memoizedState.isDehydrated;if(R&&(_a(E,y).flags|=256),y=Pf(E,y,!1),y!==2){if(Rf&&!R){E.errorRecoveryDisabledLanes|=f,ys|=f,h=4;break t}f=tn,tn=h,f!==null&&(tn===null?tn=f:tn.push.apply(tn,f))}h=y}if(f=!1,h!==2)continue}}if(h===1){_a(e,0),hr(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:hr(o,n,Rn,!or);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=Cf+300-mn(),10<h)){if(hr(o,n,Rn,!or),Ps(o,0,!0)!==0)break t;o.timeoutHandle=R_(Zp.bind(null,o,r,tn,xu,If,n,Rn,ys,ma,or,f,2,-0,0),h);break t}Zp(o,r,tn,xu,If,n,Rn,ys,ma,or,f,0,-0,0)}}break}while(!0);ei(e)}function Zp(e,n,r,o,h,f,y,E,R,L,j,K,z,B){if(e.timeoutHandle=-1,K=n.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(Wo={stylesheets:null,count:0,unsuspend:hA},Gp(n),K=dA(),K!==null)){e.cancelPendingCommit=K(r_.bind(null,e,n,f,r,o,h,y,E,R,j,1,z,B)),hr(e,f,y,!L);return}r_(e,n,f,r,o,h,y,E,R)}function O0(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],f=h.getSnapshot;h=h.value;try{if(!sn(f(),h))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function hr(e,n,r,o){n&=~wf,n&=~ys,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-qe(h),y=1<<f;o[f]=-1,h&=~y}r!==0&&Bn(e,r,n)}function zu(){return(Kt&6)===0?(Ko(0),!1):!0}function Mf(){if(Dt!==null){if(Qt===0)var e=Dt.return;else e=Dt,Ri=fs=null,Xh(e),ua=null,ko=0,e=Dt;for(;e!==null;)Op(e.alternate,e),e=e.return;Dt=null}}function _a(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,X0(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Mf(),te=e,Dt=r=Ai(e.current,null),kt=n,Qt=0,un=null,or=!1,da=Gr(e,n),Rf=!1,ma=Rn=wf=ys=lr=oe=0,tn=Go=null,If=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-qe(o),f=1<<h;n|=e[h],o&=~f}return Vi=n,ou(),r}function Wp(e,n){bt=null,H.H=wu,n===Io||n===pu?(n=gg(),Qt=3):n===fg?(n=gg(),Qt=4):Qt=n===pp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,un=n,Dt===null&&(oe=1,Nu(e,En(n,e.current)))}function Jp(){var e=H.H;return H.H=wu,e===null?wu:e}function t_(){var e=H.A;return H.A=C0,e}function Vf(){oe=4,or||(kt&4194048)!==kt&&bn.current!==null||(da=!0),(lr&134217727)===0&&(ys&134217727)===0||te===null||hr(te,kt,Rn,!1)}function Pf(e,n,r){var o=Kt;Kt|=2;var h=Jp(),f=t_();(te!==e||kt!==n)&&(xu=null,_a(e,n)),n=!1;var y=oe;t:do try{if(Qt!==0&&Dt!==null){var E=Dt,R=un;switch(Qt){case 8:Mf(),y=6;break t;case 3:case 2:case 9:case 6:bn.current===null&&(n=!0);var L=Qt;if(Qt=0,un=null,ya(e,E,R,L),r&&da){y=0;break t}break;default:L=Qt,Qt=0,un=null,ya(e,E,R,L)}}N0(),y=oe;break}catch(j){Wp(e,j)}while(!0);return n&&e.shellSuspendCounter++,Ri=fs=null,Kt=o,H.H=h,H.A=f,Dt===null&&(te=null,kt=0,ou()),y}function N0(){for(;Dt!==null;)e_(Dt)}function M0(e,n){var r=Kt;Kt|=2;var o=Jp(),h=t_();te!==e||kt!==n?(xu=null,Lu=mn()+500,_a(e,n)):da=Gr(e,n);t:do try{if(Qt!==0&&Dt!==null){n=Dt;var f=un;e:switch(Qt){case 1:Qt=0,un=null,ya(e,n,f,1);break;case 2:case 9:if(dg(f)){Qt=0,un=null,n_(n);break}n=function(){Qt!==2&&Qt!==9||te!==e||(Qt=7),ei(e)},f.then(n,n);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:dg(f)?(Qt=0,un=null,n_(n)):(Qt=0,un=null,ya(e,n,f,7));break;case 5:var y=null;switch(Dt.tag){case 26:y=Dt.memoizedState;case 5:case 27:var E=Dt;if(!y||L_(y)){Qt=0,un=null;var R=E.sibling;if(R!==null)Dt=R;else{var L=E.return;L!==null?(Dt=L,Bu(L)):Dt=null}break e}}Qt=0,un=null,ya(e,n,f,5);break;case 6:Qt=0,un=null,ya(e,n,f,6);break;case 8:Mf(),oe=6;break t;default:throw Error(a(462))}}V0();break}catch(j){Wp(e,j)}while(!0);return Ri=fs=null,H.H=o,H.A=h,Kt=r,Dt!==null?0:(te=null,kt=0,ou(),oe)}function V0(){for(;Dt!==null&&!Ya();)e_(Dt)}function e_(e){var n=Cp(e.alternate,e,Vi);e.memoizedProps=e.pendingProps,n===null?Bu(e):Dt=n}function n_(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=Ap(r,n,n.pendingProps,n.type,void 0,kt);break;case 11:n=Ap(r,n,n.pendingProps,n.type.render,n.ref,kt);break;case 5:Xh(n);default:Op(r,n),n=Dt=ig(n,Vi),n=Cp(r,n,Vi)}e.memoizedProps=e.pendingProps,n===null?Bu(e):Dt=n}function ya(e,n,r,o){Ri=fs=null,Xh(n),ua=null,ko=0;var h=n.return;try{if(A0(e,h,n,r,kt)){oe=1,Nu(e,En(r,e.current)),Dt=null;return}}catch(f){if(h!==null)throw Dt=h,f;oe=1,Nu(e,En(r,e.current)),Dt=null;return}n.flags&32768?(qt||o===1?e=!0:da||(kt&536870912)!==0?e=!1:(or=e=!0,(o===2||o===9||o===3||o===6)&&(o=bn.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(n,e)):Bu(n)}function Bu(e){var n=e;do{if((n.flags&32768)!==0){i_(n,or);return}e=n.return;var r=b0(n.alternate,n,Vi);if(r!==null){Dt=r;return}if(n=n.sibling,n!==null){Dt=n;return}Dt=n=e}while(n!==null);oe===0&&(oe=5)}function i_(e,n){do{var r=R0(e.alternate,e);if(r!==null){r.flags&=32767,Dt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=r}while(e!==null);oe=6,Dt=null}function r_(e,n,r,o,h,f,y,E,R){e.cancelPendingCommit=null;do qu();while(ke!==0);if((Kt&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Sh,eo(e,r,f,y,E,R),e===te&&(Dt=te=null,kt=0),ga=n,cr=e,pa=r,Df=f,Of=h,Xp=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,L0(Br,function(){return u_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=tt.p,tt.p=2,y=Kt,Kt|=4;try{w0(e,n,r)}finally{Kt=y,tt.p=h,H.T=o}}ke=1,s_(),a_(),o_()}}function s_(){if(ke===1){ke=0;var e=cr,n=ga,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=H.T,H.T=null;var o=tt.p;tt.p=2;var h=Kt;Kt|=4;try{qp(n,e);var f=Kf,y=Qm(e.containerInfo),E=f.focusedElem,R=f.selectionRange;if(y!==E&&E&&E.ownerDocument&&Km(E.ownerDocument.documentElement,E)){if(R!==null&&yh(E)){var L=R.start,j=R.end;if(j===void 0&&(j=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(j,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),mt=E.textContent.length,ut=Math.min(R.start,mt),Zt=R.end===void 0?ut:Math.min(R.end,mt);!B.extend&&ut>Zt&&(y=Zt,Zt=ut,ut=y);var P=Fm(E,ut),D=Fm(E,Zt);if(P&&D&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==D.node||B.focusOffset!==D.offset)){var k=K.createRange();k.setStart(P.node,P.offset),B.removeAllRanges(),ut>Zt?(B.addRange(k),B.extend(D.node,D.offset)):(k.setEnd(D.node,D.offset),B.addRange(k))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var F=K[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Ju=!!Ff,Kf=Ff=null}finally{Kt=h,tt.p=o,H.T=r}}e.current=n,ke=2}}function a_(){if(ke===2){ke=0;var e=cr,n=ga,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=H.T,H.T=null;var o=tt.p;tt.p=2;var h=Kt;Kt|=4;try{Lp(e,n.alternate,n)}finally{Kt=h,tt.p=o,H.T=r}}ke=3}}function o_(){if(ke===4||ke===3){ke=0,kl();var e=cr,n=ga,r=pa,o=Xp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ke=5:(ke=0,ga=cr=null,l_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(ur=null),Us(r),n=n.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(se,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,h=tt.p,tt.p=2,H.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var E=o[y];f(E.value,{componentStack:E.stack})}}finally{H.T=n,tt.p=h}}(pa&3)!==0&&qu(),ei(e),h=e.pendingLanes,(r&4194090)!==0&&(h&42)!==0?e===Nf?Fo++:(Fo=0,Nf=e):Fo=0,Ko(0)}}function l_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ro(n)))}function qu(e){return s_(),a_(),o_(),u_()}function u_(){if(ke!==5)return!1;var e=cr,n=Df;Df=0;var r=Us(pa),o=H.T,h=tt.p;try{tt.p=32>r?32:r,H.T=null,r=Of,Of=null;var f=cr,y=pa;if(ke=0,ga=cr=null,pa=0,(Kt&6)!==0)throw Error(a(331));var E=Kt;if(Kt|=4,Kp(f.current),jp(f,f.current,y,r),Kt=E,Ko(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(se,f)}catch{}return!0}finally{tt.p=h,H.T=o,l_(e,n)}}function c_(e,n,r){n=En(r,n),n=uf(e.stateNode,n,2),e=tr(e,n,2),e!==null&&(hi(e,2),ei(e))}function Wt(e,n,r){if(e.tag===3)c_(e,e,r);else for(;n!==null;){if(n.tag===3){c_(n,e,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ur===null||!ur.has(o))){e=En(r,e),r=mp(2),o=tr(n,r,2),o!==null&&(gp(r,o,n,e),hi(o,2),ei(o));break}}n=n.return}}function Uf(e,n,r){var o=e.pingCache;if(o===null){o=e.pingCache=new D0;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(r)||(Rf=!0,h.add(r),e=P0.bind(null,e,n,r),n.then(e,e))}function P0(e,n,r){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,te===e&&(kt&r)===r&&(oe===4||oe===3&&(kt&62914560)===kt&&300>mn()-Cf?(Kt&2)===0&&_a(e,0):wf|=r,ma===kt&&(ma=0)),ei(e)}function h_(e,n){n===0&&(n=to()),e=Js(e,n),e!==null&&(hi(e,n),ei(e))}function U0(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),h_(e,r)}function k0(e,n){var r=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),h_(e,r)}function L0(e,n){return xr(e,n)}var Hu=null,va=null,kf=!1,ju=!1,Lf=!1,vs=0;function ei(e){e!==va&&e.next===null&&(va===null?Hu=va=e:va=va.next=e),ju=!0,kf||(kf=!0,z0())}function Ko(e,n){if(!Lf&&ju){Lf=!0;do for(var r=!1,o=Hu;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var y=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-qe(42|e)+1)-1,f&=h&~(y&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,g_(o,f))}else f=kt,f=Ps(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Gr(o,f)||(r=!0,g_(o,f));o=o.next}while(r);Lf=!1}}function x0(){f_()}function f_(){ju=kf=!1;var e=0;vs!==0&&(Q0()&&(e=vs),vs=0);for(var n=mn(),r=null,o=Hu;o!==null;){var h=o.next,f=d_(o,n);f===0?(o.next=null,r===null?Hu=h:r.next=h,h===null&&(va=r)):(r=o,(e!==0||(f&3)!==0)&&(ju=!0)),o=h}Ko(e)}function d_(e,n){for(var r=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-qe(f),E=1<<y,R=h[y];R===-1?((E&r)===0||(E&o)!==0)&&(h[y]=Wa(E,n)):R<=n&&(e.expiredLanes|=E),f&=~E}if(n=te,r=kt,r=Ps(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===n&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&zr(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Gr(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(o!==null&&zr(o),Us(r)){case 2:case 8:r=Ms;break;case 32:r=Br;break;case 268435456:r=Vs;break;default:r=Br}return o=m_.bind(null,e),r=xr(r,o),e.callbackPriority=n,e.callbackNode=r,n}return o!==null&&o!==null&&zr(o),e.callbackPriority=2,e.callbackNode=null,2}function m_(e,n){if(ke!==0&&ke!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(qu()&&e.callbackNode!==r)return null;var o=kt;return o=Ps(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:($p(e,o,n),d_(e,mn()),e.callbackNode!=null&&e.callbackNode===r?m_.bind(null,e):null)}function g_(e,n){if(qu())return null;$p(e,n,!0)}function z0(){Y0(function(){(Kt&6)!==0?xr($a,x0):f_()})}function xf(){return vs===0&&(vs=Ja()),vs}function p_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qs(""+e)}function __(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function B0(e,n,r,o,h){if(n==="submit"&&r&&r.stateNode===h){var f=p_((h[de]||null).action),y=o.submitter;y&&(n=(n=y[de]||null)?p_(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var E=new Hs("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(vs!==0){var R=y?__(h,y):new FormData(h);rf(r,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(E.preventDefault(),R=y?__(h,y):new FormData(h),rf(r,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var zf=0;zf<Ah.length;zf++){var Bf=Ah[zf],q0=Bf.toLowerCase(),H0=Bf[0].toUpperCase()+Bf.slice(1);Mn(q0,"on"+H0)}Mn($m,"onAnimationEnd"),Mn(Zm,"onAnimationIteration"),Mn(Wm,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(s0,"onTransitionRun"),Mn(a0,"onTransitionStart"),Mn(o0,"onTransitionCancel"),Mn(Jm,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),On("onBeforeInput",["compositionend","keypress","textInput","paste"]),On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qo));function y_(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var y=o.length-1;0<=y;y--){var E=o[y],R=E.instance,L=E.currentTarget;if(E=E.listener,R!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(j){Ou(j)}h.currentTarget=null,f=R}else for(y=0;y<o.length;y++){if(E=o[y],R=E.instance,L=E.currentTarget,E=E.listener,R!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(j){Ou(j)}h.currentTarget=null,f=R}}}}function Ot(e,n){var r=n[io];r===void 0&&(r=n[io]=new Set);var o=e+"__bubble";r.has(o)||(v_(n,e,2,!1),r.add(o))}function qf(e,n,r){var o=0;n&&(o|=4),v_(r,e,o,n)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Hf(e){if(!e[Gu]){e[Gu]=!0,ro.forEach(function(r){r!=="selectionchange"&&(j0.has(r)||qf(r,!1,e),qf(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Gu]||(n[Gu]=!0,qf("selectionchange",!1,n))}}function v_(e,n,r,o){switch(j_(n)){case 2:var h=pA;break;case 8:h=_A;break;default:h=nd}r=h.bind(null,n,r,e),h=void 0,!yn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,r,{capture:!0,passive:h}):e.addEventListener(n,r,!0):h!==void 0?e.addEventListener(n,r,{passive:h}):e.addEventListener(n,r,!1)}function jf(e,n,r,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var E=o.stateNode.containerInfo;if(E===h)break;if(y===4)for(y=o.return;y!==null;){var R=y.tag;if((R===3||R===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;E!==null;){if(y=fi(E),y===null)return;if(R=y.tag,R===5||R===6||R===26||R===27){o=f=y;continue t}E=E.parentNode}}o=o.return}Kl(function(){var L=f,j=_n(r),K=[];t:{var z=tg.get(e);if(z!==void 0){var B=Hs,mt=e;switch(e){case"keypress":if(Kn(r)===0)break t;case"keydown":case"keyup":B=Xs;break;case"focusin":mt="focus",B=Fs;break;case"focusout":mt="blur",B=Fs;break;case"beforeblur":case"afterblur":B=Fs;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=tu;break;case $m:case Zm:case Wm:B=Ks;break;case Jm:B=nu;break;case"scroll":case"scrollend":B=Ql;break;case"wheel":B=Ys;break;case"copy":case"cut":case"paste":B=Qs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=_o;break;case"toggle":case"beforetoggle":B=ru}var ut=(n&4)!==0,Zt=!ut&&(e==="scroll"||e==="scrollend"),P=ut?z!==null?z+"Capture":null:z;ut=[];for(var D=L,k;D!==null;){var F=D;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||P===null||(F=Wr(D,P),F!=null&&ut.push(Xo(D,F,k))),Zt)break;D=D.return}0<ut.length&&(z=new B(z,mt,null,r,j),K.push({event:z,listeners:ut}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&r!==pi&&(mt=r.relatedTarget||r.fromElement)&&(fi(mt)||mt[gn]))break t;if((B||z)&&(z=j.window===j?j:(z=j.ownerDocument)?z.defaultView||z.parentWindow:window,B?(mt=r.relatedTarget||r.toElement,B=L,mt=mt?fi(mt):null,mt!==null&&(Zt=c(mt),ut=mt.tag,mt!==Zt||ut!==5&&ut!==27&&ut!==6)&&(mt=null)):(B=null,mt=L),B!==mt)){if(ut=vn,F="onMouseLeave",P="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ut=_o,F="onPointerLeave",P="onPointerEnter",D="pointer"),Zt=B==null?z:Hn(B),k=mt==null?z:Hn(mt),z=new ut(F,D+"leave",B,r,j),z.target=Zt,z.relatedTarget=k,F=null,fi(j)===L&&(ut=new ut(P,D+"enter",mt,r,j),ut.target=k,ut.relatedTarget=Zt,F=ut),Zt=F,B&&mt)e:{for(ut=B,P=mt,D=0,k=ut;k;k=Ea(k))D++;for(k=0,F=P;F;F=Ea(F))k++;for(;0<D-k;)ut=Ea(ut),D--;for(;0<k-D;)P=Ea(P),k--;for(;D--;){if(ut===P||P!==null&&ut===P.alternate)break e;ut=Ea(ut),P=Ea(P)}ut=null}else ut=null;B!==null&&E_(K,z,B,ut,!1),mt!==null&&Zt!==null&&E_(K,Zt,mt,ut,!0)}}t:{if(z=L?Hn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var rt=zm;else if(Ee(z))if(Bm)rt=n0;else{rt=t0;var Ct=JT}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&uo(L.elementType)&&(rt=zm):rt=e0;if(rt&&(rt=rt(e,L))){Ti(K,rt,r,j);break t}Ct&&Ct(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&Yi(z,"number",z.value)}switch(Ct=L?Hn(L):window,e){case"focusin":(Ee(Ct)||Ct.contentEditable==="true")&&($s=Ct,vh=L,Eo=null);break;case"focusout":Eo=vh=$s=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,Xm(K,r,j);break;case"selectionchange":if(r0)break;case"keydown":case"keyup":Xm(K,r,j)}var st;if(Yn)t:{switch(e){case"compositionstart":var ft="onCompositionStart";break t;case"compositionend":ft="onCompositionEnd";break t;case"compositionupdate":ft="onCompositionUpdate";break t}ft=void 0}else Pt?q(e,r)&&(ft="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ft="onCompositionStart");ft&&(_&&r.locale!=="ko"&&(Pt||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Pt&&(st=ho()):(Fn=j,$i="value"in Fn?Fn.value:Fn.textContent,Pt=!0)),Ct=Fu(L,ft),0<Ct.length&&(ft=new go(ft,e,null,r,j),K.push({event:ft,listeners:Ct}),st?ft.data=st:(st=J(r),st!==null&&(ft.data=st)))),(st=m?ve(e,r):Ut(e,r))&&(ft=Fu(L,"onBeforeInput"),0<ft.length&&(Ct=new go("onBeforeInput","beforeinput",null,r,j),K.push({event:Ct,listeners:ft}),Ct.data=st)),B0(K,e,L,r,j)}y_(K,n)})}function Xo(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Fu(e,n){for(var r=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Wr(e,r),h!=null&&o.unshift(Xo(e,h,f)),h=Wr(e,n),h!=null&&o.push(Xo(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Ea(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function E_(e,n,r,o,h){for(var f=n._reactName,y=[];r!==null&&r!==o;){var E=r,R=E.alternate,L=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||L===null||(R=L,h?(L=Wr(r,f),L!=null&&y.unshift(Xo(r,L,R))):h||(L=Wr(r,f),L!=null&&y.push(Xo(r,L,R)))),r=r.return}y.length!==0&&e.push({event:n,listeners:y})}var G0=/\r\n?/g,F0=/\u0000|\uFFFD/g;function T_(e){return(typeof e=="string"?e:""+e).replace(G0,`
`).replace(F0,"")}function A_(e,n){return n=T_(n),T_(e)===n}function Ku(){}function $t(e,n,r,o,h,f){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||pn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&pn(e,""+o);break;case"className":jn(e,"class",o);break;case"tabIndex":jn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(e,r,o);break;case"style":lo(e,o,f);break;case"data":if(n!=="object"){jn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=qs(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(n!=="input"&&$t(e,n,"name",h.name,h,null),$t(e,n,"formEncType",h.formEncType,h,null),$t(e,n,"formMethod",h.formMethod,h,null),$t(e,n,"formTarget",h.formTarget,h,null)):($t(e,n,"encType",h.encType,h,null),$t(e,n,"method",h.method,h,null),$t(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=qs(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=Ku);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=qs(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),Xi(e,"popover",o);break;case"xlinkActuate":Ve(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ve(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ve(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ve(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ve(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ve(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ve(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ve(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ve(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Xi(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=fh.get(r)||r,Xi(e,r,o))}}function Gf(e,n,r,o,h,f){switch(r){case"style":lo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=r}}break;case"children":typeof o=="string"?pn(e,o):(typeof o=="number"||typeof o=="bigint")&&pn(e,""+o);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ks.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),n=r.slice(2,h?r.length-7:void 0),f=e[de]||null,f=f!=null?f[r]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,o,h);break t}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Xi(e,r,o)}}}function Le(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var o=!1,h=!1,f;for(f in r)if(r.hasOwnProperty(f)){var y=r[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:$t(e,n,f,y,r,null)}}h&&$t(e,n,"srcSet",r.srcSet,r,null),o&&$t(e,n,"src",r.src,r,null);return;case"input":Ot("invalid",e);var E=f=y=h=null,R=null,L=null;for(o in r)if(r.hasOwnProperty(o)){var j=r[o];if(j!=null)switch(o){case"name":h=j;break;case"type":y=j;break;case"checked":R=j;break;case"defaultChecked":L=j;break;case"value":f=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(137,n));break;default:$t(e,n,o,j,r,null)}}Yr(e,f,E,R,L,y,h,!1),Bs(e);return;case"select":Ot("invalid",e),o=y=f=null;for(h in r)if(r.hasOwnProperty(h)&&(E=r[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":y=E;break;case"multiple":o=E;default:$t(e,n,h,E,r,null)}n=f,r=y,e.multiple=!!o,n!=null?gi(e,!!o,n,!1):r!=null&&gi(e,!!o,r,!0);return;case"textarea":Ot("invalid",e),f=h=o=null;for(y in r)if(r.hasOwnProperty(y)&&(E=r[y],E!=null))switch(y){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:$t(e,n,y,E,r,null)}$r(e,o,h,f),Bs(e);return;case"option":for(R in r)if(r.hasOwnProperty(R)&&(o=r[R],o!=null))switch(R){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,n,R,o,r,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(o=0;o<Qo.length;o++)Ot(Qo[o],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(o=r[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:$t(e,n,L,o,r,null)}return;default:if(uo(n)){for(j in r)r.hasOwnProperty(j)&&(o=r[j],o!==void 0&&Gf(e,n,j,o,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(o=r[E],o!=null&&$t(e,n,E,o,r,null))}function K0(e,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,y=null,E=null,R=null,L=null,j=null;for(B in r){var K=r[B];if(r.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":R=K;default:o.hasOwnProperty(B)||$t(e,n,B,null,o,K)}}for(var z in o){var B=o[z];if(K=r[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":j=B;break;case"value":y=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(a(137,n));break;default:B!==K&&$t(e,n,z,B,o,K)}}rn(e,y,E,R,L,j,f,h);return;case"select":B=y=E=z=null;for(f in r)if(R=r[f],r.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":B=R;default:o.hasOwnProperty(f)||$t(e,n,f,null,o,R)}for(h in o)if(f=o[h],R=r[h],o.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":y=f;default:f!==R&&$t(e,n,h,f,o,R)}n=E,r=y,o=B,z!=null?gi(e,!!r,z,!1):!!o!=!!r&&(n!=null?gi(e,!!r,n,!0):gi(e,!!r,r?[]:"",!1));return;case"textarea":B=z=null;for(E in r)if(h=r[E],r.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$t(e,n,E,null,o,h)}for(y in o)if(h=o[y],f=r[y],o.hasOwnProperty(y)&&(h!=null||f!=null))switch(y){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==f&&$t(e,n,y,h,o,f)}Xt(e,z,B);return;case"option":for(var mt in r)if(z=r[mt],r.hasOwnProperty(mt)&&z!=null&&!o.hasOwnProperty(mt))switch(mt){case"selected":e.selected=!1;break;default:$t(e,n,mt,null,o,z)}for(R in o)if(z=o[R],B=r[R],o.hasOwnProperty(R)&&z!==B&&(z!=null||B!=null))switch(R){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:$t(e,n,R,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in r)z=r[ut],r.hasOwnProperty(ut)&&z!=null&&!o.hasOwnProperty(ut)&&$t(e,n,ut,null,o,z);for(L in o)if(z=o[L],B=r[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,n));break;default:$t(e,n,L,z,o,B)}return;default:if(uo(n)){for(var Zt in r)z=r[Zt],r.hasOwnProperty(Zt)&&z!==void 0&&!o.hasOwnProperty(Zt)&&Gf(e,n,Zt,void 0,o,z);for(j in o)z=o[j],B=r[j],!o.hasOwnProperty(j)||z===B||z===void 0&&B===void 0||Gf(e,n,j,z,o,B);return}}for(var P in r)z=r[P],r.hasOwnProperty(P)&&z!=null&&!o.hasOwnProperty(P)&&$t(e,n,P,null,o,z);for(K in o)z=o[K],B=r[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||$t(e,n,K,z,o,B)}var Ff=null,Kf=null;function Qu(e){return e.nodeType===9?e:e.ownerDocument}function S_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Qf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Xf=null;function Q0(){var e=window.event;return e&&e.type==="popstate"?e===Xf?!1:(Xf=e,!0):(Xf=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,X0=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,Y0=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(e){return w_.resolve(null).then(e).catch($0)}:R_;function $0(e){setTimeout(function(){throw e})}function fr(e){return e==="head"}function I_(e,n){var r=n,o=0,h=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<o&&8>o){r=o;var y=e.ownerDocument;if(r&1&&Yo(y.documentElement),r&2&&Yo(y.body),r&4)for(r=y.head,Yo(r),y=r.firstChild;y;){var E=y.nextSibling,R=y.nodeName;y[Fr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=E}}if(h===0){e.removeChild(f),il(n);return}h--}else r==="$"||r==="$?"||r==="$!"?h++:o=r.charCodeAt(0)-48;else o=0;r=f}while(r);il(n)}function Yf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Yf(r),Qi(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Z0(e,n,r,o){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Fr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Pn(e.nextSibling),e===null)break}return null}function W0(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Pn(e.nextSibling),e===null))return null;return e}function $f(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function J0(e,n){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Pn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Zf=null;function C_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}function D_(e,n,r){switch(n=Qu(r),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Yo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Qi(e)}var wn=new Map,O_=new Set;function Xu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pi=tt.d;tt.d={f:tA,r:eA,D:nA,C:iA,L:rA,m:sA,X:oA,S:aA,M:lA};function tA(){var e=Pi.f(),n=zu();return e||n}function eA(e){var n=qn(e);n!==null&&n.tag===5&&n.type==="form"?$g(n):Pi.r(e)}var Ta=typeof document>"u"?null:document;function N_(e,n,r){var o=Ta;if(o&&typeof n=="string"&&n){var h=me(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),O_.has(h)||(O_.add(h),e={rel:e,crossOrigin:r,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Le(n,"link",e),ue(n),o.head.appendChild(n)))}}function nA(e){Pi.D(e),N_("dns-prefetch",e,null)}function iA(e,n){Pi.C(e,n),N_("preconnect",e,n)}function rA(e,n,r){Pi.L(e,n,r);var o=Ta;if(o&&e&&n){var h='link[rel="preload"][as="'+me(n)+'"]';n==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+me(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+me(r.imageSizes)+'"]')):h+='[href="'+me(e)+'"]';var f=h;switch(n){case"style":f=Aa(e);break;case"script":f=Sa(e)}wn.has(f)||(e=A({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),wn.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector($o(f))||n==="script"&&o.querySelector(Zo(f))||(n=o.createElement("link"),Le(n,"link",e),ue(n),o.head.appendChild(n)))}}function sA(e,n){Pi.m(e,n);var r=Ta;if(r&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+me(o)+'"][href="'+me(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Sa(e)}if(!wn.has(f)&&(e=A({rel:"modulepreload",href:e},n),wn.set(f,e),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Zo(f)))return}o=r.createElement("link"),Le(o,"link",e),ue(o),r.head.appendChild(o)}}}function aA(e,n,r){Pi.S(e,n,r);var o=Ta;if(o&&e){var h=Xe(o).hoistableStyles,f=Aa(e);n=n||"default";var y=h.get(f);if(!y){var E={loading:0,preload:null};if(y=o.querySelector($o(f)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":n},r),(r=wn.get(f))&&Wf(e,r);var R=y=o.createElement("link");ue(R),Le(R,"link",e),R._p=new Promise(function(L,j){R.onload=L,R.onerror=j}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Yu(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:E},h.set(f,y)}}}function oA(e,n){Pi.X(e,n);var r=Ta;if(r&&e){var o=Xe(r).hoistableScripts,h=Sa(e),f=o.get(h);f||(f=r.querySelector(Zo(h)),f||(e=A({src:e,async:!0},n),(n=wn.get(h))&&Jf(e,n),f=r.createElement("script"),ue(f),Le(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function lA(e,n){Pi.M(e,n);var r=Ta;if(r&&e){var o=Xe(r).hoistableScripts,h=Sa(e),f=o.get(h);f||(f=r.querySelector(Zo(h)),f||(e=A({src:e,async:!0,type:"module"},n),(n=wn.get(h))&&Jf(e,n),f=r.createElement("script"),ue(f),Le(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function M_(e,n,r,o){var h=(h=yt.current)?Xu(h):null;if(!h)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Aa(r.href),r=Xe(h).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Aa(r.href);var f=Xe(h).hoistableStyles,y=f.get(e);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=h.querySelector($o(e)))&&!f._p&&(y.instance=f,y.state.loading=5),wn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},wn.set(e,r),f||uA(h,e,r,y.state))),n&&o===null)throw Error(a(528,""));return y}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Sa(r),r=Xe(h).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Aa(e){return'href="'+me(e)+'"'}function $o(e){return'link[rel="stylesheet"]['+e+"]"}function V_(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function uA(e,n,r,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Le(n,"link",r),ue(n),e.head.appendChild(n))}function Sa(e){return'[src="'+me(e)+'"]'}function Zo(e){return"script[async]"+e}function P_(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+me(r.href)+'"]');if(o)return n.instance=o,ue(o),o;var h=A({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ue(o),Le(o,"style",h),Yu(o,r.precedence,e),n.instance=o;case"stylesheet":h=Aa(r.href);var f=e.querySelector($o(h));if(f)return n.state.loading|=4,n.instance=f,ue(f),f;o=V_(r),(h=wn.get(h))&&Wf(o,h),f=(e.ownerDocument||e).createElement("link"),ue(f);var y=f;return y._p=new Promise(function(E,R){y.onload=E,y.onerror=R}),Le(f,"link",o),n.state.loading|=4,Yu(f,r.precedence,e),n.instance=f;case"script":return f=Sa(r.src),(h=e.querySelector(Zo(f)))?(n.instance=h,ue(h),h):(o=r,(h=wn.get(f))&&(o=A({},r),Jf(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ue(h),Le(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Yu(o,r.precedence,e));return n.instance}function Yu(e,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,y=0;y<o.length;y++){var E=o[y];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function Wf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Jf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var $u=null;function U_(e,n,r){if($u===null){var o=new Map,h=$u=new Map;h.set(r,o)}else h=$u,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var f=r[h];if(!(f[Fr]||f[ye]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=e+y;var E=o.get(y);E?E.push(f):o.set(y,[f])}}return o}function k_(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function cA(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function L_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Wo=null;function hA(){}function fA(e,n,r){if(Wo===null)throw Error(a(475));var o=Wo;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=Aa(r.href),f=e.querySelector($o(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Zu.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,ue(f);return}f=e.ownerDocument||e,r=V_(r),(h=wn.get(h))&&Wf(r,h),f=f.createElement("link"),ue(f);var y=f;y._p=new Promise(function(E,R){y.onload=E,y.onerror=R}),Le(f,"link",r),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Zu.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function dA(){if(Wo===null)throw Error(a(475));var e=Wo;return e.stylesheets&&e.count===0&&td(e,e.stylesheets),0<e.count?function(n){var r=setTimeout(function(){if(e.stylesheets&&td(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wu=null;function td(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wu=new Map,n.forEach(mA,e),Wu=null,Zu.call(e))}function mA(e,n){if(!(n.state.loading&4)){var r=Wu.get(e);if(r)var o=r.get(null);else{r=new Map,Wu.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var y=h[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}h=n.instance,y=h.getAttribute("data-precedence"),f=r.get(y)||o,f===o&&r.set(null,h),r.set(y,h),this.count++,o=Zu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Jo={$$typeof:lt,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function gA(e,n,r,o,h,f,y,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function x_(e,n,r,o,h,f,y,E,R,L,j,K){return e=new gA(e,n,r,y,E,R,L,K),n=1,f===!0&&(n|=24),f=an(3,null,null,n),e.current=f,f.stateNode=e,n=Ph(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:n},xh(f),e}function z_(e){return e?(e=ta,e):ta}function B_(e,n,r,o,h,f){h=z_(h),o.context===null?o.context=h:o.pendingContext=h,o=Ji(n),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=tr(e,o,n),r!==null&&(hn(r,e,n),Do(r,e,n))}function q_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function ed(e,n){q_(e,n),(e=e.alternate)&&q_(e,n)}function H_(e){if(e.tag===13){var n=Js(e,67108864);n!==null&&hn(n,e,67108864),ed(e,67108864)}}var Ju=!0;function pA(e,n,r,o){var h=H.T;H.T=null;var f=tt.p;try{tt.p=2,nd(e,n,r,o)}finally{tt.p=f,H.T=h}}function _A(e,n,r,o){var h=H.T;H.T=null;var f=tt.p;try{tt.p=8,nd(e,n,r,o)}finally{tt.p=f,H.T=h}}function nd(e,n,r,o){if(Ju){var h=id(o);if(h===null)jf(e,n,o,tc,r),G_(e,o);else if(vA(h,e,n,r,o))o.stopPropagation();else if(G_(e,o),n&4&&-1<yA.indexOf(e)){for(;h!==null;){var f=qn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=Dn(f.pendingLanes);if(y!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var R=1<<31-qe(y);E.entanglements[1]|=R,y&=~R}ei(f),(Kt&6)===0&&(Lu=mn()+500,Ko(0))}}break;case 13:E=Js(f,2),E!==null&&hn(E,f,2),zu(),ed(f,2)}if(f=id(o),f===null&&jf(e,n,o,tc,r),f===h)break;h=f}h!==null&&o.stopPropagation()}else jf(e,n,o,null,r)}}function id(e){return e=_n(e),rd(e)}var tc=null;function rd(e){if(tc=null,e=fi(e),e!==null){var n=c(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=d(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return tc=e,null}function j_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ah()){case $a:return 2;case Ms:return 8;case Br:case oh:return 32;case Vs:return 268435456;default:return 32}default:return 32}}var sd=!1,dr=null,mr=null,gr=null,tl=new Map,el=new Map,pr=[],yA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G_(e,n){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":tl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(n.pointerId)}}function nl(e,n,r,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=qn(n),n!==null&&H_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function vA(e,n,r,o,h){switch(n){case"focusin":return dr=nl(dr,e,n,r,o,h),!0;case"dragenter":return mr=nl(mr,e,n,r,o,h),!0;case"mouseover":return gr=nl(gr,e,n,r,o,h),!0;case"pointerover":var f=h.pointerId;return tl.set(f,nl(tl.get(f)||null,e,n,r,o,h)),!0;case"gotpointercapture":return f=h.pointerId,el.set(f,nl(el.get(f)||null,e,n,r,o,h)),!0}return!1}function F_(e){var n=fi(e.target);if(n!==null){var r=c(n);if(r!==null){if(n=r.tag,n===13){if(n=d(r),n!==null){e.blockedOn=n,zl(e.priority,function(){if(r.tag===13){var o=cn();o=Gi(o);var h=Js(r,o);h!==null&&hn(h,r,o),ed(r,o)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ec(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=id(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);pi=o,r.target.dispatchEvent(o),pi=null}else return n=qn(r),n!==null&&H_(n),e.blockedOn=r,!1;n.shift()}return!0}function K_(e,n,r){ec(e)&&r.delete(n)}function EA(){sd=!1,dr!==null&&ec(dr)&&(dr=null),mr!==null&&ec(mr)&&(mr=null),gr!==null&&ec(gr)&&(gr=null),tl.forEach(K_),el.forEach(K_)}function nc(e,n){e.blockedOn===n&&(e.blockedOn=null,sd||(sd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,EA)))}var ic=null;function Q_(e){ic!==e&&(ic=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ic===e&&(ic=null);for(var n=0;n<e.length;n+=3){var r=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(rd(o||r)===null)continue;break}var f=qn(r);f!==null&&(e.splice(n,3),n-=3,rf(f,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function il(e){function n(R){return nc(R,e)}dr!==null&&nc(dr,e),mr!==null&&nc(mr,e),gr!==null&&nc(gr,e),tl.forEach(n),el.forEach(n);for(var r=0;r<pr.length;r++){var o=pr[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<pr.length&&(r=pr[0],r.blockedOn===null);)F_(r),r.blockedOn===null&&pr.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],f=r[o+1],y=h[de]||null;if(typeof f=="function")y||Q_(r);else if(y){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,y=f[de]||null)E=y.formAction;else if(rd(h)!==null)continue}else E=y.action;typeof E=="function"?r[o+1]=E:(r.splice(o,3),o-=3),Q_(r)}}}function ad(e){this._internalRoot=e}rc.prototype.render=ad.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,o=cn();B_(r,o,e,n,null,null)},rc.prototype.unmount=ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;B_(e.current,2,null,e,null,null),zu(),n[gn]=null}};function rc(e){this._internalRoot=e}rc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Fi();e={blockedOn:null,target:e,priority:n};for(var r=0;r<pr.length&&n!==0&&n<pr[r].priority;r++);pr.splice(r,0,e),r===0&&F_(e)}};var X_=t.version;if(X_!=="19.1.0")throw Error(a(527,X_,"19.1.0"));tt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=p(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var TA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{se=sc.inject(TA),Ft=sc}catch{}}return sl.createRoot=function(e,n){if(!l(e))throw Error(a(299));var r=!1,o="",h=cp,f=hp,y=fp,E=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=x_(e,1,!1,null,null,r,o,h,f,y,E,null),e[gn]=n.current,Hf(e),new ad(n)},sl.hydrateRoot=function(e,n,r){if(!l(e))throw Error(a(299));var o=!1,h="",f=cp,y=hp,E=fp,R=null,L=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks),r.formState!==void 0&&(L=r.formState)),n=x_(e,1,!0,n,r??null,o,h,f,y,E,R,L),n.context=z_(null),r=n.current,o=cn(),o=Gi(o),h=Ji(o),h.callback=null,tr(r,h,o),r=o,n.current.lanes=r,hi(n,r),ei(n),e[gn]=n.current,Hf(e),new rc(n)},sl.version="19.1.0",sl}var ry;function PA(){if(ry)return ud.exports;ry=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ud.exports=VA(),ud.exports}var UA=PA();const kA=()=>{};var sy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=function(s){const t=[];let i=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},LA=function(s){const t=[];let i=0,a=0;for(;i<s.length;){const l=s[i++];if(l<128)t[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[i++];t[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[i++],d=s[i++],g=s[i++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[a++]=String.fromCharCode(55296+(p>>10)),t[a++]=String.fromCharCode(56320+(p&1023))}else{const c=s[i++],d=s[i++];t[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},Vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,g=d?s[l+1]:0,p=l+2<s.length,v=p?s[l+2]:0,A=c>>2,O=(c&3)<<4|g>>4;let x=(g&15)<<2|v>>6,G=v&63;p||(G=64,d||(x=64)),a.push(i[A],i[O],i[x],i[G])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Mv(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):LA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const c=i[s.charAt(l++)],g=l<s.length?i[s.charAt(l)]:0;++l;const v=l<s.length?i[s.charAt(l)]:64;++l;const O=l<s.length?i[s.charAt(l)]:64;if(++l,c==null||g==null||v==null||O==null)throw new xA;const x=c<<2|g>>4;if(a.push(x),v!==64){const G=g<<4&240|v>>2;if(a.push(G),O!==64){const W=v<<6&192|O;a.push(W)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class xA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zA=function(s){const t=Mv(s);return Vv.encodeByteArray(t,!0)},Sc=function(s){return zA(s).replace(/\./g,"")},Pv=function(s){try{return Vv.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=()=>BA().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof sy>"u")return;const s=sy.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},jA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Pv(s[1]);return t&&JSON.parse(t)},jc=()=>{try{return kA()||qA()||HA()||jA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Uv=s=>{var t,i;return(i=(t=jc())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[s]},GA=s=>{const t=Uv(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),a]:[t.substring(0,i),a]},kv=()=>{var s;return(s=jc())===null||s===void 0?void 0:s.config},Lv=s=>{var t;return(t=jc())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=t||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Sc(JSON.stringify(i)),Sc(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function XA(){var s;const t=(s=jc())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $A(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WA(){const s=Qe();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function JA(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tS(){try{return typeof indexedDB=="object"}catch{return!1}}function eS(){return new Promise((s,t)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var c;t(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="FirebaseError";class Hi extends Error{constructor(t,i,a){super(i),this.code=t,this.customData=a,this.name=nS,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(t,i,a){this.service=t,this.serviceName=i,this.errors=a}create(t,...i){const a=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?iS(c,a):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Hi(l,g,a)}}function iS(s,t){return s.replace(rS,(i,a)=>{const l=t[a];return l!=null?String(l):`<${a}?>`})}const rS=/\{\$([^}]+)}/g;function sS(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function As(s,t){if(s===t)return!0;const i=Object.keys(s),a=Object.keys(t);for(const l of i){if(!a.includes(l))return!1;const c=s[l],d=t[l];if(ay(c)&&ay(d)){if(!As(c,d))return!1}else if(c!==d)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function ay(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(s){const t=[];for(const[i,a]of Object.entries(s))Array.isArray(a)?a.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function al(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,c]=a.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function ol(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}function aS(s,t){const i=new oS(s,t);return i.subscribe.bind(i)}class oS{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,a){let l;if(t===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");lS(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:a},l.next===void 0&&(l.next=dd),l.error===void 0&&(l.error=dd),l.complete===void 0&&(l.complete=dd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lS(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(s){return s&&s._delegate?s._delegate:s}class Ss{constructor(t,i,a){this.name=t,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const a=new FA;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hS(t))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(t=Es){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Es){return this.instances.has(t)}getOptions(t=Es){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&d.resolve(l)}return l}onInit(t,i){var a;const l=this.normalizeInstanceIdentifier(i),c=(a=this.onInitCallbacks.get(l))!==null&&a!==void 0?a:new Set;c.add(t),this.onInitCallbacks.set(l,c);const d=this.instances.get(l);return d&&t(d,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:cS(t),options:i}),this.instances.set(t,a),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Es){return this.component?this.component.multipleInstances?t:Es:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cS(s){return s===Es?void 0:s}function hS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new uS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Nt||(Nt={}));const dS={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},mS=Nt.INFO,gS={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},pS=(s,t,...i)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),l=gS[t];if(l)console[l](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Yd{constructor(t){this.name=t,this._logLevel=mS,this._logHandler=pS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?dS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const _S=(s,t)=>t.some(i=>s instanceof i);let oy,ly;function yS(){return oy||(oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vS(){return ly||(ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xv=new WeakMap,bd=new WeakMap,zv=new WeakMap,md=new WeakMap,$d=new WeakMap;function ES(s){const t=new Promise((i,a)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{i(br(s.result)),l()},d=()=>{a(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&xv.set(i,s)}).catch(()=>{}),$d.set(t,s),t}function TS(s){if(bd.has(s))return;const t=new Promise((i,a)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});bd.set(s,t)}let Rd={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return bd.get(s);if(t==="objectStoreNames")return s.objectStoreNames||zv.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return br(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function AS(s){Rd=s(Rd)}function SS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const a=s.call(gd(this),t,...i);return zv.set(a,t.sort?t.sort():[t]),br(a)}:vS().includes(s)?function(...t){return s.apply(gd(this),t),br(xv.get(this))}:function(...t){return br(s.apply(gd(this),t))}}function bS(s){return typeof s=="function"?SS(s):(s instanceof IDBTransaction&&TS(s),_S(s,yS())?new Proxy(s,Rd):s)}function br(s){if(s instanceof IDBRequest)return ES(s);if(md.has(s))return md.get(s);const t=bS(s);return t!==s&&(md.set(s,t),$d.set(t,s)),t}const gd=s=>$d.get(s);function RS(s,t,{blocked:i,upgrade:a,blocking:l,terminated:c}={}){const d=indexedDB.open(s,t),g=br(d);return a&&d.addEventListener("upgradeneeded",p=>{a(br(d.result),p.oldVersion,p.newVersion,br(d.transaction),p)}),i&&d.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const wS=["get","getKey","getAll","getAllKeys","count"],IS=["put","add","delete","clear"],pd=new Map;function uy(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(pd.get(t))return pd.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,l=IS.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||wS.includes(i)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let v=p.store;return a&&(v=v.index(g.shift())),(await Promise.all([v[i](...g),l&&p.done]))[0]};return pd.set(t,c),c}AS(s=>({...s,get:(t,i,a)=>uy(t,i)||s.get(t,i,a),has:(t,i)=>!!uy(t,i)||s.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(DS(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function DS(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wd="@firebase/app",cy="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Yd("@firebase/app"),OS="@firebase/app-compat",NS="@firebase/analytics-compat",MS="@firebase/analytics",VS="@firebase/app-check-compat",PS="@firebase/app-check",US="@firebase/auth",kS="@firebase/auth-compat",LS="@firebase/database",xS="@firebase/data-connect",zS="@firebase/database-compat",BS="@firebase/functions",qS="@firebase/functions-compat",HS="@firebase/installations",jS="@firebase/installations-compat",GS="@firebase/messaging",FS="@firebase/messaging-compat",KS="@firebase/performance",QS="@firebase/performance-compat",XS="@firebase/remote-config",YS="@firebase/remote-config-compat",$S="@firebase/storage",ZS="@firebase/storage-compat",WS="@firebase/firestore",JS="@firebase/vertexai",tb="@firebase/firestore-compat",eb="firebase",nb="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="[DEFAULT]",ib={[wd]:"fire-core",[OS]:"fire-core-compat",[MS]:"fire-analytics",[NS]:"fire-analytics-compat",[PS]:"fire-app-check",[VS]:"fire-app-check-compat",[US]:"fire-auth",[kS]:"fire-auth-compat",[LS]:"fire-rtdb",[xS]:"fire-data-connect",[zS]:"fire-rtdb-compat",[BS]:"fire-fn",[qS]:"fire-fn-compat",[HS]:"fire-iid",[jS]:"fire-iid-compat",[GS]:"fire-fcm",[FS]:"fire-fcm-compat",[KS]:"fire-perf",[QS]:"fire-perf-compat",[XS]:"fire-rc",[YS]:"fire-rc-compat",[$S]:"fire-gcs",[ZS]:"fire-gcs-compat",[WS]:"fire-fst",[tb]:"fire-fst-compat",[JS]:"fire-vertex","fire-js":"fire-js",[eb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,rb=new Map,Cd=new Map;function hy(s,t){try{s.container.addComponent(t)}catch(i){xi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function Va(s){const t=s.name;if(Cd.has(t))return xi.debug(`There were multiple attempts to register component ${t}.`),!1;Cd.set(t,s);for(const i of bc.values())hy(i,s);for(const i of rb.values())hy(i,s);return!0}function Zd(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function Un(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Il("app","Firebase",sb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,i,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=nb;function Bv(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Id,automaticDataCollectionEnabled:!1},t),l=a.name;if(typeof l!="string"||!l)throw Rr.create("bad-app-name",{appName:String(l)});if(i||(i=kv()),!i)throw Rr.create("no-options");const c=bc.get(l);if(c){if(As(i,c.options)&&As(a,c.config))return c;throw Rr.create("duplicate-app",{appName:l})}const d=new fS(l);for(const p of Cd.values())d.addComponent(p);const g=new ab(i,a,d);return bc.set(l,g),g}function qv(s=Id){const t=bc.get(s);if(!t&&s===Id&&kv())return Bv();if(!t)throw Rr.create("no-app",{appName:s});return t}function wr(s,t,i){var a;let l=(a=ib[s])!==null&&a!==void 0?a:s;i&&(l+=`-${i}`);const c=l.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const g=[`Unable to register library "${l}" with version "${t}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xi.warn(g.join(" "));return}Va(new Ss(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="firebase-heartbeat-database",lb=1,pl="firebase-heartbeat-store";let _d=null;function Hv(){return _d||(_d=RS(ob,lb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(pl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Rr.create("idb-open",{originalErrorMessage:s.message})})),_d}async function ub(s){try{const i=(await Hv()).transaction(pl),a=await i.objectStore(pl).get(jv(s));return await i.done,a}catch(t){if(t instanceof Hi)xi.warn(t.message);else{const i=Rr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});xi.warn(i.message)}}}async function fy(s,t){try{const a=(await Hv()).transaction(pl,"readwrite");await a.objectStore(pl).put(t,jv(s)),await a.done}catch(i){if(i instanceof Hi)xi.warn(i.message);else{const a=Rr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});xi.warn(a.message)}}}function jv(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=1024,hb=30;class fb{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new mb(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=dy();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>hb){const d=gb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){xi.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=dy(),{heartbeatsToSend:a,unsentEntries:l}=db(this._heartbeatsCache.heartbeats),c=Sc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return xi.warn(i),""}}}function dy(){return new Date().toISOString().substring(0,10)}function db(s,t=cb){const i=[];let a=s.slice();for(const l of s){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),my(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),my(i)>t){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class mb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tS()?eS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await ub(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return fy(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return fy(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function my(s){return Sc(JSON.stringify({version:2,heartbeats:s})).length}function gb(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(s){Va(new Ss("platform-logger",t=>new CS(t),"PRIVATE")),Va(new Ss("heartbeat",t=>new fb(t),"PRIVATE")),wr(wd,cy,s),wr(wd,cy,"esm2017"),wr("fire-js","")}pb("");var _b="firebase",yb="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(_b,yb,"app");var gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,Gv;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,S){function w(){}w.prototype=S.prototype,M.D=S.prototype,M.prototype=new w,M.prototype.constructor=M,M.C=function(N,V,I){for(var b=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)b[zt-2]=arguments[zt];return S.prototype[V].apply(N,b)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,S,w){w||(w=0);var N=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)N[V]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(V=0;16>V;++V)N[V]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=M.g[0],w=M.g[1],V=M.g[2];var I=M.g[3],b=S+(I^w&(V^I))+N[0]+3614090360&4294967295;S=w+(b<<7&4294967295|b>>>25),b=I+(V^S&(w^V))+N[1]+3905402710&4294967295,I=S+(b<<12&4294967295|b>>>20),b=V+(w^I&(S^w))+N[2]+606105819&4294967295,V=I+(b<<17&4294967295|b>>>15),b=w+(S^V&(I^S))+N[3]+3250441966&4294967295,w=V+(b<<22&4294967295|b>>>10),b=S+(I^w&(V^I))+N[4]+4118548399&4294967295,S=w+(b<<7&4294967295|b>>>25),b=I+(V^S&(w^V))+N[5]+1200080426&4294967295,I=S+(b<<12&4294967295|b>>>20),b=V+(w^I&(S^w))+N[6]+2821735955&4294967295,V=I+(b<<17&4294967295|b>>>15),b=w+(S^V&(I^S))+N[7]+4249261313&4294967295,w=V+(b<<22&4294967295|b>>>10),b=S+(I^w&(V^I))+N[8]+1770035416&4294967295,S=w+(b<<7&4294967295|b>>>25),b=I+(V^S&(w^V))+N[9]+2336552879&4294967295,I=S+(b<<12&4294967295|b>>>20),b=V+(w^I&(S^w))+N[10]+4294925233&4294967295,V=I+(b<<17&4294967295|b>>>15),b=w+(S^V&(I^S))+N[11]+2304563134&4294967295,w=V+(b<<22&4294967295|b>>>10),b=S+(I^w&(V^I))+N[12]+1804603682&4294967295,S=w+(b<<7&4294967295|b>>>25),b=I+(V^S&(w^V))+N[13]+4254626195&4294967295,I=S+(b<<12&4294967295|b>>>20),b=V+(w^I&(S^w))+N[14]+2792965006&4294967295,V=I+(b<<17&4294967295|b>>>15),b=w+(S^V&(I^S))+N[15]+1236535329&4294967295,w=V+(b<<22&4294967295|b>>>10),b=S+(V^I&(w^V))+N[1]+4129170786&4294967295,S=w+(b<<5&4294967295|b>>>27),b=I+(w^V&(S^w))+N[6]+3225465664&4294967295,I=S+(b<<9&4294967295|b>>>23),b=V+(S^w&(I^S))+N[11]+643717713&4294967295,V=I+(b<<14&4294967295|b>>>18),b=w+(I^S&(V^I))+N[0]+3921069994&4294967295,w=V+(b<<20&4294967295|b>>>12),b=S+(V^I&(w^V))+N[5]+3593408605&4294967295,S=w+(b<<5&4294967295|b>>>27),b=I+(w^V&(S^w))+N[10]+38016083&4294967295,I=S+(b<<9&4294967295|b>>>23),b=V+(S^w&(I^S))+N[15]+3634488961&4294967295,V=I+(b<<14&4294967295|b>>>18),b=w+(I^S&(V^I))+N[4]+3889429448&4294967295,w=V+(b<<20&4294967295|b>>>12),b=S+(V^I&(w^V))+N[9]+568446438&4294967295,S=w+(b<<5&4294967295|b>>>27),b=I+(w^V&(S^w))+N[14]+3275163606&4294967295,I=S+(b<<9&4294967295|b>>>23),b=V+(S^w&(I^S))+N[3]+4107603335&4294967295,V=I+(b<<14&4294967295|b>>>18),b=w+(I^S&(V^I))+N[8]+1163531501&4294967295,w=V+(b<<20&4294967295|b>>>12),b=S+(V^I&(w^V))+N[13]+2850285829&4294967295,S=w+(b<<5&4294967295|b>>>27),b=I+(w^V&(S^w))+N[2]+4243563512&4294967295,I=S+(b<<9&4294967295|b>>>23),b=V+(S^w&(I^S))+N[7]+1735328473&4294967295,V=I+(b<<14&4294967295|b>>>18),b=w+(I^S&(V^I))+N[12]+2368359562&4294967295,w=V+(b<<20&4294967295|b>>>12),b=S+(w^V^I)+N[5]+4294588738&4294967295,S=w+(b<<4&4294967295|b>>>28),b=I+(S^w^V)+N[8]+2272392833&4294967295,I=S+(b<<11&4294967295|b>>>21),b=V+(I^S^w)+N[11]+1839030562&4294967295,V=I+(b<<16&4294967295|b>>>16),b=w+(V^I^S)+N[14]+4259657740&4294967295,w=V+(b<<23&4294967295|b>>>9),b=S+(w^V^I)+N[1]+2763975236&4294967295,S=w+(b<<4&4294967295|b>>>28),b=I+(S^w^V)+N[4]+1272893353&4294967295,I=S+(b<<11&4294967295|b>>>21),b=V+(I^S^w)+N[7]+4139469664&4294967295,V=I+(b<<16&4294967295|b>>>16),b=w+(V^I^S)+N[10]+3200236656&4294967295,w=V+(b<<23&4294967295|b>>>9),b=S+(w^V^I)+N[13]+681279174&4294967295,S=w+(b<<4&4294967295|b>>>28),b=I+(S^w^V)+N[0]+3936430074&4294967295,I=S+(b<<11&4294967295|b>>>21),b=V+(I^S^w)+N[3]+3572445317&4294967295,V=I+(b<<16&4294967295|b>>>16),b=w+(V^I^S)+N[6]+76029189&4294967295,w=V+(b<<23&4294967295|b>>>9),b=S+(w^V^I)+N[9]+3654602809&4294967295,S=w+(b<<4&4294967295|b>>>28),b=I+(S^w^V)+N[12]+3873151461&4294967295,I=S+(b<<11&4294967295|b>>>21),b=V+(I^S^w)+N[15]+530742520&4294967295,V=I+(b<<16&4294967295|b>>>16),b=w+(V^I^S)+N[2]+3299628645&4294967295,w=V+(b<<23&4294967295|b>>>9),b=S+(V^(w|~I))+N[0]+4096336452&4294967295,S=w+(b<<6&4294967295|b>>>26),b=I+(w^(S|~V))+N[7]+1126891415&4294967295,I=S+(b<<10&4294967295|b>>>22),b=V+(S^(I|~w))+N[14]+2878612391&4294967295,V=I+(b<<15&4294967295|b>>>17),b=w+(I^(V|~S))+N[5]+4237533241&4294967295,w=V+(b<<21&4294967295|b>>>11),b=S+(V^(w|~I))+N[12]+1700485571&4294967295,S=w+(b<<6&4294967295|b>>>26),b=I+(w^(S|~V))+N[3]+2399980690&4294967295,I=S+(b<<10&4294967295|b>>>22),b=V+(S^(I|~w))+N[10]+4293915773&4294967295,V=I+(b<<15&4294967295|b>>>17),b=w+(I^(V|~S))+N[1]+2240044497&4294967295,w=V+(b<<21&4294967295|b>>>11),b=S+(V^(w|~I))+N[8]+1873313359&4294967295,S=w+(b<<6&4294967295|b>>>26),b=I+(w^(S|~V))+N[15]+4264355552&4294967295,I=S+(b<<10&4294967295|b>>>22),b=V+(S^(I|~w))+N[6]+2734768916&4294967295,V=I+(b<<15&4294967295|b>>>17),b=w+(I^(V|~S))+N[13]+1309151649&4294967295,w=V+(b<<21&4294967295|b>>>11),b=S+(V^(w|~I))+N[4]+4149444226&4294967295,S=w+(b<<6&4294967295|b>>>26),b=I+(w^(S|~V))+N[11]+3174756917&4294967295,I=S+(b<<10&4294967295|b>>>22),b=V+(S^(I|~w))+N[2]+718787259&4294967295,V=I+(b<<15&4294967295|b>>>17),b=w+(I^(V|~S))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+I&4294967295}a.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var w=S-this.blockSize,N=this.B,V=this.h,I=0;I<S;){if(V==0)for(;I<=w;)l(this,M,I),I+=this.blockSize;if(typeof M=="string"){for(;I<S;)if(N[V++]=M.charCodeAt(I++),V==this.blockSize){l(this,N),V=0;break}}else for(;I<S;)if(N[V++]=M[I++],V==this.blockSize){l(this,N),V=0;break}}this.h=V,this.o+=S},a.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var w=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=w&255,w/=256;for(this.u(M),M=Array(16),S=w=0;4>S;++S)for(var N=0;32>N;N+=8)M[w++]=this.g[S]>>>N&255;return M};function c(M,S){var w=g;return Object.prototype.hasOwnProperty.call(w,M)?w[M]:w[M]=S(M)}function d(M,S){this.h=S;for(var w=[],N=!0,V=M.length-1;0<=V;V--){var I=M[V]|0;N&&I==S||(w[V]=I,N=!1)}this.g=w}var g={};function p(M){return-128<=M&&128>M?c(M,function(S){return new d([S|0],0>S?-1:0)}):new d([M|0],0>M?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return O;if(0>M)return Z(v(-M));for(var S=[],w=1,N=0;M>=w;N++)S[N]=M/w|0,w*=4294967296;return new d(S,0)}function A(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return Z(A(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=v(Math.pow(S,8)),N=O,V=0;V<M.length;V+=8){var I=Math.min(8,M.length-V),b=parseInt(M.substring(V,V+I),S);8>I?(I=v(Math.pow(S,I)),N=N.j(I).add(v(b))):(N=N.j(w),N=N.add(v(b)))}return N}var O=p(0),x=p(1),G=p(16777216);s=d.prototype,s.m=function(){if(nt(this))return-Z(this).m();for(var M=0,S=1,w=0;w<this.g.length;w++){var N=this.i(w);M+=(0<=N?N:4294967296+N)*S,S*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(W(this))return"0";if(nt(this))return"-"+Z(this).toString(M);for(var S=v(Math.pow(M,6)),w=this,N="";;){var V=Vt(w,S).g;w=At(w,V.j(S));var I=((0<w.g.length?w.g[0]:w.h)>>>0).toString(M);if(w=V,W(w))return I+N;for(;6>I.length;)I="0"+I;N=I+N}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function W(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function nt(M){return M.h==-1}s.l=function(M){return M=At(this,M),nt(M)?-1:W(M)?0:1};function Z(M){for(var S=M.g.length,w=[],N=0;N<S;N++)w[N]=~M.g[N];return new d(w,~M.h).add(x)}s.abs=function(){return nt(this)?Z(this):this},s.add=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],N=0,V=0;V<=S;V++){var I=N+(this.i(V)&65535)+(M.i(V)&65535),b=(I>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);N=b>>>16,I&=65535,b&=65535,w[V]=b<<16|I}return new d(w,w[w.length-1]&-2147483648?-1:0)};function At(M,S){return M.add(Z(S))}s.j=function(M){if(W(this)||W(M))return O;if(nt(this))return nt(M)?Z(this).j(Z(M)):Z(Z(this).j(M));if(nt(M))return Z(this.j(Z(M)));if(0>this.l(G)&&0>M.l(G))return v(this.m()*M.m());for(var S=this.g.length+M.g.length,w=[],N=0;N<2*S;N++)w[N]=0;for(N=0;N<this.g.length;N++)for(var V=0;V<M.g.length;V++){var I=this.i(N)>>>16,b=this.i(N)&65535,zt=M.i(V)>>>16,Gt=M.i(V)&65535;w[2*N+2*V]+=b*Gt,_t(w,2*N+2*V),w[2*N+2*V+1]+=I*Gt,_t(w,2*N+2*V+1),w[2*N+2*V+1]+=b*zt,_t(w,2*N+2*V+1),w[2*N+2*V+2]+=I*zt,_t(w,2*N+2*V+2)}for(N=0;N<S;N++)w[N]=w[2*N+1]<<16|w[2*N];for(N=S;N<2*S;N++)w[N]=0;return new d(w,0)};function _t(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function lt(M,S){this.g=M,this.h=S}function Vt(M,S){if(W(S))throw Error("division by zero");if(W(M))return new lt(O,O);if(nt(M))return S=Vt(Z(M),S),new lt(Z(S.g),Z(S.h));if(nt(S))return S=Vt(M,Z(S)),new lt(Z(S.g),S.h);if(30<M.g.length){if(nt(M)||nt(S))throw Error("slowDivide_ only works with positive integers.");for(var w=x,N=S;0>=N.l(M);)w=gt(w),N=gt(N);var V=wt(w,1),I=wt(N,1);for(N=wt(N,2),w=wt(w,2);!W(N);){var b=I.add(N);0>=b.l(M)&&(V=V.add(w),I=b),N=wt(N,1),w=wt(w,1)}return S=At(M,V.j(S)),new lt(V,S)}for(V=O;0<=M.l(S);){for(w=Math.max(1,Math.floor(M.m()/S.m())),N=Math.ceil(Math.log(w)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),I=v(w),b=I.j(S);nt(b)||0<b.l(M);)w-=N,I=v(w),b=I.j(S);W(I)&&(I=x),V=V.add(I),M=At(M,b)}return new lt(V,M)}s.A=function(M){return Vt(this,M).h},s.and=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)&M.i(N);return new d(w,this.h&M.h)},s.or=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)|M.i(N);return new d(w,this.h|M.h)},s.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)^M.i(N);return new d(w,this.h^M.h)};function gt(M){for(var S=M.g.length+1,w=[],N=0;N<S;N++)w[N]=M.i(N)<<1|M.i(N-1)>>>31;return new d(w,M.h)}function wt(M,S){var w=S>>5;S%=32;for(var N=M.g.length-w,V=[],I=0;I<N;I++)V[I]=0<S?M.i(I+w)>>>S|M.i(I+w+1)<<32-S:M.i(I+w);return new d(V,M.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Gv=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=A,Ir=d}).apply(typeof gy<"u"?gy:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fv,ll,Kv,mc,Dd,Qv,Xv,Yv;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=i(this);function l(u,m){if(m)t:{var _=a;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break t;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,T=!1,U={next:function(){if(!T&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,_){return u.call.apply(u.bind,arguments)}function O(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function x(u,m,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:O,x.apply(null,arguments)}function G(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function W(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,U,q){for(var J=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)J[Pt-2]=arguments[Pt];return m.prototype[U].apply(T,J)}}function nt(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function Z(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(p(T)){const U=u.length||0,q=T.length||0;u.length=U+q;for(let J=0;J<q;J++)u[U+J]=T[J]}else u.push(T)}}class At{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function _t(u){return/^[\s\xa0]*$/.test(u)}function lt(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Vt(u){return Vt[" "](u),u}Vt[" "]=function(){};var gt=lt().indexOf("Gecko")!=-1&&!(lt().toLowerCase().indexOf("webkit")!=-1&&lt().indexOf("Edge")==-1)&&!(lt().indexOf("Trident")!=-1||lt().indexOf("MSIE")!=-1)&&lt().indexOf("Edge")==-1;function wt(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function M(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let q=0;q<w.length;q++)_=w[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function I(u){g.setTimeout(()=>{throw u},0)}function b(){var u=Bt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class zt{constructor(){this.h=this.g=null}add(m,_){const T=Gt.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Gt=new At(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,at=!1,Bt=new zt,C=()=>{const u=g.Promise.resolve(void 0);tt=()=>{u.then(X)}};var X=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(_){I(_)}var m=Gt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}at=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return u}();function It(u,m){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(gt){t:{try{Vt(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:yt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&It.aa.h.call(this)}}W(It,$);var yt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function zn(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++Jt,this.da=this.fa=!1}function ji(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ui(u){this.src=u,this.g={},this.h=0}ui.prototype.add=function(u,m,_,T,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var J=xr(u,m,T,U);return-1<J?(m=u[J],_||(m.fa=!1)):(m=new zn(m,this.src,q,!!T,U),m.fa=_,u.push(m)),m};function Lr(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(T,U,1),q&&(ji(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function xr(u,m,_,T){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==T)return U}return-1}var zr="closure_lm_"+(1e6*Math.random()|0),Ya={};function kl(u,m,_,T,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)kl(u,m[q],_,T,U);return null}return _=Ll(_),u&&u[we]?u.K(m,_,v(T)?!!T.capture:!1,U):mn(u,m,_,!1,T,U)}function mn(u,m,_,T,U,q){if(!m)throw Error("Invalid event type");var J=v(U)?!!U.capture:!!U,Pt=Vs(u);if(Pt||(u[zr]=Pt=new ui(u)),_=Pt.add(m,_,T,J,q),_.proxy)return _;if(T=ah(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)ot||(U=J),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(Br(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ah(){function u(_){return m.call(u.src,u.listener,_)}const m=oh;return u}function $a(u,m,_,T,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)$a(u,m[q],_,T,U);else T=v(T)?!!T.capture:!!T,_=Ll(_),u&&u[we]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=xr(q,_,T,U),-1<_&&(ji(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Vs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=xr(m,_,T,U)),(_=-1<u?m[u]:null)&&Ms(_))}function Ms(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[we])Lr(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Br(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Vs(m))?(Lr(_,u),_.h==0&&(_.src=null,m[zr]=null)):ji(u)}}}function Br(u){return u in Ya?Ya[u]:Ya[u]="on"+u}function oh(u,m){if(u.da)u=!0;else{m=new It(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&Ms(u),u=_.call(T,m)}return u}function Vs(u){return u=u[zr],u instanceof ui?u:null}var Za="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ll(u){return typeof u=="function"?u:(u[Za]||(u[Za]=function(m){return u.handleEvent(m)}),u[Za])}function se(){et.call(this),this.i=new ui(this),this.M=this,this.F=null}W(se,et),se.prototype[we]=!0,se.prototype.removeEventListener=function(u,m,_,T){$a(this,u,m,_,T)};function Ft(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new $(m,u);else if(m instanceof $)m.target=m.target||u;else{var U=m;m=new $(T,u),N(m,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var J=m.g=_[q];U=nn(J,T,!0,m)&&U}if(J=m.g=u,U=nn(J,T,!0,m)&&U,U=nn(J,T,!1,m)&&U,_)for(q=0;q<_.length;q++)J=m.g=_[q],U=nn(J,T,!1,m)&&U}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)ji(_[T]);delete u.g[m],u.h--}}this.F=null},se.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},se.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function nn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var J=m[q];if(J&&!J.da&&J.capture==_){var Pt=J.listener,ve=J.ha||J.src;J.fa&&Lr(u.i,J),U=Pt.call(ve,T)!==!1&&U}}return U&&!T.defaultPrevented}function qe(u,m,_){if(typeof u=="function")_&&(u=x(u,_));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function xl(u){u.g=qe(()=>{u.g=null,u.i&&(u.i=!1,xl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class lh extends et{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:xl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(u){et.call(this),this.h=u,this.g={}}W(qr,et);var Hr=[];function jr(u){wt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Ms(m)},u),u.g={}}qr.prototype.N=function(){qr.aa.N.call(this),jr(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dn=g.JSON.stringify,Ps=g.JSON.parse,Gr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function Wa(){}Wa.prototype.h=null;function Ja(u){return u.h||(u.h=u.i())}function to(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){$.call(this,"d")}W(hi,$);function eo(){$.call(this,"c")}W(eo,$);var Bn={},no=null;function Gi(){return no=no||new se}Bn.La="serverreachability";function Us(u){$.call(this,Bn.La,u)}W(Us,$);function Fi(u){const m=Gi();Ft(m,new Us(m))}Bn.STAT_EVENT="statevent";function zl(u,m){$.call(this,Bn.STAT_EVENT,u),this.stat=m}W(zl,$);function ee(u){const m=Gi();Ft(m,new zl(m,u))}Bn.Ma="timingevent";function ye(u,m){$.call(this,Bn.Ma,u),this.size=m}W(ye,$);function de(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function gn(){this.g=!0}gn.prototype.xa=function(){this.g=!1};function io(u,m,_,T,U,q){u.info(function(){if(u.g)if(q)for(var J="",Pt=q.split("&"),ve=0;ve<Pt.length;ve++){var Ut=Pt[ve].split("=");if(1<Ut.length){var Ce=Ut[0];Ut=Ut[1];var Ee=Ce.split("_");J=2<=Ee.length&&Ee[1]=="type"?J+(Ce+"="+Ut+"&"):J+(Ce+"=redacted&")}}else J=null;else J=q;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+J})}function uh(u,m,_,T,U,q,J){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+q+" "+J})}function Ki(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Fr(u,_)+(T?" "+T:"")})}function Bl(u,m){u.info(function(){return"TIMEOUT: "+m})}gn.prototype.info=function(){};function Fr(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var J=1;J<U.length;J++)U[J]=""}}}}return Dn(_)}catch{return m}}var Qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function Hn(){}W(Hn,Wa),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},qn=new Hn;function Xe(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ue}function ue(){this.i=null,this.g="",this.h=!1}var ro={},ks={};function On(u,m,_){u.L=1,u.v=$r(rn(m)),u.m=_,u.P=!0,di(u,null)}function di(u,m){u.F=Date.now(),Kr(u),u.A=rn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),co(_.i,"t",T),u.C=0,_=u.j.J,u.h=new ue,u.g=nu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new lh(x(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Hr[0]=U.toString()),U=Hr);for(var q=0;q<U.length;q++){var J=kl(_,U[q],T||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Fi(),io(u.i,u.u,u.A,u.l,u.R,u.m)}Xe.prototype.ca=function(u){u=u.target;const m=this.M;m&&vn(u)==3?m.j():this.Y(u)},Xe.prototype.Y=function(u){try{if(u==this.g)t:{const Ee=vn(this.g);var m=this.g.Ba();const Ti=this.g.Z();if(!(3>Ee)&&(Ee!=3||this.g&&(this.h.h||this.g.oa()||Xl(this.g)))){this.J||Ee!=4||m==7||(m==8||0>=Ti?Fi(3):Fi(2)),Xi(this);var _=this.g.Z();this.X=_;e:if(ql(this)){var T=Xl(this.g);u="";var U=T.length,q=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ve(this),jn(this);var J="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,uh(this.i,this.u,this.A,this.l,this.R,Ee,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,ve=this.g;if((Pt=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_t(Pt)){var Ut=Pt;break e}}Ut=null}if(_=Ut)Ki(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,_);else{this.o=!1,this.s=3,ee(12),Ve(this),jn(this);break t}}if(this.P){_=!0;let Pe;for(;!this.J&&this.C<J.length;)if(Pe=Hl(this,J),Pe==ks){Ee==4&&(this.s=4,ee(14),_=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(Pe==ro){this.s=4,ee(15),Ki(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else Ki(this.i,this.l,Pe,null),Qr(this,Pe);if(ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||J.length!=0||this.h.h||(this.s=1,ee(16),_=!1),this.o=this.o&&_,!_)Ki(this.i,this.l,J,"[Invalid Chunked Response]"),Ve(this),jn(this);else if(0<J.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),rs(Ce),Ce.M=!0,ee(11))}}else Ki(this.i,this.l,J,null),Qr(this,J);Ee==4&&Ve(this),this.o&&!this.J&&(Ee==4?Jl(this.j,this):(this.o=!1,Kr(this)))}else mh(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),Ve(this),jn(this)}}}catch{}finally{}};function ql(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Hl(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ks:(_=Number(m.substring(_,T)),isNaN(_)?ro:(T+=1,T+_>m.length?ks:(m=m.slice(T,T+_),u.C=T+_,m)))}Xe.prototype.cancel=function(){this.J=!0,Ve(this)};function Kr(u){u.S=Date.now()+u.I,jl(u,u.I)}function jl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=de(x(u.ba,u),m)}function Xi(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Xe.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Bl(this.i,this.A),this.L!=2&&(Fi(),ee(17)),Ve(this),this.s=2,jn(this)):jl(this,this.S-u)};function jn(u){u.j.G==0||u.J||Jl(u.j,u)}function Ve(u){Xi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,jr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Qr(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||so(_.h,u))){if(!u.K&&so(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Xs(_),Ks(_);else break t;po(_),ee(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=de(x(_.Za,_),6e3));if(1>=xs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ei(_,11)}else if((u.K||_.g==u)&&Xs(_),!_t(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let Ut=U[m];if(_.T=Ut[0],Ut=Ut[1],_.G==2)if(Ut[0]=="c"){_.K=Ut[1],_.ia=Ut[2];const Ce=Ut[3];Ce!=null&&(_.la=Ce,_.j.info("VER="+_.la));const Ee=Ut[4];Ee!=null&&(_.Aa=Ee,_.j.info("SVER="+_.Aa));const Ti=Ut[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(T=1.5*Ti,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Pe=u.g;if(Pe){const $n=Pe.g?Pe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var q=T.h;q.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(zs(q,q.h),q.h=null))}if(T.D){const yo=Pe.g?Pe.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(T.ya=yo,Xt(T.I,T.D,yo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var J=u;if(T.qa=eu(T,T.J?T.ia:null,T.W),J.K){Ye(T.h,J);var Pt=J,ve=T.L;ve&&(Pt.I=ve),Pt.B&&(Xi(Pt),Kr(Pt)),T.g=J}else Zl(T);0<_.i.length&&Qs(_)}else Ut[0]!="stop"&&Ut[0]!="close"||Ei(_,7);else _.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Ei(_,7):mo(_):Ut[0]!="noop"&&_.l&&_.l.ta(Ut),_.v=0)}}Fi(4)}catch{}}var Gl=class{constructor(u,m){this.g=u,this.map=m}};function mi(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ls(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xs(u){return u.h?1:u.g?u.g.size:0}function so(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function zs(u,m){u.g?u.g.add(m):u.h=m}function Ye(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}mi.prototype.cancel=function(){if(this.i=ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ao(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return nt(u.i)}function ch(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Bs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function oo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Bs(u),T=ch(u),U=T.length,q=0;q<U;q++)m.call(void 0,T[q],_&&_[q],u)}var Xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),U=null;if(0<=T){var q=u[_].substring(0,T);U=u[_].substring(T+1)}else q=u[_];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function me(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof me){this.h=u.h,Yr(this,u.j),this.o=u.o,this.g=u.g,Yi(this,u.s),this.l=u.l;var m=u.i,_=new pi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),gi(this,_),this.m=u.m}else u&&(m=String(u).match(Xr))?(this.h=!1,Yr(this,m[1]||"",!0),this.o=pn(m[2]||""),this.g=pn(m[3]||"",!0),Yi(this,m[4]),this.l=pn(m[5]||"",!0),gi(this,m[6]||"",!0),this.m=pn(m[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}me.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Zr(m,lo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Zr(m,lo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Zr(_,_.charAt(0)=="/"?fh:uo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Zr(_,qs)),u.join("")};function rn(u){return new me(u)}function Yr(u,m,_){u.j=_?pn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Yi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function gi(u,m,_){m instanceof pi?(u.i=m,Kl(u.i,u.h)):(_||(m=Zr(m,dh)),u.i=new pi(m,u.h))}function Xt(u,m,_){u.i.set(m,_)}function $r(u){return Xt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function pn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Fl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lo=/[#\/\?@]/g,uo=/[#\?:]/g,fh=/[#\?]/g,dh=/[#\?@]/g,qs=/#/g;function pi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function _n(u){u.g||(u.g=new Map,u.h=0,u.i&&hh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=pi.prototype,s.add=function(u,m){_n(this),this.i=null,u=Gn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function _i(u,m){_n(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function yi(u,m){return _n(u),m=Gn(u,m),u.g.has(m)}s.forEach=function(u,m){_n(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)},s.na=function(){_n(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const U=u[T];for(let q=0;q<U.length;q++)_.push(m[T])}return _},s.V=function(u){_n(this);let m=[];if(typeof u=="string")yi(this,u)&&(m=m.concat(this.g.get(Gn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},s.set=function(u,m){return _n(this),this.i=null,u=Gn(this,u),yi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function co(u,m,_){_i(u,m),0<_.length&&(u.i=null,u.g.set(Gn(u,m),nt(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const q=encodeURIComponent(String(T)),J=this.V(T);for(T=0;T<J.length;T++){var U=q;J[T]!==""&&(U+="="+encodeURIComponent(String(J[T]))),u.push(U)}}return this.i=u.join("&")};function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Kl(u,m){m&&!u.j&&(_n(u),u.i=null,u.g.forEach(function(_,T){var U=T.toLowerCase();T!=U&&(_i(this,T),co(this,U,_))},u)),u.j=m}function Wr(u,m){const _=new gn;if(g.Image){const T=new Image;T.onload=G(yn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=G(yn,_,"TestLoadImage: error",!1,m,T),T.onabort=G(yn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=G(yn,_,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Nn(u,m){const _=new gn,T=new AbortController,U=setTimeout(()=>{T.abort(),yn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(U),q.ok?yn(_,"TestPingServer: ok",!0,m):yn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),yn(_,"TestPingServer: error",!1,m)})}function yn(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function Jr(){this.g=new Gr}function Fn(u,m,_){const T=_||"";try{oo(u,function(U,q){let J=U;v(U)&&(J=Dn(U)),m.push(T+q+"="+encodeURIComponent(J))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function $i(u){this.l=u.Ub||null,this.j=u.eb||!1}W($i,Wa),$i.prototype.g=function(){return new vi(this.l,this.j)},$i.prototype.i=function(u){return function(){return u}}({});function vi(u,m){se.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(vi,se),s=vi.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Qn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kn(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ho(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ho(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Kn(this):Qn(this),this.readyState==3&&ho(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Kn(this))},s.Qa=function(u){this.g&&(this.response=u,Kn(this))},s.ga=function(){this.g&&Kn(this)};function Kn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Qn(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fo(u){let m="";return wt(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Ie(u,m,_){t:{for(T in _){var T=!1;break t}T=!0}T||(_=fo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Xt(u,m,_))}function Ht(u){se.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(Ht,se);var Hs=/^https?$/i,ts=["POST","PUT"];s=Ht.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?Ja(this.o):Ja(qn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Ql(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ts,m,void 0))||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,J]of _)this.g.setRequestHeader(q,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{es(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Ql(this,q)}};function Ql(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,js(u),Xn(u)}function js(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),Xn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xn(this,!0)),Ht.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Gs(this):this.bb())},s.bb=function(){Gs(this)};function Gs(u){if(u.h&&typeof d<"u"&&(!u.v[1]||vn(u)!=4||u.Z()!=2)){if(u.u&&vn(u)==4)qe(u.Ea,0,u);else if(Ft(u,"readystatechange"),vn(u)==4){u.h=!1;try{const J=u.Z();t:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var T;if(T=J===0){var U=String(u.D).match(Xr)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),T=!Hs.test(U?U.toLowerCase():"")}_=T}if(_)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var q=2<vn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",js(u)}}finally{Xn(u)}}}}function Xn(u,m){if(u.g){es(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ft(u,"ready");try{_.onreadystatechange=T}catch{}}}function es(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function vn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ps(m)}};function Xl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mh(u){const m={};u=(u.g&&2<=vn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(_t(u[T]))continue;var _=V(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[U]||[];m[U]=q,q.push(_)}M(m,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Fs(u){this.Aa=0,this.i=[],this.j=new gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,u),this.cb=ns("retryDelaySeedMs",1e4,u),this.Wa=ns("forwardChannelMaxRetries",2,u),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(u&&u.concurrentRequestLimit),this.Da=new Jr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Fs.prototype,s.la=8,s.G=1,s.connect=function(u,m,_,T){ee(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=eu(this,null,this.W),Qs(this)};function mo(u){if(Yl(u),u.G==3){var m=u.U++,_=rn(u.I);if(Xt(_,"SID",u.K),Xt(_,"RID",m),Xt(_,"TYPE","terminate"),is(u,_),m=new Xe(u,u.j,m),m.L=2,m.v=$r(rn(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=nu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Kr(m)}tu(u)}function Ks(u){u.g&&(rs(u),u.g.cancel(),u.g=null)}function Yl(u){Ks(u),u.u&&(g.clearTimeout(u.u),u.u=null),Xs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Qs(u){if(!Ls(u.h)&&!u.s){u.s=!0;var m=u.Ga;tt||C(),at||(tt(),at=!0),Bt.add(m,u),u.B=0}}function gh(u,m){return xs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=de(x(u.Ga,u,m),_o(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Xe(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=$l(this,U,m),_=rn(this.I),Xt(_,"RID",u),Xt(_,"CVER",22),this.D&&Xt(_,"X-HTTP-Session-Id",this.D),is(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(fo(q)))+"&"+m:this.m&&Ie(_,this.m,q)),zs(this.h,U),this.Ua&&Xt(_,"TYPE","init"),this.P?(Xt(_,"$req",m),Xt(_,"SID","null"),U.T=!0,On(U,_,null)):On(U,_,m),this.G=2}}else this.G==3&&(u?go(this,u):this.i.length==0||Ls(this.h)||go(this))};function go(u,m){var _;m?_=m.l:_=u.U++;const T=rn(u.I);Xt(T,"SID",u.K),Xt(T,"RID",_),Xt(T,"AID",u.T),is(u,T),u.m&&u.o&&Ie(T,u.m,u.o),_=new Xe(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=$l(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),zs(u.h,_),On(_,T,m)}function is(u,m){u.H&&wt(u.H,function(_,T){Xt(m,T,_)}),u.l&&oo({},function(_,T){Xt(m,T,_)})}function $l(u,m,_){_=Math.min(u.i.length,_);var T=u.l?x(u.l.Na,u.l,u):null;t:{var U=u.i;let q=-1;for(;;){const J=["count="+_];q==-1?0<_?(q=U[0].g,J.push("ofs="+q)):q=0:J.push("ofs="+q);let Pt=!0;for(let ve=0;ve<_;ve++){let Ut=U[ve].g;const Ce=U[ve].map;if(Ut-=q,0>Ut)q=Math.max(0,U[ve].g-100),Pt=!1;else try{Fn(Ce,J,"req"+Ut+"_")}catch{T&&T(Ce)}}if(Pt){T=J.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,T}function Zl(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;tt||C(),at||(tt(),at=!0),Bt.add(m,u),u.v=0}}function po(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=de(x(u.Fa,u),_o(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=de(x(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),Ks(this),Wl(this))};function rs(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new Xe(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=rn(u.qa);Xt(m,"RID","rpc"),Xt(m,"SID",u.K),Xt(m,"AID",u.T),Xt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xt(m,"TO",u.ja),Xt(m,"TYPE","xmlhttp"),is(u,m),u.m&&u.o&&Ie(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=$r(rn(m)),_.m=null,_.P=!0,di(_,u)}s.Za=function(){this.C!=null&&(this.C=null,Ks(this),po(this),ee(19))};function Xs(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Jl(u,m){var _=null;if(u.g==m){Xs(u),rs(u),u.g=null;var T=2}else if(so(u.h,m))_=m.D,Ye(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=Gi(),Ft(T,new ye(T,_)),Qs(u)}else Zl(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&gh(u,m)||T==2&&po(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:Ei(u,5);break;case 4:Ei(u,10);break;case 3:Ei(u,6);break;default:Ei(u,2)}}}function _o(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ei(u,m){if(u.j.info("Error code "+m),m==2){var _=x(u.fb,u),T=u.Xa;const U=!T;T=new me(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Yr(T,"https"),$r(T),U?Wr(T.toString(),_):Nn(T.toString(),_)}else ee(2);u.G=0,u.l&&u.l.sa(m),tu(u),Yl(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function tu(u){if(u.G=0,u.ka=[],u.l){const m=ao(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ka,m),Z(u.ka,u.i),u.h.i.length=0,nt(u.i),u.i.length=0),u.l.ra()}}function eu(u,m,_){var T=_ instanceof me?rn(_):new me(_);if(T.g!="")m&&(T.g=m+"."+T.g),Yi(T,T.s);else{var U=g.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new me(null);T&&Yr(q,T),m&&(q.g=m),U&&Yi(q,U),_&&(q.l=_),T=q}return _=u.D,m=u.ya,_&&m&&Xt(T,_,m),Xt(T,"VER",u.la),is(u,T),T}function nu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ht(new $i({eb:_})):new Ht(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}s=iu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ys(){}Ys.prototype.g=function(u,m){return new $e(u,m)};function $e(u,m){se.call(this),this.g=new Fs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!_t(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!_t(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Yn(this)}W($e,se),$e.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$e.prototype.close=function(){mo(this.g)},$e.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Dn(u),u=_);m.i.push(new Gl(m.Ya++,u)),m.G==3&&Qs(m)},$e.prototype.N=function(){this.g.l=null,delete this.j,mo(this.g),delete this.g,$e.aa.N.call(this)};function ru(u){hi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}W(ru,hi);function su(){eo.call(this),this.status=1}W(su,eo);function Yn(u){this.g=u}W(Yn,iu),Yn.prototype.ua=function(){Ft(this.g,"a")},Yn.prototype.ta=function(u){Ft(this.g,new ru(u))},Yn.prototype.sa=function(u){Ft(this.g,new su)},Yn.prototype.ra=function(){Ft(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,$e.prototype.send=$e.prototype.o,$e.prototype.open=$e.prototype.m,$e.prototype.close=$e.prototype.close,Yv=function(){return new Ys},Xv=function(){return Gi()},Qv=Bn,Dd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,mc=Qi,fi.COMPLETE="complete",Kv=fi,to.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",se.prototype.listen=se.prototype.K,ll=to,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,Fv=Ht}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const py="@firebase/firestore",_y="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Yd("@firebase/firestore");function ba(){return bs.logLevel}function it(s,...t){if(bs.logLevel<=Nt.DEBUG){const i=t.map(Wd);bs.debug(`Firestore (${ja}): ${s}`,...i)}}function zi(s,...t){if(bs.logLevel<=Nt.ERROR){const i=t.map(Wd);bs.error(`Firestore (${ja}): ${s}`,...i)}}function Pa(s,...t){if(bs.logLevel<=Nt.WARN){const i=t.map(Wd);bs.warn(`Firestore (${ja}): ${s}`,...i)}}function Wd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(s="Unexpected state"){const t=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: `+s;throw zi(t),new Error(t)}function jt(s,t){s||pt()}function Tt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Hi{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(Fe.UNAUTHENTICATED))}shutdown(){}}class Eb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Tb{constructor(t){this.t=t,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){jt(this.o===void 0);let a=this.i;const l=p=>this.i!==a?(a=this.i,i(p)):Promise.resolve();let c=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Cr,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Cr)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==t?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(jt(typeof a.accessToken=="string"),new $v(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return jt(t===null||typeof t=="string"),new Fe(t)}}class Ab{constructor(t,i,a){this.l=t,this.h=i,this.P=a,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Sb{constructor(t,i,a){this.l=t,this.h=i,this.P=a}getToken(){return Promise.resolve(new Ab(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bb{constructor(t,i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Un(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,i){jt(this.o===void 0);const a=c=>{c.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,it("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>a(c))};const l=c=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?l(c):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new yy(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(jt(typeof i.token=="string"),this.R=i.token,new yy(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=Rb(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<i&&(a+=t.charAt(l[c]%62))}return a}}function Rt(s,t){return s<t?-1:s>t?1:0}function Od(s,t){let i=0;for(;i<s.length&&i<t.length;){const a=s.codePointAt(i),l=t.codePointAt(i);if(a!==l){if(a<128&&l<128)return Rt(a,l);{const c=Zv(),d=wb(c.encode(vy(s,i)),c.encode(vy(t,i)));return d!==0?d:Rt(a,l)}}i+=a>65535?2:1}return Rt(s.length,t.length)}function vy(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function wb(s,t){for(let i=0;i<s.length&&i<t.length;++i)if(s[i]!==t[i])return Rt(s[i],t[i]);return Rt(s.length,t.length)}function Ua(s,t,i){return s.length===t.length&&s.every((a,l)=>i(a,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=-62135596800,Ty=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(t){return be.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),a=Math.floor((t-1e3*i)*Ty);return new be(i,a)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ct(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ct(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Ey)throw new ct(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ty}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ey;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(t){return new Et(t)}static min(){return new Et(new be(0,0))}static max(){return new Et(new be(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class ni{constructor(t,i,a){i===void 0?i=0:i>t.length&&pt(),a===void 0?a=t.length-i:a>t.length-i&&pt(),this.segments=t,this.offset=i,this.len=a}get length(){return this.len}isEqual(t){return ni.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof ni?t.forEach(a=>{i.push(a)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,a=this.limit();i<a;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const a=Math.min(t.length,i.length);for(let l=0;l<a;l++){const c=ni.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Rt(t.length,i.length)}static compareSegments(t,i){const a=ni.isNumericId(t),l=ni.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?ni.extractNumericId(t).compare(ni.extractNumericId(i)):Od(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ir.fromString(t.substring(4,t.length-2))}}class le extends ni{construct(t,i,a){return new le(t,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const a of t){if(a.indexOf("//")>=0)throw new ct(Y.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(l=>l.length>0))}return new le(i)}static emptyPath(){return new le([])}}const Ib=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends ni{construct(t,i,a){return new ze(t,i,a)}static isValidIdentifier(t){return Ib.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new ze([Ay])}static fromServerFormat(t){const i=[];let a="",l=0;const c=()=>{if(a.length===0)throw new ct(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new ct(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ct(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(a+=g,l++):(c(),l++)}if(c(),d)throw new ct(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ze(i)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(le.fromString(t))}static fromName(t){return new ht(le.fromString(t).popFirst(5))}static empty(){return new ht(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&le.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return le.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new le(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=-1;function Cb(s,t){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=Et.fromTimestamp(a===1e9?new be(i+1,0):new be(i,a));return new Or(l,ht.empty(),t)}function Db(s){return new Or(s.readTime,s.key,_l)}class Or{constructor(t,i,a){this.readTime=t,this.documentKey=i,this.largestBatchId=a}static min(){return new Or(Et.min(),ht.empty(),_l)}static max(){return new Or(Et.max(),ht.empty(),_l)}}function Ob(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=ht.comparator(s.documentKey,t.documentKey),i!==0?i:Rt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(s){if(s.code!==Y.FAILED_PRECONDITION||s.message!==Nb)throw s;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Q((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Q?i:Q.resolve(i)}catch(i){return Q.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Q.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Q.reject(i)}static resolve(t){return new Q((i,a)=>{i(t)})}static reject(t){return new Q((i,a)=>{a(t)})}static waitFor(t){return new Q((i,a)=>{let l=0,c=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++c,d&&c===l&&i()},p=>a(p))}),d=!0,c===l&&i()})}static or(t){let i=Q.resolve(!1);for(const a of t)i=i.next(l=>l?Q.resolve(l):a());return i}static forEach(t,i){const a=[];return t.forEach((l,c)=>{a.push(i.call(this,l,c))}),this.waitFor(a)}static mapArray(t,i){return new Q((a,l)=>{const c=t.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const v=p;i(t[v]).next(A=>{d[v]=A,++g,g===c&&a(d)},A=>l(A))}})}static doWhile(t,i){return new Q((a,l)=>{const c=()=>{t()===!0?i().next(()=>{c()},l):a()};c()})}}function Vb(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Fa(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.oe(a),this._e=a=>i.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Gc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=-1;function Fc(s){return s==null}function Rc(s){return s===0&&1/s==-1/0}function Pb(s){return typeof s=="number"&&Number.isInteger(s)&&!Rc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="";function Ub(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=Sy(t)),t=kb(s.get(i),t);return Sy(t)}function kb(s,t){let i=t;const a=s.length;for(let l=0;l<a;l++){const c=s.charAt(l);switch(c){case"\0":i+="";break;case Jv:i+="";break;default:i+=c}}return i}function Sy(s){return s+Jv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function Is(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function tE(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,i){this.comparator=t,this.root=i||xe.EMPTY}insert(t,i){return new re(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,xe.BLACK,null,null))}remove(t){return new re(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xe.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(t){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(t,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,a)=>(t(i,a),!1))}toString(){const t=[];return this.inorderTraversal((i,a)=>(t.push(`${i}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new oc(this.root,t,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new oc(this.root,t,this.comparator,!0)}}class oc{constructor(t,i,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?a(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xe{constructor(t,i,a,l,c){this.key=t,this.value=i,this.color=a??xe.RED,this.left=l??xe.EMPTY,this.right=c??xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,a,l,c){return new xe(t??this.key,i??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,a){let l=this;const c=a(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,a),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let a,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return xe.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const t=this.left.check();if(t!==this.right.check())throw pt();return t+(this.isRed()?0:1)}}xe.EMPTY=null,xe.RED=!0,xe.BLACK=!1;xe.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(t,i,a,l,c){return this}insert(t,i,a){return new xe(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.comparator=t,this.data=new re(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,a)=>(t(i),!1))}forEachInRange(t,i){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Ry(this.data.getIterator())}getIteratorFrom(t){return new Ry(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(a=>{i=i.add(a)}),i}isEqual(t){if(!(t instanceof Re)||this.size!==t.size)return!1;const i=this.data.getIterator(),a=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Re(this.comparator);return i.data=t,i}}class Ry{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.fields=t,t.sort(ze.comparator)}static empty(){return new kn([])}unionWith(t){let i=new Re(ze.comparator);for(const a of this.fields)i=i.add(a);for(const a of t)i=i.add(a);return new kn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ua(this.fields,t.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new eE("Invalid base64 string: "+c):c}}(t);return new Be(i)}static fromUint8Array(t){const i=function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c}(t);return new Be(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const Lb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(s){if(jt(!!s),typeof s=="string"){let t=0;const i=Lb.exec(s);if(jt(!!i),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:fe(s.seconds),nanos:fe(s.nanos)}}function fe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Mr(s){return typeof s=="string"?Be.fromBase64String(s):Be.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="server_timestamp",iE="__type__",rE="__previous_value__",sE="__local_write_time__";function tm(s){var t,i;return((i=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[iE])===null||i===void 0?void 0:i.stringValue)===nE}function Kc(s){const t=s.mapValue.fields[rE];return tm(t)?Kc(t):t}function yl(s){const t=Nr(s.mapValue.fields[sE].timestampValue);return new be(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,i,a,l,c,d,g,p,v){this.databaseId=t,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=v}}const wc="(default)";class vl{constructor(t,i){this.projectId=t,this.database=i||wc}static empty(){return new vl("","")}get isDefaultDatabase(){return this.database===wc}isEqual(t){return t instanceof vl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__type__",zb="__max__",lc={mapValue:{}},oE="__vector__",Ic="value";function Vr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?tm(s)?4:qb(s)?9007199254740991:Bb(s)?10:11:pt()}function oi(s,t){if(s===t)return!0;const i=Vr(s);if(i!==Vr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return yl(s).isEqual(yl(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Nr(l.timestampValue),g=Nr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(l,c){return Mr(l.bytesValue).isEqual(Mr(c.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(l,c){return fe(l.geoPointValue.latitude)===fe(c.geoPointValue.latitude)&&fe(l.geoPointValue.longitude)===fe(c.geoPointValue.longitude)}(s,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return fe(l.integerValue)===fe(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=fe(l.doubleValue),g=fe(c.doubleValue);return d===g?Rc(d)===Rc(g):isNaN(d)&&isNaN(g)}return!1}(s,t);case 9:return Ua(s.arrayValue.values||[],t.arrayValue.values||[],oi);case 10:case 11:return function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(by(d)!==by(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!oi(d[p],g[p])))return!1;return!0}(s,t);default:return pt()}}function El(s,t){return(s.values||[]).find(i=>oi(i,t))!==void 0}function ka(s,t){if(s===t)return 0;const i=Vr(s),a=Vr(t);if(i!==a)return Rt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Rt(s.booleanValue,t.booleanValue);case 2:return function(c,d){const g=fe(c.integerValue||c.doubleValue),p=fe(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(s,t);case 3:return wy(s.timestampValue,t.timestampValue);case 4:return wy(yl(s),yl(t));case 5:return Od(s.stringValue,t.stringValue);case 6:return function(c,d){const g=Mr(c),p=Mr(d);return g.compareTo(p)}(s.bytesValue,t.bytesValue);case 7:return function(c,d){const g=c.split("/"),p=d.split("/");for(let v=0;v<g.length&&v<p.length;v++){const A=Rt(g[v],p[v]);if(A!==0)return A}return Rt(g.length,p.length)}(s.referenceValue,t.referenceValue);case 8:return function(c,d){const g=Rt(fe(c.latitude),fe(d.latitude));return g!==0?g:Rt(fe(c.longitude),fe(d.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return Iy(s.arrayValue,t.arrayValue);case 10:return function(c,d){var g,p,v,A;const O=c.fields||{},x=d.fields||{},G=(g=O[Ic])===null||g===void 0?void 0:g.arrayValue,W=(p=x[Ic])===null||p===void 0?void 0:p.arrayValue,nt=Rt(((v=G==null?void 0:G.values)===null||v===void 0?void 0:v.length)||0,((A=W==null?void 0:W.values)===null||A===void 0?void 0:A.length)||0);return nt!==0?nt:Iy(G,W)}(s.mapValue,t.mapValue);case 11:return function(c,d){if(c===lc.mapValue&&d===lc.mapValue)return 0;if(c===lc.mapValue)return 1;if(d===lc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),v=d.fields||{},A=Object.keys(v);p.sort(),A.sort();for(let O=0;O<p.length&&O<A.length;++O){const x=Od(p[O],A[O]);if(x!==0)return x;const G=ka(g[p[O]],v[A[O]]);if(G!==0)return G}return Rt(p.length,A.length)}(s.mapValue,t.mapValue);default:throw pt()}}function wy(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Rt(s,t);const i=Nr(s),a=Nr(t),l=Rt(i.seconds,a.seconds);return l!==0?l:Rt(i.nanos,a.nanos)}function Iy(s,t){const i=s.values||[],a=t.values||[];for(let l=0;l<i.length&&l<a.length;++l){const c=ka(i[l],a[l]);if(c)return c}return Rt(i.length,a.length)}function La(s){return Nd(s)}function Nd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(i){const a=Nr(i);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(i){return Mr(i).toBase64()}(s.bytesValue):"referenceValue"in s?function(i){return ht.fromName(i).toString()}(s.referenceValue):"geoPointValue"in s?function(i){return`geo(${i.latitude},${i.longitude})`}(s.geoPointValue):"arrayValue"in s?function(i){let a="[",l=!0;for(const c of i.values||[])l?l=!1:a+=",",a+=Nd(c);return a+"]"}(s.arrayValue):"mapValue"in s?function(i){const a=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of a)c?c=!1:l+=",",l+=`${d}:${Nd(i.fields[d])}`;return l+"}"}(s.mapValue):pt()}function gc(s){switch(Vr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Kc(s);return t?16+gc(t):16;case 5:return 2*s.stringValue.length;case 6:return Mr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((l,c)=>l+gc(c),0)}(s.arrayValue);case 10:case 11:return function(a){let l=0;return Is(a.fields,(c,d)=>{l+=c.length+gc(d)}),l}(s.mapValue);default:throw pt()}}function Md(s){return!!s&&"integerValue"in s}function em(s){return!!s&&"arrayValue"in s}function Cy(s){return!!s&&"nullValue"in s}function Dy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function pc(s){return!!s&&"mapValue"in s}function Bb(s){var t,i;return((i=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[aE])===null||i===void 0?void 0:i.stringValue)===oE}function hl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Is(s.mapValue.fields,(i,a)=>t.mapValue.fields[i]=hl(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=hl(s.arrayValue.values[i]);return t}return Object.assign({},s)}function qb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===zb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.value=t}static empty(){return new In({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let a=0;a<t.length-1;++a)if(i=(i.mapValue.fields||{})[t.get(a)],!pc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=hl(i)}setAll(t){let i=ze.emptyPath(),a={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const p=this.getFieldsMap(i);this.applyChanges(p,a,l),a={},l=[],i=g.popLast()}d?a[g.lastSegment()]=hl(d):l.push(g.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,a,l)}delete(t){const i=this.field(t.popLast());pc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return oi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<t.length;++a){let l=i.mapValue.fields[t.get(a)];pc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,a){Is(i,(l,c)=>t[l]=c);for(const l of a)delete t[l]}clone(){return new In(hl(this.value))}}function lE(s){const t=[];return Is(s.fields,(i,a)=>{const l=new ze([i]);if(pc(a)){const c=lE(a.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)}),new kn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t,i,a,l,c,d,g){this.key=t,this.documentType=i,this.version=a,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Ke(t,0,Et.min(),Et.min(),Et.min(),In.empty(),0)}static newFoundDocument(t,i,a,l){return new Ke(t,1,i,Et.min(),a,l,0)}static newNoDocument(t,i){return new Ke(t,2,i,Et.min(),Et.min(),In.empty(),0)}static newUnknownDocument(t,i){return new Ke(t,3,i,Et.min(),Et.min(),In.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,i){this.position=t,this.inclusive=i}}function Oy(s,t,i){let a=0;for(let l=0;l<s.position.length;l++){const c=t[l],d=s.position[l];if(c.field.isKeyField()?a=ht.comparator(ht.fromName(d.referenceValue),i.key):a=ka(d,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ny(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!oi(s.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,i="asc"){this.field=t,this.dir=i}}function Hb(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{}class Se extends uE{constructor(t,i,a){super(),this.field=t,this.op=i,this.value=a}static create(t,i,a){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,a):new Gb(t,i,a):i==="array-contains"?new Qb(t,a):i==="in"?new Xb(t,a):i==="not-in"?new Yb(t,a):i==="array-contains-any"?new $b(t,a):new Se(t,i,a)}static createKeyFieldInFilter(t,i,a){return i==="in"?new Fb(t,a):new Kb(t,a)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(ka(i,this.value)):i!==null&&Vr(this.value)===Vr(i)&&this.matchesComparison(ka(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends uE{constructor(t,i){super(),this.filters=t,this.op=i,this.ce=null}static create(t,i){return new li(t,i)}matches(t){return cE(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function cE(s){return s.op==="and"}function hE(s){return jb(s)&&cE(s)}function jb(s){for(const t of s.filters)if(t instanceof li)return!1;return!0}function Vd(s){if(s instanceof Se)return s.field.canonicalString()+s.op.toString()+La(s.value);if(hE(s))return s.filters.map(t=>Vd(t)).join(",");{const t=s.filters.map(i=>Vd(i)).join(",");return`${s.op}(${t})`}}function fE(s,t){return s instanceof Se?function(a,l){return l instanceof Se&&a.op===l.op&&a.field.isEqual(l.field)&&oi(a.value,l.value)}(s,t):s instanceof li?function(a,l){return l instanceof li&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce((c,d,g)=>c&&fE(d,l.filters[g]),!0):!1}(s,t):void pt()}function dE(s){return s instanceof Se?function(i){return`${i.field.canonicalString()} ${i.op} ${La(i.value)}`}(s):s instanceof li?function(i){return i.op.toString()+" {"+i.getFilters().map(dE).join(" ,")+"}"}(s):"Filter"}class Gb extends Se{constructor(t,i,a){super(t,i,a),this.key=ht.fromName(a.referenceValue)}matches(t){const i=ht.comparator(t.key,this.key);return this.matchesComparison(i)}}class Fb extends Se{constructor(t,i){super(t,"in",i),this.keys=mE("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class Kb extends Se{constructor(t,i){super(t,"not-in",i),this.keys=mE("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function mE(s,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>ht.fromName(a.referenceValue))}class Qb extends Se{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return em(i)&&El(i.arrayValue,this.value)}}class Xb extends Se{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&El(this.value.arrayValue,i)}}class Yb extends Se{constructor(t,i){super(t,"not-in",i)}matches(t){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&!El(this.value.arrayValue,i)}}class $b extends Se{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!em(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>El(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t,i=null,a=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.le=null}}function My(s,t=null,i=[],a=[],l=null,c=null,d=null){return new Zb(s,t,i,a,l,c,d)}function nm(s){const t=Tt(s);if(t.le===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(a=>Vd(a)).join(","),i+="|ob:",i+=t.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),Fc(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>La(a)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>La(a)).join(",")),t.le=i}return t.le}function im(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!Hb(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!fE(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Ny(s.startAt,t.startAt)&&Ny(s.endAt,t.endAt)}function Pd(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,i=null,a=[],l=[],c=null,d="F",g=null,p=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Wb(s,t,i,a,l,c,d,g){return new Qc(s,t,i,a,l,c,d,g)}function rm(s){return new Qc(s)}function Vy(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Jb(s){return s.collectionGroup!==null}function fl(s){const t=Tt(s);if(t.he===null){t.he=[];const i=new Set;for(const c of t.explicitOrderBy)t.he.push(c),i.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Re(ze.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(t).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||t.he.push(new Dc(c,a))}),i.has(ze.keyField().canonicalString())||t.he.push(new Dc(ze.keyField(),a))}return t.he}function ii(s){const t=Tt(s);return t.Pe||(t.Pe=tR(t,fl(s))),t.Pe}function tR(s,t){if(s.limitType==="F")return My(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Dc(l.field,c)});const i=s.endAt?new Cc(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Cc(s.startAt.position,s.startAt.inclusive):null;return My(s.path,s.collectionGroup,t,s.filters,s.limit,i,a)}}function Ud(s,t,i){return new Qc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function Xc(s,t){return im(ii(s),ii(t))&&s.limitType===t.limitType}function gE(s){return`${nm(ii(s))}|lt:${s.limitType}`}function Ra(s){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(l=>dE(l)).join(", ")}]`),Fc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(l=>La(l)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(l=>La(l)).join(",")),`Target(${a})`}(ii(s))}; limitType=${s.limitType})`}function Yc(s,t){return t.isFoundDocument()&&function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):ht.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(s,t)&&function(a,l){for(const c of fl(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(s,t)&&function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0}(s,t)&&function(a,l){return!(a.startAt&&!function(d,g,p){const v=Oy(d,g,p);return d.inclusive?v<=0:v<0}(a.startAt,fl(a),l)||a.endAt&&!function(d,g,p){const v=Oy(d,g,p);return d.inclusive?v>=0:v>0}(a.endAt,fl(a),l))}(s,t)}function eR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function pE(s){return(t,i)=>{let a=!1;for(const l of fl(s)){const c=nR(l,t,i);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function nR(s,t,i){const a=s.field.isKeyField()?ht.comparator(t.key,i.key):function(c,d,g){const p=d.data.field(c),v=g.data.field(c);return p!==null&&v!==null?ka(p,v):pt()}(s.field,t,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const a=this.mapKeyFn(t),l=this.inner[a];if(l===void 0)return this.inner[a]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Is(this.inner,(i,a)=>{for(const[l,c]of a)t(l,c)})}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new re(ht.comparator);function Bi(){return iR}const _E=new re(ht.comparator);function ul(...s){let t=_E;for(const i of s)t=t.insert(i.key,i);return t}function yE(s){let t=_E;return s.forEach((i,a)=>t=t.insert(i,a.overlayedDocument)),t}function Ts(){return dl()}function vE(){return dl()}function dl(){return new Cs(s=>s.toString(),(s,t)=>s.isEqual(t))}const rR=new re(ht.comparator),sR=new Re(ht.comparator);function Mt(...s){let t=sR;for(const i of s)t=t.add(i);return t}const aR=new Re(Rt);function oR(){return aR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(t)?"-0":t}}function EE(s){return{integerValue:""+s}}function lR(s,t){return Pb(t)?EE(t):sm(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function uR(s,t,i){return s instanceof Oc?function(l,c){const d={fields:{[iE]:{stringValue:nE},[sE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&tm(c)&&(c=Kc(c)),c&&(d.fields[rE]=c),{mapValue:d}}(i,t):s instanceof Tl?AE(s,t):s instanceof Al?SE(s,t):function(l,c){const d=TE(l,c),g=Py(d)+Py(l.Ie);return Md(d)&&Md(l.Ie)?EE(g):sm(l.serializer,g)}(s,t)}function cR(s,t,i){return s instanceof Tl?AE(s,t):s instanceof Al?SE(s,t):i}function TE(s,t){return s instanceof Nc?function(a){return Md(a)||function(c){return!!c&&"doubleValue"in c}(a)}(t)?t:{integerValue:0}:null}class Oc extends $c{}class Tl extends $c{constructor(t){super(),this.elements=t}}function AE(s,t){const i=bE(t);for(const a of s.elements)i.some(l=>oi(l,a))||i.push(a);return{arrayValue:{values:i}}}class Al extends $c{constructor(t){super(),this.elements=t}}function SE(s,t){let i=bE(t);for(const a of s.elements)i=i.filter(l=>!oi(l,a));return{arrayValue:{values:i}}}class Nc extends $c{constructor(t,i){super(),this.serializer=t,this.Ie=i}}function Py(s){return fe(s.integerValue||s.doubleValue)}function bE(s){return em(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function hR(s,t){return s.field.isEqual(t.field)&&function(a,l){return a instanceof Tl&&l instanceof Tl||a instanceof Al&&l instanceof Al?Ua(a.elements,l.elements,oi):a instanceof Nc&&l instanceof Nc?oi(a.Ie,l.Ie):a instanceof Oc&&l instanceof Oc}(s.transform,t.transform)}class fR{constructor(t,i){this.version=t,this.transformResults=i}}class Li{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Li}static exists(t){return new Li(void 0,t)}static updateTime(t){return new Li(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _c(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Zc{}function RE(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new IE(s.key,Li.none()):new Dl(s.key,s.data,Li.none());{const i=s.data,a=In.empty();let l=new Re(ze.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?a.delete(c):a.set(c,d),l=l.add(c)}return new Ds(s.key,a,new kn(l.toArray()),Li.none())}}function dR(s,t,i){s instanceof Dl?function(l,c,d){const g=l.value.clone(),p=ky(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,t,i):s instanceof Ds?function(l,c,d){if(!_c(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=ky(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(wE(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(s,t,i):function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function ml(s,t,i,a){return s instanceof Dl?function(c,d,g,p){if(!_c(c.precondition,d))return g;const v=c.value.clone(),A=Ly(c.fieldTransforms,p,d);return v.setAll(A),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(s,t,i,a):s instanceof Ds?function(c,d,g,p){if(!_c(c.precondition,d))return g;const v=Ly(c.fieldTransforms,p,d),A=d.data;return A.setAll(wE(c)),A.setAll(v),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(O=>O.field))}(s,t,i,a):function(c,d,g){return _c(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(s,t,i)}function mR(s,t){let i=null;for(const a of s.fieldTransforms){const l=t.data.field(a.field),c=TE(a.transform,l||null);c!=null&&(i===null&&(i=In.empty()),i.set(a.field,c))}return i||null}function Uy(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Ua(a,l,(c,d)=>hR(c,d))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Dl extends Zc{constructor(t,i,a,l=[]){super(),this.key=t,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ds extends Zc{constructor(t,i,a,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function wE(s){const t=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=s.data.field(i);t.set(i,a)}}),t}function ky(s,t,i){const a=new Map;jt(s.length===i.length);for(let l=0;l<i.length;l++){const c=s[l],d=c.transform,g=t.data.field(c.field);a.set(c.field,cR(d,g,i[l]))}return a}function Ly(s,t,i){const a=new Map;for(const l of s){const c=l.transform,d=i.data.field(l.field);a.set(l.field,uR(c,d,t))}return a}class IE extends Zc{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gR extends Zc{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(t,i,a,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(t,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&dR(c,t,a[l])}}applyToLocalView(t,i){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(i=ml(a,t,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(i=ml(a,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const a=vE();return this.mutations.forEach(l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=i.has(l.key)?null:g;const p=RE(d,g);p!==null&&a.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(Et.min())}),a}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Mt())}isEqual(t){return this.batchId===t.batchId&&Ua(this.mutations,t.mutations,(i,a)=>Uy(i,a))&&Ua(this.baseMutations,t.baseMutations,(i,a)=>Uy(i,a))}}class am{constructor(t,i,a,l){this.batch=t,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(t,i,a){jt(t.mutations.length===a.length);let l=function(){return rR}();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,a[d].version);return new am(t,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,Lt;function vR(s){switch(s){case Y.OK:return pt();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return pt()}}function CE(s){if(s===void 0)return zi("GRPC error has no .code"),Y.UNKNOWN;switch(s){case _e.OK:return Y.OK;case _e.CANCELLED:return Y.CANCELLED;case _e.UNKNOWN:return Y.UNKNOWN;case _e.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case _e.INTERNAL:return Y.INTERNAL;case _e.UNAVAILABLE:return Y.UNAVAILABLE;case _e.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case _e.NOT_FOUND:return Y.NOT_FOUND;case _e.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case _e.ABORTED:return Y.ABORTED;case _e.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case _e.DATA_LOSS:return Y.DATA_LOSS;default:return pt()}}(Lt=_e||(_e={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new Ir([4294967295,4294967295],0);function xy(s){const t=Zv().encode(s),i=new Gv;return i.update(t),new Uint8Array(i.digest())}function zy(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),a=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Ir([i,a],0),new Ir([l,c],0)]}class om{constructor(t,i,a){if(this.bitmap=t,this.padding=i,this.hashCount=a,i<0||i>=8)throw new cl(`Invalid padding: ${i}`);if(a<0)throw new cl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${a}`);if(t.length===0&&i!==0)throw new cl(`Invalid padding when bitmap length is 0: ${i}`);this.Ee=8*t.length-i,this.de=Ir.fromNumber(this.Ee)}Ae(t,i,a){let l=t.add(i.multiply(Ir.fromNumber(a)));return l.compare(ER)===1&&(l=new Ir([l.getBits(0),l.getBits(1)],0)),l.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const i=xy(t),[a,l]=zy(i);for(let c=0;c<this.hashCount;c++){const d=this.Ae(a,l,c);if(!this.Re(d))return!1}return!0}static create(t,i,a){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new om(c,l,i);return a.forEach(g=>d.insert(g)),d}insert(t){if(this.Ee===0)return;const i=xy(t),[a,l]=zy(i);for(let c=0;c<this.hashCount;c++){const d=this.Ae(a,l,c);this.Ve(d)}}Ve(t){const i=Math.floor(t/8),a=t%8;this.bitmap[i]|=1<<a}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,i,a,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,a){const l=new Map;return l.set(t,Ol.createSynthesizedTargetChangeForCurrentChange(t,i,a)),new Wc(Et.min(),l,new re(Rt),Bi(),Mt())}}class Ol{constructor(t,i,a,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,a){return new Ol(a,i,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,i,a,l){this.me=t,this.removedTargetIds=i,this.key=a,this.fe=l}}class DE{constructor(t,i){this.targetId=t,this.ge=i}}class OE{constructor(t,i,a=Be.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=a,this.cause=l}}class By{constructor(){this.pe=0,this.ye=qy(),this.we=Be.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Mt(),i=Mt(),a=Mt();return this.ye.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:pt()}}),new Ol(this.we,this.Se,t,i,a)}Me(){this.be=!1,this.ye=qy()}xe(t,i){this.be=!0,this.ye=this.ye.insert(t,i)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,jt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class TR{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Bi(),this.$e=uc(),this.Ue=uc(),this.Ke=new re(Rt)}We(t){for(const i of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(i,t.fe):this.ze(i,t.key,t.fe);for(const i of t.removedTargetIds)this.ze(i,t.key,t.fe)}je(t){this.forEachTarget(t,i=>{const a=this.He(i);switch(t.state){case 0:this.Je(i)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(i);break;case 3:this.Je(i)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(i)&&(this.Ye(i),a.Ce(t.resumeToken));break;default:pt()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.qe.forEach((a,l)=>{this.Je(l)&&i(l)})}Ze(t){const i=t.targetId,a=t.ge.count,l=this.Xe(i);if(l){const c=l.target;if(Pd(c))if(a===0){const d=new ht(c.path);this.ze(i,d,Ke.newNoDocument(d,Et.min()))}else jt(a===1);else{const d=this.et(i);if(d!==a){const g=this.tt(t),p=g?this.nt(g,t,d):1;if(p!==0){this.Ye(i);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,v)}}}}}tt(t){const i=t.ge.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=i;let d,g;try{d=Mr(a).toUint8Array()}catch(p){if(p instanceof eE)return Pa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new om(d,l,c)}catch(p){return Pa(p instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.Ee===0?null:g}nt(t,i,a){return i.ge.count===a-this.st(t,i.targetId)?0:2}st(t,i){const a=this.ke.getRemoteKeysForTarget(i);let l=0;return a.forEach(c=>{const d=this.ke.it(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.ze(i,c,null),l++)}),l}ot(t){const i=new Map;this.qe.forEach((c,d)=>{const g=this.Xe(d);if(g){if(c.current&&Pd(g.target)){const p=new ht(g.target.path);this._t(p).has(d)||this.ut(d,p)||this.ze(d,p,Ke.newNoDocument(p,t))}c.ve&&(i.set(d,c.Fe()),c.Me())}});let a=Mt();this.Ue.forEach((c,d)=>{let g=!0;d.forEachWhile(p=>{const v=this.Xe(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(c))}),this.Qe.forEach((c,d)=>d.setReadTime(t));const l=new Wc(t,i,this.Ke,this.Qe,a);return this.Qe=Bi(),this.$e=uc(),this.Ue=uc(),this.Ke=new re(Rt),l}Ge(t,i){if(!this.Je(t))return;const a=this.ut(t,i.key)?2:0;this.He(t).xe(i.key,a),this.Qe=this.Qe.insert(i.key,i),this.$e=this.$e.insert(i.key,this._t(i.key).add(t)),this.Ue=this.Ue.insert(i.key,this.ct(i.key).add(t))}ze(t,i,a){if(!this.Je(t))return;const l=this.He(t);this.ut(t,i)?l.xe(i,1):l.Oe(i),this.Ue=this.Ue.insert(i,this.ct(i).delete(t)),this.Ue=this.Ue.insert(i,this.ct(i).add(t)),a&&(this.Qe=this.Qe.insert(i,a))}removeTarget(t){this.qe.delete(t)}et(t){const i=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let i=this.qe.get(t);return i||(i=new By,this.qe.set(t,i)),i}ct(t){let i=this.Ue.get(t);return i||(i=new Re(Rt),this.Ue=this.Ue.insert(t,i)),i}_t(t){let i=this.$e.get(t);return i||(i=new Re(Rt),this.$e=this.$e.insert(t,i)),i}Je(t){const i=this.Xe(t)!==null;return i||it("WatchChangeAggregator","Detected inactive target",t),i}Xe(t){const i=this.qe.get(t);return i&&i.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new By),this.ke.getRemoteKeysForTarget(t).forEach(i=>{this.ze(t,i,null)})}ut(t,i){return this.ke.getRemoteKeysForTarget(t).has(i)}}function uc(){return new re(ht.comparator)}function qy(){return new re(ht.comparator)}const AR={asc:"ASCENDING",desc:"DESCENDING"},SR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bR={and:"AND",or:"OR"};class RR{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function kd(s,t){return s.useProto3Json||Fc(t)?t:{value:t}}function Mc(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function NE(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function wR(s,t){return Mc(s,t.toTimestamp())}function ri(s){return jt(!!s),Et.fromTimestamp(function(i){const a=Nr(i);return new be(a.seconds,a.nanos)}(s))}function lm(s,t){return Ld(s,t).canonicalString()}function Ld(s,t){const i=function(l){return new le(["projects",l.projectId,"databases",l.database])}(s).child("documents");return t===void 0?i:i.child(t)}function ME(s){const t=le.fromString(s);return jt(LE(t)),t}function xd(s,t){return lm(s.databaseId,t.path)}function yd(s,t){const i=ME(t);if(i.get(1)!==s.databaseId.projectId)throw new ct(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ct(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new ht(PE(i))}function VE(s,t){return lm(s.databaseId,t)}function IR(s){const t=ME(s);return t.length===4?le.emptyPath():PE(t)}function zd(s){return new le(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function PE(s){return jt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Hy(s,t,i){return{name:xd(s,t),fields:i.value.mapValue.fields}}function CR(s,t){let i;if("targetChange"in t){t.targetChange;const a=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:pt()}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(v,A){return v.useProto3Json?(jt(A===void 0||typeof A=="string"),Be.fromBase64String(A||"")):(jt(A===void 0||A instanceof Buffer||A instanceof Uint8Array),Be.fromUint8Array(A||new Uint8Array))}(s,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(v){const A=v.code===void 0?Y.UNKNOWN:CE(v.code);return new ct(A,v.message||"")}(d);i=new OE(a,l,c,g||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const l=yd(s,a.document.name),c=ri(a.document.updateTime),d=a.document.createTime?ri(a.document.createTime):Et.min(),g=new In({mapValue:{fields:a.document.fields}}),p=Ke.newFoundDocument(l,c,d,g),v=a.targetIds||[],A=a.removedTargetIds||[];i=new yc(v,A,p.key,p)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const l=yd(s,a.document),c=a.readTime?ri(a.readTime):Et.min(),d=Ke.newNoDocument(l,c),g=a.removedTargetIds||[];i=new yc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const l=yd(s,a.document),c=a.removedTargetIds||[];i=new yc([],c,l,null)}else{if(!("filter"in t))return pt();{t.filter;const a=t.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,d=new yR(l,c),g=a.targetId;i=new DE(g,d)}}return i}function DR(s,t){let i;if(t instanceof Dl)i={update:Hy(s,t.key,t.value)};else if(t instanceof IE)i={delete:xd(s,t.key)};else if(t instanceof Ds)i={update:Hy(s,t.key,t.data),updateMask:xR(t.fieldMask)};else{if(!(t instanceof gR))return pt();i={verify:xd(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(a=>function(c,d){const g=d.transform;if(g instanceof Oc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Tl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Al)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Nc)return{fieldPath:d.field.canonicalString(),increment:g.Ie};throw pt()}(0,a))),t.precondition.isNone||(i.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:wR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pt()}(s,t.precondition)),i}function OR(s,t){return s&&s.length>0?(jt(t!==void 0),s.map(i=>function(l,c){let d=l.updateTime?ri(l.updateTime):ri(c);return d.isEqual(Et.min())&&(d=ri(c)),new fR(d,l.transformResults||[])}(i,t))):[]}function NR(s,t){return{documents:[VE(s,t.path)]}}function MR(s,t){const i={structuredQuery:{}},a=t.path;let l;t.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=VE(s,l);const c=function(v){if(v.length!==0)return kE(li.create(v,"and"))}(t.filters);c&&(i.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(A=>function(x){return{field:wa(x.field),direction:UR(x.dir)}}(A))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=kd(s,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{ht:i,parent:l}}function VR(s){let t=IR(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){jt(a===1);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];i.where&&(c=function(O){const x=UE(O);return x instanceof li&&hE(x)?x.getFilters():[x]}(i.where));let d=[];i.orderBy&&(d=function(O){return O.map(x=>function(W){return new Dc(Ia(W.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction))}(x))}(i.orderBy));let g=null;i.limit&&(g=function(O){let x;return x=typeof O=="object"?O.value:O,Fc(x)?null:x}(i.limit));let p=null;i.startAt&&(p=function(O){const x=!!O.before,G=O.values||[];return new Cc(G,x)}(i.startAt));let v=null;return i.endAt&&(v=function(O){const x=!O.before,G=O.values||[];return new Cc(G,x)}(i.endAt)),Wb(t,l,d,c,g,"F",p,v)}function PR(s,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function UE(s){return s.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Ia(i.unaryFilter.field);return Se.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Ia(i.unaryFilter.field);return Se.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ia(i.unaryFilter.field);return Se.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ia(i.unaryFilter.field);return Se.create(d,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(s):s.fieldFilter!==void 0?function(i){return Se.create(Ia(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(i.fieldFilter.op),i.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(i){return li.create(i.compositeFilter.filters.map(a=>UE(a)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return pt()}}(i.compositeFilter.op))}(s):pt()}function UR(s){return AR[s]}function kR(s){return SR[s]}function LR(s){return bR[s]}function wa(s){return{fieldPath:s.canonicalString()}}function Ia(s){return ze.fromServerFormat(s.fieldPath)}function kE(s){return s instanceof Se?function(i){if(i.op==="=="){if(Dy(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NAN"}};if(Cy(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Dy(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NOT_NAN"}};if(Cy(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(i.field),op:kR(i.op),value:i.value}}}(s):s instanceof li?function(i){const a=i.getFilters().map(l=>kE(l));return a.length===1?a[0]:{compositeFilter:{op:LR(i.op),filters:a}}}(s):pt()}function xR(s){const t=[];return s.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function LE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,i,a,l,c=Et.min(),d=Et.min(),g=Be.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Sr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(t){this.Tt=t}}function BR(s){const t=VR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ud(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.Tn=new HR}addToCollectionParentIndex(t,i){return this.Tn.add(i),Q.resolve()}getCollectionParents(t,i){return Q.resolve(this.Tn.getEntries(i))}addFieldIndex(t,i){return Q.resolve()}deleteFieldIndex(t,i){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,i){return Q.resolve()}getDocumentsMatchingTarget(t,i){return Q.resolve(null)}getIndexType(t,i){return Q.resolve(0)}getFieldIndexes(t,i){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,i){return Q.resolve(Or.min())}getMinOffsetFromCollectionGroup(t,i){return Q.resolve(Or.min())}updateCollectionGroup(t,i,a){return Q.resolve()}updateIndexEntries(t,i){return Q.resolve()}}class HR{constructor(){this.index={}}add(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i]||new Re(le.comparator),c=!l.has(a);return this.index[i]=l.add(a),c}has(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(t){return(this.index[t]||new Re(le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xE=41943040;class en{static withCacheSize(t){return new en(t,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(xE,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new xa(0)}static Kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LruGarbageCollector",jR=1048576;function Fy([s,t],[i,a]){const l=Rt(s,i);return l===0?Rt(t,a):l}class GR{constructor(t){this.Hn=t,this.buffer=new Re(Fy),this.Jn=0}Yn(){return++this.Jn}Zn(t){const i=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();Fy(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class FR{constructor(t,i,a){this.garbageCollector=t,this.asyncQueue=i,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){it(Gy,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Fa(i)?it(Gy,"Ignoring IndexedDB error during garbage collection: ",i):await Ga(i)}await this.er(3e5)})}}class KR{constructor(t,i){this.tr=t,this.params=i}calculateTargetCount(t,i){return this.tr.nr(t).next(a=>Math.floor(i/100*a))}nthSequenceNumber(t,i){if(i===0)return Q.resolve(Gc.ae);const a=new GR(i);return this.tr.forEachTarget(t,l=>a.Zn(l.sequenceNumber)).next(()=>this.tr.rr(t,l=>a.Zn(l))).next(()=>a.maxValue)}removeTargets(t,i,a){return this.tr.removeTargets(t,i,a)}removeOrphanedDocuments(t,i){return this.tr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(jy)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.ir(t,i))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,i){let a,l,c,d,g,p,v;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),l=this.params.maximumSequenceNumbersToCollect):l=O,d=Date.now(),this.nthSequenceNumber(t,l))).next(O=>(a=O,g=Date.now(),this.removeTargets(t,a,i))).next(O=>(c=O,p=Date.now(),this.removeOrphanedDocuments(t,a))).next(O=>(v=Date.now(),ba()<=Nt.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${O} documents in `+(v-p)+`ms
Total Duration: ${v-A}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:O})))}}function QR(s,t){return new KR(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.changes=new Cs(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Ke.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?Q.resolve(a):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(t,i,a,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(t,i){let a=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(a=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(a!==null&&ml(a.mutation,l,kn.empty(),be.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(a=>this.getLocalViewOfDocuments(t,a,Mt()).next(()=>a))}getLocalViewOfDocuments(t,i,a=Mt()){const l=Ts();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,a).next(c=>{let d=ul();return c.forEach((g,p)=>{d=d.insert(g,p.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const a=Ts();return this.populateOverlays(t,a,i).next(()=>this.computeViews(t,i,a,Mt()))}populateOverlays(t,i,a){const l=[];return a.forEach(c=>{i.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,a,l){let c=Bi();const d=dl(),g=function(){return dl()}();return i.forEach((p,v)=>{const A=a.get(v.key);l.has(v.key)&&(A===void 0||A.mutation instanceof Ds)?c=c.insert(v.key,v):A!==void 0?(d.set(v.key,A.mutation.getFieldMask()),ml(A.mutation,v,A.mutation.getFieldMask(),be.now())):d.set(v.key,kn.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((v,A)=>d.set(v,A)),i.forEach((v,A)=>{var O;return g.set(v,new YR(A,(O=d.get(v))!==null&&O!==void 0?O:null))}),g))}recalculateAndSaveOverlays(t,i){const a=dl();let l=new re((d,g)=>d-g),c=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(p=>{const v=i.get(p);if(v===null)return;let A=a.get(p)||kn.empty();A=g.applyToLocalView(v,A),a.set(p,A);const O=(l.get(g.batchId)||Mt()).add(p);l=l.insert(g.batchId,O)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),v=p.key,A=p.value,O=vE();A.forEach(x=>{if(!c.has(x)){const G=RE(i.get(x),a.get(x));G!==null&&O.set(x,G),c=c.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(t,v,O))}return Q.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,i,a,l){return function(d){return ht.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Jb(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,a,l):this.getDocumentsMatchingCollectionQuery(t,i,a,l)}getNextDocuments(t,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,a,l).next(c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,a.largestBatchId,l-c.size):Q.resolve(Ts());let g=_l,p=c;return d.next(v=>Q.forEach(v,(A,O)=>(g<O.largestBatchId&&(g=O.largestBatchId),c.get(A)?Q.resolve():this.remoteDocumentCache.getEntry(t,A).next(x=>{p=p.insert(A,x)}))).next(()=>this.populateOverlays(t,v,c)).next(()=>this.computeViews(t,p,v,Mt())).next(A=>({batchId:g,changes:yE(A)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new ht(i)).next(a=>{let l=ul();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,a,l){const c=i.collectionGroup;let d=ul();return this.indexManager.getCollectionParents(t,c).next(g=>Q.forEach(g,p=>{const v=function(O,x){return new Qc(x,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)}(i,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,v,a,l).next(A=>{A.forEach((O,x)=>{d=d.insert(O,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,a.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,a,c,l))).next(d=>{c.forEach((p,v)=>{const A=v.getKey();d.get(A)===null&&(d=d.insert(A,Ke.newInvalidDocument(A)))});let g=ul();return d.forEach((p,v)=>{const A=c.get(p);A!==void 0&&ml(A.mutation,v,kn.empty(),be.now()),Yc(i,v)&&(g=g.insert(p,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,i){return Q.resolve(this.dr.get(i))}saveBundleMetadata(t,i){return this.dr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:ri(l.createTime)}}(i)),Q.resolve()}getNamedQuery(t,i){return Q.resolve(this.Ar.get(i))}saveNamedQuery(t,i){return this.Ar.set(i.name,function(l){return{name:l.name,query:BR(l.bundledQuery),readTime:ri(l.readTime)}}(i)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.overlays=new re(ht.comparator),this.Rr=new Map}getOverlay(t,i){return Q.resolve(this.overlays.get(i))}getOverlays(t,i){const a=Ts();return Q.forEach(i,l=>this.getOverlay(t,l).next(c=>{c!==null&&a.set(l,c)})).next(()=>a)}saveOverlays(t,i,a){return a.forEach((l,c)=>{this.Et(t,i,c)}),Q.resolve()}removeOverlaysForBatchId(t,i,a){const l=this.Rr.get(a);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),Q.resolve()}getOverlaysForCollection(t,i,a){const l=Ts(),c=i.length+1,d=new ht(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,v=p.getKey();if(!i.isPrefixOf(v.path))break;v.path.length===c&&p.largestBatchId>a&&l.set(p.getKey(),p)}return Q.resolve(l)}getOverlaysForCollectionGroup(t,i,a,l){let c=new re((v,A)=>v-A);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===i&&v.largestBatchId>a){let A=c.get(v.largestBatchId);A===null&&(A=Ts(),c=c.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const g=Ts(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,A)=>g.set(v,A)),!(g.size()>=l)););return Q.resolve(g)}Et(t,i,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.Rr.get(l.largestBatchId).delete(a.key);this.Rr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new _R(i,a));let c=this.Rr.get(i);c===void 0&&(c=Mt(),this.Rr.set(i,c)),this.Rr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.Vr=new Re(Me.mr),this.gr=new Re(Me.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,i){const a=new Me(t,i);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,i){t.forEach(a=>this.addReference(a,i))}removeReference(t,i){this.wr(new Me(t,i))}Sr(t,i){t.forEach(a=>this.removeReference(a,i))}br(t){const i=new ht(new le([])),a=new Me(i,t),l=new Me(i,t+1),c=[];return this.gr.forEachInRange([a,l],d=>{this.wr(d),c.push(d.key)}),c}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const i=new ht(new le([])),a=new Me(i,t),l=new Me(i,t+1);let c=Mt();return this.gr.forEachInRange([a,l],d=>{c=c.add(d.key)}),c}containsKey(t){const i=new Me(t,0),a=this.Vr.firstAfterOrEqual(i);return a!==null&&t.isEqual(a.key)}}class Me{constructor(t,i){this.key=t,this.Cr=i}static mr(t,i){return ht.comparator(t.key,i.key)||Rt(t.Cr,i.Cr)}static pr(t,i){return Rt(t.Cr,i.Cr)||ht.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Fr=1,this.Mr=new Re(Me.mr)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,a,l){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new pR(c,i,a,l);this.mutationQueue.push(d);for(const g of l)this.Mr=this.Mr.add(new Me(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Q.resolve(d)}lookupMutationBatch(t,i){return Q.resolve(this.Or(i))}getNextMutationBatchAfterBatchId(t,i){const a=i+1,l=this.Nr(a),c=l<0?0:l;return Q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Jd:this.Fr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const a=new Me(i,0),l=new Me(i,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,l],d=>{const g=this.Or(d.Cr);c.push(g)}),Q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let a=new Re(Rt);return i.forEach(l=>{const c=new Me(l,0),d=new Me(l,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,d],g=>{a=a.add(g.Cr)})}),Q.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,i){const a=i.path,l=a.length+1;let c=a;ht.isDocumentKey(c)||(c=c.child(""));const d=new Me(new ht(c),0);let g=new Re(Rt);return this.Mr.forEachWhile(p=>{const v=p.key.path;return!!a.isPrefixOf(v)&&(v.length===l&&(g=g.add(p.Cr)),!0)},d),Q.resolve(this.Br(g))}Br(t){const i=[];return t.forEach(a=>{const l=this.Or(a);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){jt(this.Lr(i.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Q.forEach(i.mutations,l=>{const c=new Me(l.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,i){const a=new Me(i,0),l=this.Mr.firstAfterOrEqual(a);return Q.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}Lr(t,i){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const i=this.Nr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t){this.kr=t,this.docs=function(){return new re(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const a=i.key,l=this.docs.get(a),c=l?l.size:0,d=this.kr(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const a=this.docs.get(i);return Q.resolve(a?a.document.mutableCopy():Ke.newInvalidDocument(i))}getEntries(t,i){let a=Bi();return i.forEach(l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():Ke.newInvalidDocument(l))}),Q.resolve(a)}getDocumentsMatchingQuery(t,i,a,l){let c=Bi();const d=i.path,g=new ht(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:v,value:{document:A}}=p.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||Ob(Db(A),a)<=0||(l.has(A.key)||Yc(i,A))&&(c=c.insert(A.key,A.mutableCopy()))}return Q.resolve(c)}getAllFromCollectionGroup(t,i,a,l){pt()}qr(t,i){return Q.forEach(this.docs,a=>i(a))}newChangeBuffer(t){return new nw(this)}getSize(t){return Q.resolve(this.size)}}class nw extends XR{constructor(t){super(),this.Ir=t}applyChanges(t){const i=[];return this.changes.forEach((a,l)=>{l.isValidDocument()?i.push(this.Ir.addEntry(t,l)):this.Ir.removeEntry(a)}),Q.waitFor(i)}getFromCache(t,i){return this.Ir.getEntry(t,i)}getAllFromCache(t,i){return this.Ir.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t){this.persistence=t,this.Qr=new Cs(i=>nm(i),im),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.$r=0,this.Ur=new um,this.targetCount=0,this.Kr=xa.Un()}forEachTarget(t,i){return this.Qr.forEach((a,l)=>i(l)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.$r&&(this.$r=i),Q.resolve()}zn(t){this.Qr.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.Kr=new xa(i),this.highestTargetId=i),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,i){return this.zn(i),this.targetCount+=1,Q.resolve()}updateTargetData(t,i){return this.zn(i),Q.resolve()}removeTargetData(t,i){return this.Qr.delete(i.target),this.Ur.br(i.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,i,a){let l=0;const c=[];return this.Qr.forEach((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.Qr.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),Q.waitFor(c).next(()=>l)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,i){const a=this.Qr.get(i)||null;return Q.resolve(a)}addMatchingKeys(t,i,a){return this.Ur.yr(i,a),Q.resolve()}removeMatchingKeys(t,i,a){this.Ur.Sr(i,a);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach(d=>{c.push(l.markPotentiallyOrphaned(t,d))}),Q.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this.Ur.br(i),Q.resolve()}getMatchingKeysForTargetId(t,i){const a=this.Ur.vr(i);return Q.resolve(a)}containsKey(t,i){return Q.resolve(this.Ur.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(t,i){this.Wr={},this.overlays={},this.Gr=new Gc(0),this.zr=!1,this.zr=!0,this.jr=new JR,this.referenceDelegate=t(this),this.Hr=new iw(this),this.indexManager=new qR,this.remoteDocumentCache=function(l){return new ew(l)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new zR(i),this.Yr=new ZR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new WR,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let a=this.Wr[t.toKey()];return a||(a=new tw(i,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,i,a){it("MemoryPersistence","Starting transaction:",t);const l=new rw(this.Gr.next());return this.referenceDelegate.Zr(),a(l).next(c=>this.referenceDelegate.Xr(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}ei(t,i){return Q.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,i)))}}class rw extends Mb{constructor(t){super(),this.currentSequenceNumber=t}}class cm{constructor(t){this.persistence=t,this.ti=new um,this.ni=null}static ri(t){return new cm(t)}get ii(){if(this.ni)return this.ni;throw pt()}addReference(t,i,a){return this.ti.addReference(a,i),this.ii.delete(a.toString()),Q.resolve()}removeReference(t,i,a){return this.ti.removeReference(a,i),this.ii.add(a.toString()),Q.resolve()}markPotentiallyOrphaned(t,i){return this.ii.add(i.toString()),Q.resolve()}removeTarget(t,i){this.ti.br(i.targetId).forEach(l=>this.ii.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(t,i))}Zr(){this.ni=new Set}Xr(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.ii,a=>{const l=ht.fromPath(a);return this.si(t,l).next(c=>{c||i.removeEntry(l,Et.min())})}).next(()=>(this.ni=null,i.apply(t)))}updateLimboDocument(t,i){return this.si(t,i).next(a=>{a?this.ii.delete(i.toString()):this.ii.add(i.toString())})}Jr(t){return 0}si(t,i){return Q.or([()=>Q.resolve(this.ti.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.ei(t,i)])}}class Vc{constructor(t,i){this.persistence=t,this.oi=new Cs(a=>Ub(a.path),(a,l)=>a.isEqual(l)),this.garbageCollector=QR(this,i)}static ri(t,i){return new Vc(t,i)}Zr(){}Xr(t){return Q.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}nr(t){const i=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>i.next(l=>a+l))}sr(t){let i=0;return this.rr(t,a=>{i++}).next(()=>i)}rr(t,i){return Q.forEach(this.oi,(a,l)=>this.ar(t,a,l).next(c=>c?Q.resolve():i(l)))}removeTargets(t,i,a){return this.persistence.getTargetCache().removeTargets(t,i,a)}removeOrphanedDocuments(t,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.qr(t,d=>this.ar(t,d,i).next(g=>{g||(a++,c.removeEntry(d,Et.min()))})).next(()=>c.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,i){return this.oi.set(i,t.currentSequenceNumber),Q.resolve()}removeTarget(t,i){const a=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,i,a){return this.oi.set(a,t.currentSequenceNumber),Q.resolve()}removeReference(t,i,a){return this.oi.set(a,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,i){return this.oi.set(i,t.currentSequenceNumber),Q.resolve()}Jr(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=gc(t.data.value)),i}ar(t,i,a){return Q.or([()=>this.persistence.ei(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.oi.get(i);return Q.resolve(l!==void 0&&l>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t,i,a,l){this.targetId=t,this.fromCache=i,this.Hi=a,this.Ji=l}static Yi(t,i){let a=Mt(),l=Mt();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new hm(t,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return JA()?8:Vb(Qe())>0?6:4}()}initialize(t,i){this.ns=t,this.indexManager=i,this.Zi=!0}getDocumentsMatchingQuery(t,i,a,l){const c={result:null};return this.rs(t,i).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ss(t,i,l,a).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new sw;return this._s(t,i,d).next(g=>{if(c.result=g,this.Xi)return this.us(t,i,d,g.size)})}).next(()=>c.result)}us(t,i,a,l){return a.documentReadCount<this.es?(ba()<=Nt.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",Ra(i),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Q.resolve()):(ba()<=Nt.DEBUG&&it("QueryEngine","Query:",Ra(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.ts*l?(ba()<=Nt.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",Ra(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ii(i))):Q.resolve())}rs(t,i){if(Vy(i))return Q.resolve(null);let a=ii(i);return this.indexManager.getIndexType(t,a).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=Ud(i,null,"F"),a=ii(i)),this.indexManager.getDocumentsMatchingTarget(t,a).next(c=>{const d=Mt(...c);return this.ns.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,a).next(p=>{const v=this.cs(i,g);return this.ls(i,v,d,p.readTime)?this.rs(t,Ud(i,null,"F")):this.hs(t,v,i,p)}))})))}ss(t,i,a,l){return Vy(i)||l.isEqual(Et.min())?Q.resolve(null):this.ns.getDocuments(t,a).next(c=>{const d=this.cs(i,c);return this.ls(i,d,a,l)?Q.resolve(null):(ba()<=Nt.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ra(i)),this.hs(t,d,i,Cb(l,_l)).next(g=>g))})}cs(t,i){let a=new Re(pE(t));return i.forEach((l,c)=>{Yc(t,c)&&(a=a.add(c))}),a}ls(t,i,a,l){if(t.limit===null)return!1;if(a.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}_s(t,i,a){return ba()<=Nt.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",Ra(i)),this.ns.getDocumentsMatchingQuery(t,i,Or.min(),a)}hs(t,i,a,l){return this.ns.getDocumentsMatchingQuery(t,a,l).next(c=>(i.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="LocalStore",ow=3e8;class lw{constructor(t,i,a,l){this.persistence=t,this.Ps=i,this.serializer=l,this.Ts=new re(Rt),this.Is=new Cs(c=>nm(c),im),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new $R(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ts))}}function uw(s,t,i,a){return new lw(s,t,i,a)}async function BE(s,t){const i=Tt(s);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next(c=>(l=c,i.As(t),i.mutationQueue.getAllMutationBatches(a))).next(c=>{const d=[],g=[];let p=Mt();for(const v of l){d.push(v.batchId);for(const A of v.mutations)p=p.add(A.key)}for(const v of c){g.push(v.batchId);for(const A of v.mutations)p=p.add(A.key)}return i.localDocuments.getDocuments(a,p).next(v=>({Rs:v,removedBatchIds:d,addedBatchIds:g}))})})}function cw(s,t){const i=Tt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=t.batch.keys(),c=i.ds.newChangeBuffer({trackRemovals:!0});return function(g,p,v,A){const O=v.batch,x=O.keys();let G=Q.resolve();return x.forEach(W=>{G=G.next(()=>A.getEntry(p,W)).next(nt=>{const Z=v.docVersions.get(W);jt(Z!==null),nt.version.compareTo(Z)<0&&(O.applyToRemoteDocument(nt,v),nt.isValidDocument()&&(nt.setReadTime(v.commitVersion),A.addEntry(nt)))})}),G.next(()=>g.mutationQueue.removeMutationBatch(p,O))}(i,a,t,c).next(()=>c.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let p=Mt();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(p=p.add(g.batch.mutations[v].key));return p}(t))).next(()=>i.localDocuments.getDocuments(a,l))})}function qE(s){const t=Tt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Hr.getLastRemoteSnapshotVersion(i))}function hw(s,t){const i=Tt(s),a=t.snapshotVersion;let l=i.Ts;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=i.ds.newChangeBuffer({trackRemovals:!0});l=i.Ts;const g=[];t.targetChanges.forEach((A,O)=>{const x=l.get(O);if(!x)return;g.push(i.Hr.removeMatchingKeys(c,A.removedDocuments,O).next(()=>i.Hr.addMatchingKeys(c,A.addedDocuments,O)));let G=x.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(O)!==null?G=G.withResumeToken(Be.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,a)),l=l.insert(O,G),function(nt,Z,At){return nt.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-nt.snapshotVersion.toMicroseconds()>=ow?!0:At.addedDocuments.size+At.modifiedDocuments.size+At.removedDocuments.size>0}(x,G,A)&&g.push(i.Hr.updateTargetData(c,G))});let p=Bi(),v=Mt();if(t.documentUpdates.forEach(A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,A))}),g.push(fw(c,d,t.documentUpdates).next(A=>{p=A.Vs,v=A.fs})),!a.isEqual(Et.min())){const A=i.Hr.getLastRemoteSnapshotVersion(c).next(O=>i.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));g.push(A)}return Q.waitFor(g).next(()=>d.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,p,v)).next(()=>p)}).then(c=>(i.Ts=l,c))}function fw(s,t,i){let a=Mt(),l=Mt();return i.forEach(c=>a=a.add(c)),t.getEntries(s,a).next(c=>{let d=Bi();return i.forEach((g,p)=>{const v=c.get(g);p.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(Et.min())?(t.removeEntry(g,p.readTime),d=d.insert(g,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(p),d=d.insert(g,p)):it(fm,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",p.version)}),{Vs:d,fs:l}})}function dw(s,t){const i=Tt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=Jd),i.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function mw(s,t){const i=Tt(s);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return i.Hr.getTargetData(a,t).next(c=>c?(l=c,Q.resolve(l)):i.Hr.allocateTargetId(a).next(d=>(l=new Sr(t,d,"TargetPurposeListen",a.currentSequenceNumber),i.Hr.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=i.Ts.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ts=i.Ts.insert(a.targetId,a),i.Is.set(t,a.targetId)),a})}async function Bd(s,t,i){const a=Tt(s),l=a.Ts.get(t),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,d=>a.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!Fa(d))throw d;it(fm,`Failed to update sequence numbers for target ${t}: ${d}`)}a.Ts=a.Ts.remove(t),a.Is.delete(l.target)}function Ky(s,t,i){const a=Tt(s);let l=Et.min(),c=Mt();return a.persistence.runTransaction("Execute query","readwrite",d=>function(p,v,A){const O=Tt(p),x=O.Is.get(A);return x!==void 0?Q.resolve(O.Ts.get(x)):O.Hr.getTargetData(v,A)}(a,d,ii(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(d,g.targetId).next(p=>{c=p})}).next(()=>a.Ps.getDocumentsMatchingQuery(d,t,i?l:Et.min(),i?c:Mt())).next(g=>(gw(a,eR(t),g),{documents:g,gs:c})))}function gw(s,t,i){let a=s.Es.get(t)||Et.min();i.forEach((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),s.Es.set(t,a)}class Qy{constructor(){this.activeTargetIds=oR()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pw{constructor(){this.ho=new Qy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,a){}addLocalQueryTarget(t,i=!0){return i&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,i,a){this.Po[t]=i}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Qy,Promise.resolve()}handleUserChange(t,i,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="ConnectivityMonitor";class Yy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){it(Xy,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){it(Xy,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc=null;function qd(){return cc===null?cc=function(){return 268435456+Math.round(2147483648*Math.random())}():cc++,"0x"+cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="RestConnection",yw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vw{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=i+"://"+t.host,this.yo=`projects/${a}/databases/${l}`,this.wo=this.databaseId.database===wc?`project_id=${a}`:`project_id=${a}&database_id=${l}`}So(t,i,a,l,c){const d=qd(),g=this.bo(t,i.toUriEncodedString());it(vd,`Sending RPC '${t}' ${d}:`,g,a);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,l,c),this.vo(t,g,p,a).then(v=>(it(vd,`Received RPC '${t}' ${d}: `,v),v),v=>{throw Pa(vd,`RPC '${t}' ${d} failed with error: `,v,"url: ",g,"request:",a),v})}Co(t,i,a,l,c,d){return this.So(t,i,a,l,c)}Do(t,i,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ja}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),a&&a.headers.forEach((l,c)=>t[c]=l)}bo(t,i){const a=yw[t];return`${this.po}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class Tw extends vw{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,i,a,l){const c=qd();return new Promise((d,g)=>{const p=new Fv;p.setWithCredentials(!0),p.listenOnce(Kv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case mc.NO_ERROR:const A=p.getResponseJson();it(Ge,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(A)),d(A);break;case mc.TIMEOUT:it(Ge,`RPC '${t}' ${c} timed out`),g(new ct(Y.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const O=p.getStatus();if(it(Ge,`RPC '${t}' ${c} failed with status:`,O,"response text:",p.getResponseText()),O>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const G=x==null?void 0:x.error;if(G&&G.status&&G.message){const W=function(Z){const At=Z.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(At)>=0?At:Y.UNKNOWN}(G.status);g(new ct(W,G.message))}else g(new ct(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ct(Y.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{it(Ge,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(l);it(Ge,`RPC '${t}' ${c} sending request:`,l),p.send(i,"POST",v,a,15)})}Wo(t,i,a){const l=qd(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=Yv(),g=Xv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,i,a),p.encodeInitMessageHeaders=!0;const A=c.join("");it(Ge,`Creating RPC '${t}' stream ${l}: ${A}`,p);const O=d.createWebChannel(A,p);let x=!1,G=!1;const W=new Ew({Fo:Z=>{G?it(Ge,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(x||(it(Ge,`Opening RPC '${t}' stream ${l} transport.`),O.open(),x=!0),it(Ge,`RPC '${t}' stream ${l} sending:`,Z),O.send(Z))},Mo:()=>O.close()}),nt=(Z,At,_t)=>{Z.listen(At,lt=>{try{_t(lt)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return nt(O,ll.EventType.OPEN,()=>{G||(it(Ge,`RPC '${t}' stream ${l} transport opened.`),W.Qo())}),nt(O,ll.EventType.CLOSE,()=>{G||(G=!0,it(Ge,`RPC '${t}' stream ${l} transport closed`),W.Uo())}),nt(O,ll.EventType.ERROR,Z=>{G||(G=!0,Pa(Ge,`RPC '${t}' stream ${l} transport errored:`,Z),W.Uo(new ct(Y.UNAVAILABLE,"The operation could not be completed")))}),nt(O,ll.EventType.MESSAGE,Z=>{var At;if(!G){const _t=Z.data[0];jt(!!_t);const lt=_t,Vt=(lt==null?void 0:lt.error)||((At=lt[0])===null||At===void 0?void 0:At.error);if(Vt){it(Ge,`RPC '${t}' stream ${l} received error:`,Vt);const gt=Vt.status;let wt=function(w){const N=_e[w];if(N!==void 0)return CE(N)}(gt),M=Vt.message;wt===void 0&&(wt=Y.INTERNAL,M="Unknown error status: "+gt+" with message "+Vt.message),G=!0,W.Uo(new ct(wt,M)),O.close()}else it(Ge,`RPC '${t}' stream ${l} received:`,_t),W.Ko(_t)}}),nt(g,Qv.STAT_EVENT,Z=>{Z.stat===Dd.PROXY?it(Ge,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===Dd.NOPROXY&&it(Ge,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{W.$o()},0),W}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(s){return new RR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(t,i,a=1e3,l=1.5,c=6e4){this.Ti=t,this.timerId=i,this.Go=a,this.zo=l,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const i=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),l=Math.max(0,i-a);l>0&&it("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ho} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,l,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="PersistentStream";class jE{constructor(t,i,a,l,c,d,g,p){this.Ti=t,this.n_=a,this.r_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new HE(t,i)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,i){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():i&&i.code===Y.RESOURCE_EXHAUSTED?(zi(i.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):i&&i.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(i)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),i=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,l])=>{this.i_===i&&this.V_(a,l)},a=>{t(()=>{const l=new ct(Y.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(l)})})}V_(t,i){const a=this.R_(this.i_);this.stream=this.f_(t,i),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(l=>{a(()=>this.m_(l))}),this.stream.onMessage(l=>{a(()=>++this.__==1?this.g_(l):this.onNext(l))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return it($y,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return i=>{this.Ti.enqueueAndForget(()=>this.i_===t?i():(it($y,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Aw extends jE{constructor(t,i,a,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,d),this.serializer=c}f_(t,i){return this.connection.Wo("Listen",t,i)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const i=CR(this.serializer,t),a=function(c){if(!("targetChange"in c))return Et.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Et.min():d.readTime?ri(d.readTime):Et.min()}(t);return this.listener.p_(i,a)}y_(t){const i={};i.database=zd(this.serializer),i.addTarget=function(c,d){let g;const p=d.target;if(g=Pd(p)?{documents:NR(c,p)}:{query:MR(c,p).ht},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=NE(c,d.resumeToken);const v=kd(c,d.expectedCount);v!==null&&(g.expectedCount=v)}else if(d.snapshotVersion.compareTo(Et.min())>0){g.readTime=Mc(c,d.snapshotVersion.toTimestamp());const v=kd(c,d.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,t);const a=PR(this.serializer,t);a&&(i.labels=a),this.I_(i)}w_(t){const i={};i.database=zd(this.serializer),i.removeTarget=t,this.I_(i)}}class Sw extends jE{constructor(t,i,a,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,d),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,i){return this.connection.Wo("Write",t,i)}g_(t){return jt(!!t.streamToken),this.lastStreamToken=t.streamToken,jt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){jt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const i=OR(t.writeResults,t.commitTime),a=ri(t.commitTime);return this.listener.v_(a,i)}C_(){const t={};t.database=zd(this.serializer),this.I_(t)}b_(t){const i={streamToken:this.lastStreamToken,writes:t.map(a=>DR(this.serializer,a))};this.I_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{}class Rw extends bw{constructor(t,i,a,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.F_=!1}M_(){if(this.F_)throw new ct(Y.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,i,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.So(t,Ld(i,a),l,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct(Y.UNKNOWN,c.toString())})}Co(t,i,a,l,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Co(t,Ld(i,a),l,d,g,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ct(Y.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class ww{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(zi(i),this.N_=!1):it("OnlineStateTracker",i)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="RemoteStore";class Iw{constructor(t,i,a,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(d=>{a.enqueueAndForget(async()=>{Os(this)&&(it(Rs,"Restarting streams for network reachability change."),await async function(p){const v=Tt(p);v.W_.add(4),await Nl(v),v.j_.set("Unknown"),v.W_.delete(4),await th(v)}(this))})}),this.j_=new ww(a,l)}}async function th(s){if(Os(s))for(const t of s.G_)await t(!0)}async function Nl(s){for(const t of s.G_)await t(!1)}function GE(s,t){const i=Tt(s);i.K_.has(t.targetId)||(i.K_.set(t.targetId,t),pm(i)?gm(i):Ka(i).c_()&&mm(i,t))}function dm(s,t){const i=Tt(s),a=Ka(i);i.K_.delete(t),a.c_()&&FE(i,t),i.K_.size===0&&(a.c_()?a.P_():Os(i)&&i.j_.set("Unknown"))}function mm(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ka(s).y_(t)}function FE(s,t){s.H_.Ne(t),Ka(s).w_(t)}function gm(s){s.H_=new TR({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),Ka(s).start(),s.j_.B_()}function pm(s){return Os(s)&&!Ka(s).u_()&&s.K_.size>0}function Os(s){return Tt(s).W_.size===0}function KE(s){s.H_=void 0}async function Cw(s){s.j_.set("Online")}async function Dw(s){s.K_.forEach((t,i)=>{mm(s,t)})}async function Ow(s,t){KE(s),pm(s)?(s.j_.q_(t),gm(s)):s.j_.set("Unknown")}async function Nw(s,t,i){if(s.j_.set("Online"),t instanceof OE&&t.state===2&&t.cause)try{await async function(l,c){const d=c.cause;for(const g of c.targetIds)l.K_.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.K_.delete(g),l.H_.removeTarget(g))}(s,t)}catch(a){it(Rs,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Pc(s,a)}else if(t instanceof yc?s.H_.We(t):t instanceof DE?s.H_.Ze(t):s.H_.je(t),!i.isEqual(Et.min()))try{const a=await qE(s.localStore);i.compareTo(a)>=0&&await function(c,d){const g=c.H_.ot(d);return g.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const A=c.K_.get(v);A&&c.K_.set(v,A.withResumeToken(p.resumeToken,d))}}),g.targetMismatches.forEach((p,v)=>{const A=c.K_.get(p);if(!A)return;c.K_.set(p,A.withResumeToken(Be.EMPTY_BYTE_STRING,A.snapshotVersion)),FE(c,p);const O=new Sr(A.target,p,v,A.sequenceNumber);mm(c,O)}),c.remoteSyncer.applyRemoteEvent(g)}(s,i)}catch(a){it(Rs,"Failed to raise snapshot:",a),await Pc(s,a)}}async function Pc(s,t,i){if(!Fa(t))throw t;s.W_.add(1),await Nl(s),s.j_.set("Offline"),i||(i=()=>qE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{it(Rs,"Retrying IndexedDB access"),await i(),s.W_.delete(1),await th(s)})}function QE(s,t){return t().catch(i=>Pc(s,i,t))}async function eh(s){const t=Tt(s),i=Pr(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:Jd;for(;Mw(t);)try{const l=await dw(t.localStore,a);if(l===null){t.U_.length===0&&i.P_();break}a=l.batchId,Vw(t,l)}catch(l){await Pc(t,l)}XE(t)&&YE(t)}function Mw(s){return Os(s)&&s.U_.length<10}function Vw(s,t){s.U_.push(t);const i=Pr(s);i.c_()&&i.S_&&i.b_(t.mutations)}function XE(s){return Os(s)&&!Pr(s).u_()&&s.U_.length>0}function YE(s){Pr(s).start()}async function Pw(s){Pr(s).C_()}async function Uw(s){const t=Pr(s);for(const i of s.U_)t.b_(i.mutations)}async function kw(s,t,i){const a=s.U_.shift(),l=am.from(a,t,i);await QE(s,()=>s.remoteSyncer.applySuccessfulWrite(l)),await eh(s)}async function Lw(s,t){t&&Pr(s).S_&&await async function(a,l){if(function(d){return vR(d)&&d!==Y.ABORTED}(l.code)){const c=a.U_.shift();Pr(a).h_(),await QE(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l)),await eh(a)}}(s,t),XE(s)&&YE(s)}async function Zy(s,t){const i=Tt(s);i.asyncQueue.verifyOperationInProgress(),it(Rs,"RemoteStore received new credentials");const a=Os(i);i.W_.add(3),await Nl(i),a&&i.j_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.W_.delete(3),await th(i)}async function xw(s,t){const i=Tt(s);t?(i.W_.delete(2),await th(i)):t||(i.W_.add(2),await Nl(i),i.j_.set("Unknown"))}function Ka(s){return s.J_||(s.J_=function(i,a,l){const c=Tt(i);return c.M_(),new Aw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(s.datastore,s.asyncQueue,{xo:Cw.bind(null,s),No:Dw.bind(null,s),Lo:Ow.bind(null,s),p_:Nw.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),pm(s)?gm(s):s.j_.set("Unknown")):(await s.J_.stop(),KE(s))})),s.J_}function Pr(s){return s.Y_||(s.Y_=function(i,a,l){const c=Tt(i);return c.M_(),new Sw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:Pw.bind(null,s),Lo:Lw.bind(null,s),D_:Uw.bind(null,s),v_:kw.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await eh(s)):(await s.Y_.stop(),s.U_.length>0&&(it(Rs,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t,i,a,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,a,l,c){const d=Date.now()+a,g=new _m(t,i,d,l,c);return g.start(a),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(s,t){if(zi("AsyncQueue",`${t}: ${s}`),Fa(s))return new ct(Y.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(t){return new Da(t.comparator)}constructor(t){this.comparator=t?(i,a)=>t(i,a)||ht.comparator(i.key,a.key):(i,a)=>ht.comparator(i.key,a.key),this.keyedMap=ul(),this.sortedSet=new re(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,a)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Da)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const a=new Da;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.Z_=new re(ht.comparator)}track(t){const i=t.doc.key,a=this.Z_.get(i);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(i,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(i,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(i,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(i,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(i):t.type===1&&a.type===2?this.Z_=this.Z_.insert(i,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(i,{type:2,doc:t.doc}):pt():this.Z_=this.Z_.insert(i,t)}X_(){const t=[];return this.Z_.inorderTraversal((i,a)=>{t.push(a)}),t}}class za{constructor(t,i,a,l,c,d,g,p,v){this.query=t,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(t,i,a,l,c){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new za(t,i,Da.emptySet(i),d,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,a=t.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class Bw{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(i,a){const l=Tt(i),c=l.queries;l.queries=Jy(),c.forEach((d,g)=>{for(const p of g.ta)p.onError(a)})})(this,new ct(Y.ABORTED,"Firestore shutting down"))}}function Jy(){return new Cs(s=>gE(s),Xc)}async function qw(s,t){const i=Tt(s);let a=3;const l=t.query;let c=i.queries.get(l);c?!c.na()&&t.ra()&&(a=2):(c=new zw,a=t.ra()?0:1);try{switch(a){case 0:c.ea=await i.onListen(l,!0);break;case 1:c.ea=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=ym(d,`Initialization of query '${Ra(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,c),c.ta.push(t),t.sa(i.onlineState),c.ea&&t.oa(c.ea)&&vm(i)}async function Hw(s,t){const i=Tt(s),a=t.query;let l=3;const c=i.queries.get(a);if(c){const d=c.ta.indexOf(t);d>=0&&(c.ta.splice(d,1),c.ta.length===0?l=t.ra()?0:1:!c.na()&&t.ra()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function jw(s,t){const i=Tt(s);let a=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const g of d.ta)g.oa(l)&&(a=!0);d.ea=l}}a&&vm(i)}function Gw(s,t,i){const a=Tt(s),l=a.queries.get(t);if(l)for(const c of l.ta)c.onError(i);a.queries.delete(t)}function vm(s){s.ia.forEach(t=>{t.next()})}var Hd,tv;(tv=Hd||(Hd={}))._a="default",tv.Cache="cache";class Fw{constructor(t,i,a){this.query=t,this.aa=i,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const l of t.docChanges)l.type!==3&&a.push(l);t=new za(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.ua?this.la(t)&&(this.aa.next(t),i=!0):this.ha(t,this.onlineState)&&(this.Pa(t),i=!0),this.ca=t,i}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let i=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),i=!0),i}ha(t,i){if(!t.fromCache||!this.ra())return!0;const a=i!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}la(t){if(t.docChanges.length>0)return!0;const i=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Pa(t){t=za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this.key=t}}class ZE{constructor(t){this.key=t}}class Kw{constructor(t,i){this.query=t,this.fa=i,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Mt(),this.mutatedKeys=Mt(),this.ya=pE(t),this.wa=new Da(this.ya)}get Sa(){return this.fa}ba(t,i){const a=i?i.Da:new Wy,l=i?i.wa:this.wa;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((A,O)=>{const x=l.get(A),G=Yc(this.query,O)?O:null,W=!!x&&this.mutatedKeys.has(x.key),nt=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Z=!1;x&&G?x.data.isEqual(G.data)?W!==nt&&(a.track({type:3,doc:G}),Z=!0):this.va(x,G)||(a.track({type:2,doc:G}),Z=!0,(p&&this.ya(G,p)>0||v&&this.ya(G,v)<0)&&(g=!0)):!x&&G?(a.track({type:0,doc:G}),Z=!0):x&&!G&&(a.track({type:1,doc:x}),Z=!0,(p||v)&&(g=!0)),Z&&(G?(d=d.add(G),c=nt?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),a.track({type:1,doc:A})}return{wa:d,Da:a,ls:g,mutatedKeys:c}}va(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,a,l){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const d=t.Da.X_();d.sort((A,O)=>function(G,W){const nt=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return nt(G)-nt(W)}(A.type,O.type)||this.ya(A.doc,O.doc)),this.Ca(a),l=l!=null&&l;const g=i&&!l?this.Fa():[],p=this.pa.size===0&&this.current&&!l?1:0,v=p!==this.ga;return this.ga=p,d.length!==0||v?{snapshot:new za(this.query,t.wa,c,d,t.mutatedKeys,p===0,v,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:g}:{Ma:g}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Wy,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(i=>this.fa=this.fa.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.fa=this.fa.delete(i)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Mt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const i=[];return t.forEach(a=>{this.pa.has(a)||i.push(new ZE(a))}),this.pa.forEach(a=>{t.has(a)||i.push(new $E(a))}),i}Oa(t){this.fa=t.gs,this.pa=Mt();const i=this.ba(t.documents);return this.applyChanges(i,!0)}Na(){return za.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Em="SyncEngine";class Qw{constructor(t,i,a){this.query=t,this.targetId=i,this.view=a}}class Xw{constructor(t){this.key=t,this.Ba=!1}}class Yw{constructor(t,i,a,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Cs(g=>gE(g),Xc),this.qa=new Map,this.Qa=new Set,this.$a=new re(ht.comparator),this.Ua=new Map,this.Ka=new um,this.Wa={},this.Ga=new Map,this.za=xa.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function $w(s,t,i=!0){const a=iT(s);let l;const c=a.ka.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.Na()):l=await WE(a,t,i,!0),l}async function Zw(s,t){const i=iT(s);await WE(i,t,!0,!1)}async function WE(s,t,i,a){const l=await mw(s.localStore,ii(t)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,i);let g;return a&&(g=await Ww(s,t,c,d==="current",l.resumeToken)),s.isPrimaryClient&&i&&GE(s.remoteStore,l),g}async function Ww(s,t,i,a,l){s.Ha=(O,x,G)=>async function(nt,Z,At,_t){let lt=Z.view.ba(At);lt.ls&&(lt=await Ky(nt.localStore,Z.query,!1).then(({documents:M})=>Z.view.ba(M,lt)));const Vt=_t&&_t.targetChanges.get(Z.targetId),gt=_t&&_t.targetMismatches.get(Z.targetId)!=null,wt=Z.view.applyChanges(lt,nt.isPrimaryClient,Vt,gt);return nv(nt,Z.targetId,wt.Ma),wt.snapshot}(s,O,x,G);const c=await Ky(s.localStore,t,!0),d=new Kw(t,c.gs),g=d.ba(c.documents),p=Ol.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",l),v=d.applyChanges(g,s.isPrimaryClient,p);nv(s,i,v.Ma);const A=new Qw(t,i,d);return s.ka.set(t,A),s.qa.has(i)?s.qa.get(i).push(t):s.qa.set(i,[t]),v.snapshot}async function Jw(s,t,i){const a=Tt(s),l=a.ka.get(t),c=a.qa.get(l.targetId);if(c.length>1)return a.qa.set(l.targetId,c.filter(d=>!Xc(d,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await Bd(a.localStore,l.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(l.targetId),i&&dm(a.remoteStore,l.targetId),jd(a,l.targetId)}).catch(Ga)):(jd(a,l.targetId),await Bd(a.localStore,l.targetId,!0))}async function t1(s,t){const i=Tt(s),a=i.ka.get(t),l=i.qa.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),dm(i.remoteStore,a.targetId))}async function e1(s,t,i){const a=l1(s);try{const l=await function(d,g){const p=Tt(d),v=be.now(),A=g.reduce((G,W)=>G.add(W.key),Mt());let O,x;return p.persistence.runTransaction("Locally write mutations","readwrite",G=>{let W=Bi(),nt=Mt();return p.ds.getEntries(G,A).next(Z=>{W=Z,W.forEach((At,_t)=>{_t.isValidDocument()||(nt=nt.add(At))})}).next(()=>p.localDocuments.getOverlayedDocuments(G,W)).next(Z=>{O=Z;const At=[];for(const _t of g){const lt=mR(_t,O.get(_t.key).overlayedDocument);lt!=null&&At.push(new Ds(_t.key,lt,lE(lt.value.mapValue),Li.exists(!0)))}return p.mutationQueue.addMutationBatch(G,v,At,g)}).next(Z=>{x=Z;const At=Z.applyToLocalDocumentSet(O,nt);return p.documentOverlayCache.saveOverlays(G,Z.batchId,At)})}).then(()=>({batchId:x.batchId,changes:yE(O)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(l.batchId),function(d,g,p){let v=d.Wa[d.currentUser.toKey()];v||(v=new re(Rt)),v=v.insert(g,p),d.Wa[d.currentUser.toKey()]=v}(a,l.batchId,i),await Ml(a,l.changes),await eh(a.remoteStore)}catch(l){const c=ym(l,"Failed to persist write");i.reject(c)}}async function JE(s,t){const i=Tt(s);try{const a=await hw(i.localStore,t);t.targetChanges.forEach((l,c)=>{const d=i.Ua.get(c);d&&(jt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?d.Ba=!0:l.modifiedDocuments.size>0?jt(d.Ba):l.removedDocuments.size>0&&(jt(d.Ba),d.Ba=!1))}),await Ml(i,a,t)}catch(a){await Ga(a)}}function ev(s,t,i){const a=Tt(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.ka.forEach((c,d)=>{const g=d.view.sa(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const p=Tt(d);p.onlineState=g;let v=!1;p.queries.forEach((A,O)=>{for(const x of O.ta)x.sa(g)&&(v=!0)}),v&&vm(p)}(a.eventManager,t),l.length&&a.La.p_(l),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function n1(s,t,i){const a=Tt(s);a.sharedClientState.updateQueryState(t,"rejected",i);const l=a.Ua.get(t),c=l&&l.key;if(c){let d=new re(ht.comparator);d=d.insert(c,Ke.newNoDocument(c,Et.min()));const g=Mt().add(c),p=new Wc(Et.min(),new Map,new re(Rt),d,g);await JE(a,p),a.$a=a.$a.remove(c),a.Ua.delete(t),Tm(a)}else await Bd(a.localStore,t,!1).then(()=>jd(a,t,i)).catch(Ga)}async function i1(s,t){const i=Tt(s),a=t.batch.batchId;try{const l=await cw(i.localStore,t);eT(i,a,null),tT(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Ml(i,l)}catch(l){await Ga(l)}}async function r1(s,t,i){const a=Tt(s);try{const l=await function(d,g){const p=Tt(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let A;return p.mutationQueue.lookupMutationBatch(v,g).next(O=>(jt(O!==null),A=O.keys(),p.mutationQueue.removeMutationBatch(v,O))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,A,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,A)).next(()=>p.localDocuments.getDocuments(v,A))})}(a.localStore,t);eT(a,t,i),tT(a,t),a.sharedClientState.updateMutationState(t,"rejected",i),await Ml(a,l)}catch(l){await Ga(l)}}function tT(s,t){(s.Ga.get(t)||[]).forEach(i=>{i.resolve()}),s.Ga.delete(t)}function eT(s,t,i){const a=Tt(s);let l=a.Wa[a.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),a.Wa[a.currentUser.toKey()]=l}}function jd(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.qa.get(t))s.ka.delete(a),i&&s.La.Ja(a,i);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(a=>{s.Ka.containsKey(a)||nT(s,a)})}function nT(s,t){s.Qa.delete(t.path.canonicalString());const i=s.$a.get(t);i!==null&&(dm(s.remoteStore,i),s.$a=s.$a.remove(t),s.Ua.delete(i),Tm(s))}function nv(s,t,i){for(const a of i)a instanceof $E?(s.Ka.addReference(a.key,t),s1(s,a)):a instanceof ZE?(it(Em,"Document no longer in limbo: "+a.key),s.Ka.removeReference(a.key,t),s.Ka.containsKey(a.key)||nT(s,a.key)):pt()}function s1(s,t){const i=t.key,a=i.path.canonicalString();s.$a.get(i)||s.Qa.has(a)||(it(Em,"New document in limbo: "+i),s.Qa.add(a),Tm(s))}function Tm(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const i=new ht(le.fromString(t)),a=s.za.next();s.Ua.set(a,new Xw(i)),s.$a=s.$a.insert(i,a),GE(s.remoteStore,new Sr(ii(rm(i.path)),a,"TargetPurposeLimboResolution",Gc.ae))}}async function Ml(s,t,i){const a=Tt(s),l=[],c=[],d=[];a.ka.isEmpty()||(a.ka.forEach((g,p)=>{d.push(a.Ha(p,t,i).then(v=>{var A;if((v||i)&&a.isPrimaryClient){const O=v?!v.fromCache:(A=i==null?void 0:i.targetChanges.get(p.targetId))===null||A===void 0?void 0:A.current;a.sharedClientState.updateQueryState(p.targetId,O?"current":"not-current")}if(v){l.push(v);const O=hm.Yi(p.targetId,v);c.push(O)}}))}),await Promise.all(d),a.La.p_(l),await async function(p,v){const A=Tt(p);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Q.forEach(v,x=>Q.forEach(x.Hi,G=>A.persistence.referenceDelegate.addReference(O,x.targetId,G)).next(()=>Q.forEach(x.Ji,G=>A.persistence.referenceDelegate.removeReference(O,x.targetId,G)))))}catch(O){if(!Fa(O))throw O;it(fm,"Failed to update sequence numbers: "+O)}for(const O of v){const x=O.targetId;if(!O.fromCache){const G=A.Ts.get(x),W=G.snapshotVersion,nt=G.withLastLimboFreeSnapshotVersion(W);A.Ts=A.Ts.insert(x,nt)}}}(a.localStore,c))}async function a1(s,t){const i=Tt(s);if(!i.currentUser.isEqual(t)){it(Em,"User change. New user:",t.toKey());const a=await BE(i.localStore,t);i.currentUser=t,function(c,d){c.Ga.forEach(g=>{g.forEach(p=>{p.reject(new ct(Y.CANCELLED,d))})}),c.Ga.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Ml(i,a.Rs)}}function o1(s,t){const i=Tt(s),a=i.Ua.get(t);if(a&&a.Ba)return Mt().add(a.key);{let l=Mt();const c=i.qa.get(t);if(!c)return l;for(const d of c){const g=i.ka.get(d);l=l.unionWith(g.view.Sa)}return l}}function iT(s){const t=Tt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=JE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=o1.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=n1.bind(null,t),t.La.p_=jw.bind(null,t.eventManager),t.La.Ja=Gw.bind(null,t.eventManager),t}function l1(s){const t=Tt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=i1.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=r1.bind(null,t),t}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jc(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,i){return null}nu(t,i){return null}eu(t){return uw(this.persistence,new aw,t.initialUser,this.serializer)}Xa(t){return new zE(cm.ri,this.serializer)}Za(t){return new pw}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class u1 extends Uc{constructor(t){super(),this.cacheSizeBytes=t}tu(t,i){jt(this.persistence.referenceDelegate instanceof Vc);const a=this.persistence.referenceDelegate.garbageCollector;return new FR(a,t.asyncQueue,i)}Xa(t){const i=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new zE(a=>Vc.ri(a,i),this.serializer)}}class Gd{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>ev(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=a1.bind(null,this.syncEngine),await xw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Bw}()}createDatastore(t){const i=Jc(t.databaseInfo.databaseId),a=function(c){return new Tw(c)}(t.databaseInfo);return function(c,d,g,p){return new Rw(c,d,g,p)}(t.authCredentials,t.appCheckCredentials,a,i)}createRemoteStore(t){return function(a,l,c,d,g){return new Iw(a,l,c,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>ev(this.syncEngine,i,0),function(){return Yy.D()?new Yy:new _w}())}createSyncEngine(t,i){return function(l,c,d,g,p,v,A){const O=new Yw(l,c,d,g,p,v);return A&&(O.ja=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(l){const c=Tt(l);it(Rs,"RemoteStore shutting down."),c.W_.add(5),await Nl(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}Gd.provider={build:()=>new Gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):zi("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class h1{constructor(t,i,a,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=Fe.UNAUTHENTICATED,this.clientId=Wv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async d=>{it(Ur,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(it(Ur,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=ym(i,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Td(s,t){s.asyncQueue.verifyOperationInProgress(),it(Ur,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let a=i.initialUser;s.setCredentialChangeListener(async l=>{a.isEqual(l)||(await BE(t.localStore,l),a=l)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function iv(s,t){s.asyncQueue.verifyOperationInProgress();const i=await f1(s);it(Ur,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener(a=>Zy(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,l)=>Zy(t.remoteStore,l)),s._onlineComponents=t}async function f1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){it(Ur,"Using user provided OfflineComponentProvider");try{await Td(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Pa("Error using user provided cache. Falling back to memory cache: "+i),await Td(s,new Uc)}}else it(Ur,"Using default OfflineComponentProvider"),await Td(s,new u1(void 0));return s._offlineComponents}async function rT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(it(Ur,"Using user provided OnlineComponentProvider"),await iv(s,s._uninitializedComponentsProvider._online)):(it(Ur,"Using default OnlineComponentProvider"),await iv(s,new Gd))),s._onlineComponents}function d1(s){return rT(s).then(t=>t.syncEngine)}async function m1(s){const t=await rT(s),i=t.eventManager;return i.onListen=$w.bind(null,t.syncEngine),i.onUnlisten=Jw.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=Zw.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=t1.bind(null,t.syncEngine),i}function g1(s,t,i={}){const a=new Cr;return s.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,v){const A=new c1({next:x=>{A.su(),d.enqueueAndForget(()=>Hw(c,O));const G=x.docs.has(g);!G&&x.fromCache?v.reject(new ct(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&x.fromCache&&p&&p.source==="server"?v.reject(new ct(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),O=new Fw(rm(g.path),A,{includeMetadataChanges:!0,Ta:!0});return qw(c,O)}(await m1(s),s.asyncQueue,t,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s,t,i){if(!i)throw new ct(Y.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function _1(s,t,i,a){if(t===!0&&a===!0)throw new ct(Y.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function sv(s){if(!ht.isDocumentKey(s))throw new ct(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Am(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":pt()}function Sl(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ct(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Am(s);throw new ct(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firestore.googleapis.com",av=!0;class ov{constructor(t){var i,a;if(t.host===void 0){if(t.ssl!==void 0)throw new ct(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aT,this.ssl=av}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:av;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jR)throw new ct(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_1("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sT((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ct(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ct(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ct(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,l){return a.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sm{constructor(t,i,a,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ov(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new vb;switch(a.type){case"firstParty":return new Sb(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ct(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=rv.get(i);a&&(it("ComponentProvider","Removing Datastore"),rv.delete(i),a.terminate())}(this),Promise.resolve()}}function y1(s,t,i,a={}){var l;const c=(s=Sl(s,Sm))._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:s._getEmulatorOptions()}),g=`${t}:${i}`;c.host!==aT&&c.host!==g&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:g,ssl:!1,emulatorOptions:a});if(!As(p,d)&&(s._setSettings(p),a.mockUserToken)){let v,A;if(typeof a.mockUserToken=="string")v=a.mockUserToken,A=Fe.MOCK_USER;else{v=KA(a.mockUserToken,(l=s._app)===null||l===void 0?void 0:l.options.projectId);const O=a.mockUserToken.sub||a.mockUserToken.user_id;if(!O)throw new ct(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Fe(O)}s._authCredentials=new Eb(new $v(v,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new bm(this.firestore,t,this._query)}}class Cn{constructor(t,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Cn(this.firestore,t,this._key)}}class bl extends bm{constructor(t,i,a){super(t,i,rm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Cn(this.firestore,null,new ht(t))}withConverter(t){return new bl(this.firestore,t,this._path)}}function hc(s,t,...i){if(s=dn(s),arguments.length===1&&(t=Wv.newId()),p1("doc","path",t),s instanceof Sm){const a=le.fromString(t,...i);return sv(a),new Cn(s,null,new ht(a))}{if(!(s instanceof Cn||s instanceof bl))throw new ct(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(le.fromString(t,...i));return sv(a),new Cn(s.firestore,s instanceof bl?s.converter:null,new ht(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="AsyncQueue";class uv{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new HE(this,"async_queue_retry"),this.Su=()=>{const a=Ed();a&&it(lv,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const i=Ed();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const i=Ed();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const i=new Cr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Fa(t))throw t;it(lv,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const i=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const l=function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),g}(a);throw zi("INTERNAL UNHANDLED ERROR: ",l),a}).then(a=>(this.pu=!1,a))));return this.bu=i,i}enqueueAfterDelay(t,i,a){this.Du(),this.wu.indexOf(t)>-1&&(i=0);const l=_m.createAndSchedule(this,t,i,a,c=>this.Fu(c));return this.fu.push(l),l}Du(){this.gu&&pt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const i of this.fu)if(i.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.fu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const i=this.fu.indexOf(t);this.fu.splice(i,1)}}class Rm extends Sm{constructor(t,i,a,l){super(t,i,a,l),this.type="firestore",this._queue=new uv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uv(t),this._firestoreClient=void 0,await t}}}function v1(s,t){const i=typeof s=="object"?s:qv(),a=typeof s=="string"?s:wc,l=Zd(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=GA("firestore");c&&y1(l,...c)}return l}function oT(s){if(s._terminated)throw new ct(Y.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||E1(s),s._firestoreClient}function E1(s){var t,i,a;const l=s._freezeSettings(),c=function(g,p,v,A){return new xb(g,p,v,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,sT(A.experimentalLongPollingOptions),A.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,l);s._componentsProvider||!((i=l.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=l.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),s._firestoreClient=new h1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ba(Be.fromBase64String(t))}catch(i){throw new ct(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Ba(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ct(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ct(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ct(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=/^__.*__$/;class A1{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return this.fieldMask!==null?new Ds(t,this.data,this.fieldMask,i,this.fieldTransforms):new Dl(t,this.data,i,this.fieldTransforms)}}function uT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class Dm{constructor(t,i,a,l,c,d){this.settings=t,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Dm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(t),l=this.ku({path:a,Qu:!1});return l.$u(t),l}Uu(t){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(t),l=this.ku({path:a,Qu:!1});return l.Bu(),l}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return kc(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(uT(this.Lu)&&T1.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class S1{constructor(t,i,a){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=a||Jc(t)}ju(t,i,a,l=!1){return new Dm({Lu:t,methodName:i,zu:a,path:ze.emptyPath(),Qu:!1,Gu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function b1(s){const t=s._freezeSettings(),i=Jc(s._databaseId);return new S1(s._databaseId,!!t.ignoreUndefinedProperties,i)}function R1(s,t,i,a,l,c={}){const d=s.ju(c.merge||c.mergeFields?2:0,t,i,l);dT("Data must be an object, but it was:",d,a);const g=hT(a,d);let p,v;if(c.merge)p=new kn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const O of c.mergeFields){const x=w1(t,O,i);if(!d.contains(x))throw new ct(Y.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);C1(A,x)||A.push(x)}p=new kn(A),v=d.fieldTransforms.filter(O=>p.covers(O.field))}else p=null,v=d.fieldTransforms;return new A1(new In(g),p,v)}function cT(s,t){if(fT(s=dn(s)))return dT("Unsupported field value:",t,s),hT(s,t);if(s instanceof lT)return function(a,l){if(!uT(l.Lu))throw l.Wu(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,l){const c=[];let d=0;for(const g of a){let p=cT(g,l.Ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(s,t)}return function(a,l){if((a=dn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return lR(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=be.fromDate(a);return{timestampValue:Mc(l.serializer,c)}}if(a instanceof be){const c=new be(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Mc(l.serializer,c)}}if(a instanceof Im)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ba)return{bytesValue:NE(l.serializer,a._byteString)};if(a instanceof Cn){const c=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw l.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:lm(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Cm)return function(d,g){return{mapValue:{fields:{[aE]:{stringValue:oE},[Ic]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw g.Wu("VectorValues must only contain numeric values.");return sm(g.serializer,v)})}}}}}}(a,l);throw l.Wu(`Unsupported field value: ${Am(a)}`)}(s,t)}function hT(s,t){const i={};return tE(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Is(s,(a,l)=>{const c=cT(l,t.qu(a));c!=null&&(i[a]=c)}),{mapValue:{fields:i}}}function fT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof be||s instanceof Im||s instanceof Ba||s instanceof Cn||s instanceof lT||s instanceof Cm)}function dT(s,t,i){if(!fT(i)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(i)){const a=Am(i);throw a==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+a)}}function w1(s,t,i){if((t=dn(t))instanceof wm)return t._internalPath;if(typeof t=="string")return mT(s,t);throw kc("Field path arguments must be of type string or ",s,!1,void 0,i)}const I1=new RegExp("[~\\*/\\[\\]]");function mT(s,t,i){if(t.search(I1)>=0)throw kc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new wm(...t.split("."))._internalPath}catch{throw kc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function kc(s,t,i,a,l){const c=a&&!a.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${a}`),d&&(p+=` in document ${l}`),p+=")"),new ct(Y.INVALID_ARGUMENT,g+s+p)}function C1(s,t){return s.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,i,a,l,c){this._firestore=t,this._userDataWriter=i,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new D1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(pT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class D1 extends gT{data(){return super.data()}}function pT(s,t){return typeof t=="string"?mT(s,t):t instanceof wm?t._internalPath:t._delegate._internalPath}class O1{convertValue(t,i="none"){switch(Vr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw pt()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const a={};return Is(t,(l,c)=>{a[l]=this.convertValue(c,i)}),a}convertVectorValue(t){var i,a,l;const c=(l=(a=(i=t.fields)===null||i===void 0?void 0:i[Ic].arrayValue)===null||a===void 0?void 0:a.values)===null||l===void 0?void 0:l.map(d=>fe(d.doubleValue));return new Cm(c)}convertGeoPoint(t){return new Im(fe(t.latitude),fe(t.longitude))}convertArray(t,i){return(t.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(t,i){switch(i){case"previous":const a=Kc(t);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(yl(t));default:return null}}convertTimestamp(t){const i=Nr(t);return new be(i.seconds,i.nanos)}convertDocumentKey(t,i){const a=le.fromString(t);jt(LE(a));const l=new vl(a.get(1),a.get(3)),c=new ht(a.popFirst(5));return l.isEqual(i)||zi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(s,t,i){let a;return a=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _T extends gT{constructor(t,i,a,l,c,d){super(t,i,a,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new V1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const a=this._document.data.field(pT("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class V1 extends _T{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(s){s=Sl(s,Cn);const t=Sl(s.firestore,Rm);return g1(oT(t),s._key).then(i=>k1(t,s,i))}class P1 extends O1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ba(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Cn(this.firestore,null,i)}}function hv(s,t,i){s=Sl(s,Cn);const a=Sl(s.firestore,Rm),l=N1(s.converter,t,i);return U1(a,[R1(b1(a),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,Li.none())])}function U1(s,t){return function(a,l){const c=new Cr;return a.asyncQueue.enqueueAndForget(async()=>e1(await d1(a),l,c)),c.promise}(oT(s),t)}function k1(s,t,i){const a=i.docs.get(t._key),l=new P1(s);return new _T(s,l,t._key,a,new M1(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(l){ja=l})(Ha),Va(new Ss("firestore",(a,{instanceIdentifier:l,options:c})=>{const d=a.getProvider("app").getImmediate(),g=new Rm(new Tb(a.getProvider("auth-internal")),new bb(d,a.getProvider("app-check-internal")),function(v,A){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ct(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(v.options.projectId,A)}(d,l),d);return c=Object.assign({useFetchStreams:i},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),wr(py,_y,t),wr(py,_y,"esm2017")})();function Om(s,t){var i={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(i[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(s);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(s,a[l])&&(i[a[l]]=s[a[l]]);return i}function yT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L1=yT,vT=new Il("auth","Firebase",yT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Yd("@firebase/auth");function x1(s,...t){Lc.logLevel<=Nt.WARN&&Lc.warn(`Auth (${Ha}): ${s}`,...t)}function vc(s,...t){Lc.logLevel<=Nt.ERROR&&Lc.error(`Auth (${Ha}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(s,...t){throw Nm(s,...t)}function si(s,...t){return Nm(s,...t)}function ET(s,t,i){const a=Object.assign(Object.assign({},L1()),{[t]:i});return new Il("auth","Firebase",a).create(t,{appName:s.name})}function Dr(s){return ET(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(s,...t){if(typeof s!="string"){const i=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(i,...a)}return vT.create(s,...t)}function dt(s,t,...i){if(!s)throw Nm(t,...i)}function Ui(s){const t="INTERNAL ASSERTION FAILED: "+s;throw vc(t),new Error(t)}function qi(s,t){s||Ui(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function z1(){return fv()==="http:"||fv()==="https:"}function fv(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z1()||$A()||"connection"in navigator)?navigator.onLine:!0}function q1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,i){this.shortDelay=t,this.longDelay=i,qi(i>t,"Short delay should be less than long delay!"),this.isMobile=QA()||ZA()}get(){return B1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(s,t){qi(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{static initialize(t,i,a){this.fetchImpl=t,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G1=new Vl(3e4,6e4);function Ns(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function kr(s,t,i,a,l={}){return AT(s,l,async()=>{let c={},d={};a&&(t==="GET"?d=a:c={body:JSON.stringify(a)});const g=Cl(Object.assign({key:s.config.apiKey},d)).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const v=Object.assign({method:t,headers:p},c);return YA()||(v.referrerPolicy="no-referrer"),TT.fetch()(await ST(s,s.config.apiHost,i,g),v)})}async function AT(s,t,i){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},H1),t);try{const l=new K1(s),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw fc(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,v]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw fc(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw fc(s,"user-disabled",d);const A=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw ET(s,A,v);xn(s,A)}}catch(l){if(l instanceof Hi)throw l;xn(s,"network-request-failed",{message:String(l)})}}async function nh(s,t,i,a,l={}){const c=await kr(s,t,i,a,l);return"mfaPendingCredential"in c&&xn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function ST(s,t,i,a){const l=`${t}${i}?${a}`,c=s,d=c.config.emulator?Mm(s.config,l):`${s.config.apiScheme}://${l}`;return j1.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function F1(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class K1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(si(this.auth,"network-request-failed")),G1.get())})}}function fc(s,t,i){const a={appName:s.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const l=si(s,t,a);return l.customData._tokenResponse=i,l}function dv(s){return s!==void 0&&s.enterprise!==void 0}class Q1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return F1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function X1(s,t){return kr(s,"GET","/v2/recaptchaConfig",Ns(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(s,t){return kr(s,"POST","/v1/accounts:delete",t)}async function xc(s,t){return kr(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $1(s,t=!1){const i=dn(s),a=await i.getIdToken(t),l=Vm(a);dt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:a,authTime:gl(Ad(l.auth_time)),issuedAtTime:gl(Ad(l.iat)),expirationTime:gl(Ad(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Ad(s){return Number(s)*1e3}function Vm(s){const[t,i,a]=s.split(".");if(t===void 0||i===void 0||a===void 0)return vc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Pv(i);return l?JSON.parse(l):(vc("Failed to decode base64 JWT payload"),null)}catch(l){return vc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function mv(s){const t=Vm(s);return dt(t,"internal-error"),dt(typeof t.exp<"u","internal-error"),dt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(s,t,i=!1){if(i)return t;try{return await t}catch(a){throw a instanceof Hi&&Z1(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function Z1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var i;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const l=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(s){var t;const i=s.auth,a=await s.getIdToken(),l=await Rl(s,xc(i,{idToken:a}));dt(l==null?void 0:l.users.length,i,"internal-error");const c=l.users[0];s._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?bT(c.providerUserInfo):[],g=tI(s.providerData,d),p=s.isAnonymous,v=!(s.email&&c.passwordHash)&&!(g!=null&&g.length),A=p?v:!1,O={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Kd(c.createdAt,c.lastLoginAt),isAnonymous:A};Object.assign(s,O)}async function J1(s){const t=dn(s);await zc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tI(s,t){return[...s.filter(a=>!t.some(l=>l.providerId===a.providerId)),...t]}function bT(s){return s.map(t=>{var{providerId:i}=t,a=Om(t,["providerId"]);return{providerId:i,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(s,t){const i=await AT(s,{},async()=>{const a=Cl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await ST(s,l,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",TT.fetch()(d,{method:"POST",headers:g,body:a})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function nI(s,t){return kr(s,"POST","/v2/accounts:revokeToken",Ns(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){dt(t.idToken,"internal-error"),dt(typeof t.idToken<"u","internal-error"),dt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){dt(t.length!==0,"internal-error");const i=mv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:a,refreshToken:l,expiresIn:c}=await eI(t,i);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(t,i,a){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,i){const{refreshToken:a,accessToken:l,expirationTime:c}=i,d=new Oa;return a&&(dt(typeof a=="string","internal-error",{appName:t}),d.refreshToken=a),l&&(dt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(dt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(s,t){dt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Ln{constructor(t){var{uid:i,auth:a,stsTokenManager:l}=t,c=Om(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=a,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Kd(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const i=await Rl(this,this.stsTokenManager.getToken(this.auth,t));return dt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return $1(this,t)}reload(){return J1(this)}_assign(t){this!==t&&(dt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>Object.assign({},i)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Ln(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(t){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),i&&await zc(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Dr(this.auth));const t=await this.getIdToken();return await Rl(this,Y1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){var a,l,c,d,g,p,v,A;const O=(a=i.displayName)!==null&&a!==void 0?a:void 0,x=(l=i.email)!==null&&l!==void 0?l:void 0,G=(c=i.phoneNumber)!==null&&c!==void 0?c:void 0,W=(d=i.photoURL)!==null&&d!==void 0?d:void 0,nt=(g=i.tenantId)!==null&&g!==void 0?g:void 0,Z=(p=i._redirectEventId)!==null&&p!==void 0?p:void 0,At=(v=i.createdAt)!==null&&v!==void 0?v:void 0,_t=(A=i.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:lt,emailVerified:Vt,isAnonymous:gt,providerData:wt,stsTokenManager:M}=i;dt(lt&&M,t,"internal-error");const S=Oa.fromJSON(this.name,M);dt(typeof lt=="string",t,"internal-error"),yr(O,t.name),yr(x,t.name),dt(typeof Vt=="boolean",t,"internal-error"),dt(typeof gt=="boolean",t,"internal-error"),yr(G,t.name),yr(W,t.name),yr(nt,t.name),yr(Z,t.name),yr(At,t.name),yr(_t,t.name);const w=new Ln({uid:lt,auth:t,email:x,emailVerified:Vt,displayName:O,isAnonymous:gt,photoURL:W,phoneNumber:G,tenantId:nt,stsTokenManager:S,createdAt:At,lastLoginAt:_t});return wt&&Array.isArray(wt)&&(w.providerData=wt.map(N=>Object.assign({},N))),Z&&(w._redirectEventId=Z),w}static async _fromIdTokenResponse(t,i,a=!1){const l=new Oa;l.updateFromServerResponse(i);const c=new Ln({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:a});return await zc(c),c}static async _fromGetAccountInfoResponse(t,i,a){const l=i.users[0];dt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?bT(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Oa;g.updateFromIdToken(a);const p=new Ln({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Kd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function ki(s){qi(s instanceof Function,"Expected a class definition");let t=gv.get(s);return t?(qi(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,gv.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}RT.type="NONE";const pv=RT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(s,t,i){return`firebase:${s}:${t}:${i}`}class Na{constructor(t,i,a){this.persistence=t,this.auth=i,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=Ec(this.userKey,l.apiKey,c),this.fullPersistenceKey=Ec("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await xc(this.auth,{idToken:t}).catch(()=>{});return i?Ln._fromGetAccountInfoResponse(this.auth,i,t):null}return Ln._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,a="authUser"){if(!i.length)return new Na(ki(pv),t,a);const l=(await Promise.all(i.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=l[0]||ki(pv);const d=Ec(a,t.config.apiKey,t.name);let g=null;for(const v of i)try{const A=await v._get(d);if(A){let O;if(typeof A=="string"){const x=await xc(t,{idToken:A}).catch(()=>{});if(!x)break;O=await Ln._fromGetAccountInfoResponse(t,x,A)}else O=Ln._fromJSON(t,A);v!==c&&(g=O),c=v;break}}catch{}const p=l.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Na(c,t,a):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(i.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new Na(c,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(NT(t))return"Blackberry";if(MT(t))return"Webos";if(IT(t))return"Safari";if((t.includes("chrome/")||CT(t))&&!t.includes("edge/"))return"Chrome";if(OT(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(i);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function wT(s=Qe()){return/firefox\//i.test(s)}function IT(s=Qe()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function CT(s=Qe()){return/crios\//i.test(s)}function DT(s=Qe()){return/iemobile/i.test(s)}function OT(s=Qe()){return/android/i.test(s)}function NT(s=Qe()){return/blackberry/i.test(s)}function MT(s=Qe()){return/webos/i.test(s)}function Pm(s=Qe()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function iI(s=Qe()){var t;return Pm(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function rI(){return WA()&&document.documentMode===10}function VT(s=Qe()){return Pm(s)||OT(s)||MT(s)||NT(s)||/windows phone/i.test(s)||DT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(s,t=[]){let i;switch(s){case"Browser":i=_v(Qe());break;case"Worker":i=`${_v(Qe())}-${s}`;break;default:i=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Ha}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const a=c=>new Promise((d,g)=>{try{const p=t(c);d(p)}catch(p){g(p)}});a.onAbort=i,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const a of this.queue)await a(t),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(s,t={}){return kr(s,"GET","/v2/passwordPolicy",Ns(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=6;class lI{constructor(t){var i,a,l,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=d.minPasswordLength)!==null&&i!==void 0?i:oI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var i,a,l,c,d,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,p),this.validatePasswordCharacterOptions(t,p),p.isValid&&(p.isValid=(i=p.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(t,i){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=t.length>=a),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let l=0;l<t.length;l++)a=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,i,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,i,a,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new sI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=ki(i)),this._initializationPromise=this.queue(async()=>{var a,l,c;if(!this._deleted&&(this.persistenceManager=await Na.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await xc(this,{idToken:t}),a=await Ln._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(Un(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let l=a,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,g=l==null?void 0:l._redirectEventId,p=await this.tryRedirectSignIn(t);(!d||d===g)&&(p!=null&&p.user)&&(l=p.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(d){l=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await zc(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=q1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Un(this.app))return Promise.reject(Dr(this));const i=t?dn(t):null;return i&&dt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&dt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Un(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await aI(this),i=new lI(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Il("auth","Firebase",t())}onAuthStateChanged(t,i,a){return this.registerStateListener(this.authStateSubscription,t,i,a)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,a){return this.registerStateListener(this.idTokenSubscription,t,i,a)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await nI(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,i){const a=await this.getOrInitRedirectPersistenceManager(i);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&ki(t)||this._popupRedirectResolver;dt(i,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[ki(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,a;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(i=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,a,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const p=t.addObserver(i,a,l);return()=>{d=!0,p()}}else{const p=t.addObserver(i);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=PT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(i["X-Firebase-Client"]=a);const l=await this._getAppCheckToken();return l&&(i["X-Firebase-AppCheck"]=l),i}async _getAppCheckToken(){var t;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const i=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return i!=null&&i.error&&x1(`Error while retrieving App Check token: ${i.error}`),i==null?void 0:i.token}}function Qa(s){return dn(s)}class yv{constructor(t){this.auth=t,this.observer=null,this.addObserver=aS(i=>this.observer=i)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cI(s){ih=s}function UT(s){return ih.loadJS(s)}function hI(){return ih.recaptchaEnterpriseScript}function fI(){return ih.gapiScript}function dI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class mI{constructor(){this.enterprise=new gI}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class gI{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const pI="recaptcha-enterprise",kT="NO_RECAPTCHA";class _I{constructor(t){this.type=pI,this.auth=Qa(t)}async verify(t="verify",i=!1){async function a(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{X1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const v=new Q1(p);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,d(v.siteKey)}}).catch(p=>{g(p)})})}function l(c,d,g){const p=window.grecaptcha;dv(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:t}).then(v=>{d(v)}).catch(()=>{d(kT)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mI().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{a(this.auth).then(g=>{if(!i&&dv(window.grecaptcha))l(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=hI();p.length!==0&&(p+=g),UT(p).then(()=>{l(g,c,d)}).catch(v=>{d(v)})}}).catch(g=>{d(g)})})}}async function vv(s,t,i,a=!1,l=!1){const c=new _I(s);let d;if(l)d=kT;else try{d=await c.verify(i)}catch{d=await c.verify(i,!0)}const g=Object.assign({},t);if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,v=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Ev(s,t,i,a,l){var c;if(!((c=s._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await vv(s,t,i,i==="getOobCode");return a(s,d)}else return a(s,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await vv(s,t,i,i==="getOobCode");return a(s,g)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(s,t){const i=Zd(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(As(c,t??{}))return l;xn(l,"already-initialized")}return i.initialize({options:t})}function vI(s,t){const i=(t==null?void 0:t.persistence)||[],a=(Array.isArray(i)?i:[i]).map(ki);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function EI(s,t,i){const a=Qa(s);dt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const l=!1,c=LT(t),{host:d,port:g}=TI(t),p=g===null?"":`:${g}`,v={url:`${c}//${d}${p}/`},A=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){dt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),dt(As(v,a.config.emulator)&&As(A,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=v,a.emulatorConfig=A,a.settings.appVerificationDisabledForTesting=!0,AI()}function LT(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function TI(s){const t=LT(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:Tv(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:Tv(d)}}}function Tv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function AI(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Ui("not implemented")}_getIdTokenResponse(t){return Ui("not implemented")}_linkToIdToken(t,i){return Ui("not implemented")}_getReauthenticationResolver(t){return Ui("not implemented")}}async function SI(s,t){return kr(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(s,t){return nh(s,"POST","/v1/accounts:signInWithPassword",Ns(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(s,t){return nh(s,"POST","/v1/accounts:signInWithEmailLink",Ns(s,t))}async function wI(s,t){return nh(s,"POST","/v1/accounts:signInWithEmailLink",Ns(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Um{constructor(t,i,a,l=null){super("password",a),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new wl(t,i,"password")}static _fromEmailAndCode(t,i,a=null){return new wl(t,i,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ev(t,i,"signInWithPassword",bI);case"emailLink":return RI(t,{email:this._email,oobCode:this._password});default:xn(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const a={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ev(t,a,"signUpPassword",SI);case"emailLink":return wI(t,{idToken:i,email:this._email,oobCode:this._password});default:xn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(s,t){return nh(s,"POST","/v1/accounts:signInWithIdp",Ns(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="http://localhost";class ws extends Um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new ws(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):xn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:l}=i,c=Om(i,["providerId","signInMethod"]);if(!a||!l)return null;const d=new ws(a,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Ma(t,i)}_linkToIdToken(t,i){const a=this.buildRequest();return a.idToken=i,Ma(t,a)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ma(t,i)}buildRequest(){const t={requestUri:II,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Cl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DI(s){const t=al(ol(s)).link,i=t?al(ol(t)).deep_link_id:null,a=al(ol(s)).deep_link_id;return(a?al(ol(a)).link:null)||a||i||t||s}class km{constructor(t){var i,a,l,c,d,g;const p=al(ol(t)),v=(i=p.apiKey)!==null&&i!==void 0?i:null,A=(a=p.oobCode)!==null&&a!==void 0?a:null,O=CI((l=p.mode)!==null&&l!==void 0?l:null);dt(v&&A&&O,"argument-error"),this.apiKey=v,this.operation=O,this.code=A,this.continueUrl=(c=p.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=p.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(g=p.tenantId)!==null&&g!==void 0?g:null}static parseLink(t){const i=DI(t);try{return new km(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(t,i){return wl._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const a=km.parseLink(i);return dt(a,"argument-error"),wl._fromEmailAndCode(t,a.code,a.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends xT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Pl{constructor(){super("facebook.com")}static credential(t){return ws._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vr.credential(t.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ws._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:a}=t;if(!i&&!a)return null;try{return Er.credential(i,a)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Pl{constructor(){super("github.com")}static credential(t){return ws._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tr.credential(t.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Pl{constructor(){super("twitter.com")}static credential(t,i){return ws._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Ar.credentialFromTaggedObject(t)}static credentialFromError(t){return Ar.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=t;if(!i||!a)return null;try{return Ar.credential(i,a)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,a,l=!1){const c=await Ln._fromIdTokenResponse(t,a,l),d=Av(a);return new qa({user:c,providerId:d,_tokenResponse:a,operationType:i})}static async _forOperation(t,i,a){await t._updateTokensIfNecessary(a,!0);const l=Av(a);return new qa({user:t,providerId:l,_tokenResponse:a,operationType:i})}}function Av(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Hi{constructor(t,i,a,l){var c;super(i.code,i.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,Bc.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,i,a,l){return new Bc(t,i,a,l)}}function zT(s,t,i,a){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Bc._fromErrorAndOperation(s,c,t,a):c})}async function OI(s,t,i=!1){const a=await Rl(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return qa._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(s,t,i=!1){const{auth:a}=s;if(Un(a.app))return Promise.reject(Dr(a));const l="reauthenticate";try{const c=await Rl(s,zT(a,l,t,s),i);dt(c.idToken,a,"internal-error");const d=Vm(c.idToken);dt(d,a,"internal-error");const{sub:g}=d;return dt(s.uid===g,a,"user-mismatch"),qa._forOperation(s,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&xn(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(s,t,i=!1){if(Un(s.app))return Promise.reject(Dr(s));const a="signIn",l=await zT(s,a,t),c=await qa._fromIdTokenResponse(s,a,l);return i||await s._updateCurrentUser(c.user),c}async function MI(s,t){return BT(Qa(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(s){const t=Qa(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function PI(s,t,i){return Un(s.app)?Promise.reject(Dr(s)):MI(dn(s),Xa.credential(t,i)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&VI(s),a})}function UI(s,t,i,a){return dn(s).onIdTokenChanged(t,i,a)}function kI(s,t,i){return dn(s).beforeAuthStateChanged(t,i)}function LI(s,t,i,a){return dn(s).onAuthStateChanged(t,i,a)}function xI(s){return dn(s).signOut()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=1e3,BI=10;class HT extends qT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),l=this.localCache[i];a!==l&&t(i,l,a)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const a=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(a);!i&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);rI()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,BI):l()}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:a}),!0)})},zI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}HT.type="LOCAL";const qI=HT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends qT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}jT.type="SESSION";const GT=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const a=new rh(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:a,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const g=Array.from(d).map(async v=>v(i.origin,c)),p=await HI(g);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:p})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(s="",t=10){let i="";for(let a=0;a<t;a++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const v=Lm("",20);l.port1.start();const A=setTimeout(()=>{p(new Error("unsupported_event"))},a);d={messageChannel:l,onMessage(O){const x=O;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(x.data.response);break;default:clearTimeout(A),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:v,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function GI(s){ai().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function FI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KI(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function QI(){return FT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="firebaseLocalStorageDb",XI=1,Hc="firebaseLocalStorage",QT="fbase_key";class Ul{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function sh(s,t){return s.transaction([Hc],t?"readwrite":"readonly").objectStore(Hc)}function YI(){const s=indexedDB.deleteDatabase(KT);return new Ul(s).toPromise()}function Qd(){const s=indexedDB.open(KT,XI);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Hc,{keyPath:QT})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Hc)?t(a):(a.close(),await YI(),t(await Qd()))})})}async function Sv(s,t,i){const a=sh(s,!0).put({[QT]:t,value:i});return new Ul(a).toPromise()}async function $I(s,t){const i=sh(s,!1).get(t),a=await new Ul(i).toPromise();return a===void 0?null:a.value}function bv(s,t){const i=sh(s,!0).delete(t);return new Ul(i).toPromise()}const ZI=800,WI=3;class XT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(i++>WI)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(QI()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await FI(),!this.activeServiceWorker)return;this.sender=new jI(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((i=a[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||KI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Qd();return await Sv(t,qc,"1"),await bv(t,qc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>Sv(a,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(a=>$I(a,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>bv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=sh(l,!1).getAll();return new Ul(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XT.type="LOCAL";const JI=XT;new Vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(s,t){return t?ki(t):(dt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Um{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ma(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ma(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ma(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function eC(s){return BT(s.auth,new xm(s),s.bypassAuthState)}function nC(s){const{auth:t,user:i}=s;return dt(i,t,"internal-error"),NI(i,new xm(s),s.bypassAuthState)}async function iC(s){const{auth:t,user:i}=s;return dt(i,t,"internal-error"),OI(i,new xm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t,i,a,l,c=!1){this.auth=t,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:a,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:i,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(v){this.reject(v)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return eC;case"linkViaPopup":case"linkViaRedirect":return iC;case"reauthViaPopup":case"reauthViaRedirect":return nC;default:xn(this.auth,"internal-error")}}resolve(t){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Vl(2e3,1e4);class Ca extends YT{constructor(t,i,a,l,c){super(t,i,l,c),this.provider=a,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return dt(t,this.auth,"internal-error"),t}async onExecution(){qi(this.filter.length===1,"Popup operations only handle one event");const t=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,a;if(!((a=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,rC.get())};t()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="pendingRedirect",Tc=new Map;class aC extends YT{constructor(t,i,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let t=Tc.get(this.auth._key());if(!t){try{const a=await oC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(i){t=()=>Promise.reject(i)}Tc.set(this.auth._key(),t)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oC(s,t){const i=cC(t),a=uC(s);if(!await a._isAvailable())return!1;const l=await a._get(i)==="true";return await a._remove(i),l}function lC(s,t){Tc.set(s._key(),t)}function uC(s){return ki(s._redirectPersistence)}function cC(s){return Ec(sC,s.config.apiKey,s.name)}async function hC(s,t,i=!1){if(Un(s.app))return Promise.reject(Dr(s));const a=Qa(s),l=tC(a,t),d=await new aC(a,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=10*60*1e3;class dC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(i=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!mC(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var a;if(t.error&&!$T(t)){const l=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";i.onError(si(this.auth,l))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const a=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=fC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rv(t))}saveEventToCache(t){this.cachedEventUids.add(Rv(t)),this.lastProcessedEventTime=Date.now()}}function Rv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function $T({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function mC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $T(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(s,t={}){return kr(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_C=/^https?/;async function yC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await gC(s);for(const i of t)try{if(vC(i))return}catch{}xn(s,"unauthorized-domain")}function vC(s){const t=Fd(),{protocol:i,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===a}if(!_C.test(i))return!1;if(pC.test(s))return a===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Vl(3e4,6e4);function wv(){const s=ai().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function TC(s){return new Promise((t,i)=>{var a,l,c;function d(){wv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wv(),i(si(s,"network-request-failed"))},timeout:EC.get()})}if(!((l=(a=ai().gapi)===null||a===void 0?void 0:a.iframes)===null||l===void 0)&&l.Iframe)t(gapi.iframes.getContext());else if(!((c=ai().gapi)===null||c===void 0)&&c.load)d();else{const g=dI("iframefcb");return ai()[g]=()=>{gapi.load?d():i(si(s,"network-request-failed"))},UT(`${fI()}?onload=${g}`).catch(p=>i(p))}}).catch(t=>{throw Ac=null,t})}let Ac=null;function AC(s){return Ac=Ac||TC(s),Ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Vl(5e3,15e3),bC="__/auth/iframe",RC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CC(s){const t=s.config;dt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Mm(t,RC):`https://${s.config.authDomain}/${bC}`,a={apiKey:t.apiKey,appName:s.name,v:Ha},l=IC.get(s.config.apiHost);l&&(a.eid=l);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${i}?${Cl(a).slice(1)}`}async function DC(s){const t=await AC(s),i=ai().gapi;return dt(i,s,"internal-error"),t.open({where:document.body,url:CC(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const d=si(s,"network-request-failed"),g=ai().setTimeout(()=>{c(d)},SC.get());function p(){ai().clearTimeout(g),l(a)}a.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NC=500,MC=600,VC="_blank",PC="http://localhost";class Iv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UC(s,t,i,a=NC,l=MC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const p=Object.assign(Object.assign({},OC),{width:a.toString(),height:l.toString(),top:c,left:d}),v=Qe().toLowerCase();i&&(g=CT(v)?VC:i),wT(v)&&(t=t||PC,p.scrollbars="yes");const A=Object.entries(p).reduce((x,[G,W])=>`${x}${G}=${W},`,"");if(iI(v)&&g!=="_self")return kC(t||"",g),new Iv(null);const O=window.open(t||"",g,A);dt(O,s,"popup-blocked");try{O.focus()}catch{}return new Iv(O)}function kC(s,t){const i=document.createElement("a");i.href=s,i.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="__/auth/handler",xC="emulator/auth/handler",zC=encodeURIComponent("fac");async function Cv(s,t,i,a,l,c){dt(s.config.authDomain,s,"auth-domain-config-required"),dt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:a,v:Ha,eventId:l};if(t instanceof xT){t.setDefaultLanguage(s.languageCode),d.providerId=t.providerId||"",sS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,O]of Object.entries({}))d[A]=O}if(t instanceof Pl){const A=t.getScopes().filter(O=>O!=="");A.length>0&&(d.scopes=A.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const p=await s._getAppCheckToken(),v=p?`#${zC}=${encodeURIComponent(p)}`:"";return`${BC(s)}?${Cl(g).slice(1)}${v}`}function BC({config:s}){return s.emulator?Mm(s,xC):`https://${s.authDomain}/${LC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="webStorageSupport";class qC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GT,this._completeRedirectFn=hC,this._overrideRedirectResult=lC}async _openPopup(t,i,a,l){var c;qi((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await Cv(t,i,a,Fd(),l);return UC(t,d,Lm())}async _openRedirect(t,i,a,l){await this._originValidation(t);const c=await Cv(t,i,a,Fd(),l);return GI(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(qi(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(t);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(t){const i=await DC(t),a=new dC(t);return i.register("authEvent",l=>(dt(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=i,a}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Sd,{type:Sd},l=>{var c;const d=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[Sd];d!==void 0&&i(!!d),xn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=yC(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return VT()||IT()||Pm()}}const HC=qC;var Dv="@firebase/auth",Ov="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FC(s){Va(new Ss("auth",(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;dt(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PT(s)},v=new uI(a,l,c,p);return vI(v,i),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,a)=>{t.getProvider("auth-internal").initialize()})),Va(new Ss("auth-internal",t=>{const i=Qa(t.getProvider("auth").getImmediate());return(a=>new jC(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(Dv,Ov,GC(s)),wr(Dv,Ov,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=5*60,QC=Lv("authIdTokenMaxAge")||KC;let Nv=null;const XC=s=>async t=>{const i=t&&await t.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>QC)return;const l=i==null?void 0:i.token;Nv!==l&&(Nv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function ZT(s=qv()){const t=Zd(s,"auth");if(t.isInitialized())return t.getImmediate();const i=yI(s,{popupRedirectResolver:HC,persistence:[JI,qI,GT]}),a=Lv("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=XC(c.toString());kI(i,d,()=>d(i.currentUser)),UI(i,g=>d(g))}}const l=Uv("auth");return l&&EI(i,`http://${l}`),i}function YC(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}cI({loadJS(s){return new Promise((t,i)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=l=>{const c=si("internal-error");c.customData=l,i(c)},a.type="text/javascript",a.charset="UTF-8",YC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FC("Browser");const $C={apiKey:"AIzaSyAjwLSbFE3umheIvC_dgufUqI-xeG8BC4U",authDomain:"entretien-ua-stpierre.firebaseapp.com",projectId:"entretien-ua-stpierre",storageBucket:"entretien-ua-stpierre.firebasestorage.app",messagingSenderId:"680022883298",appId:"1:680022883298:web:ba07cdc9251469c40697bb",measurementId:"G-GFV3MWHZSH"},WT=Bv($C),dc=v1(WT);ZT(WT);const ZC="/volume-st-pierre/assets/plan-magasin-BEMKmfj1.png";function WC(){fn.useEffect(()=>{(async()=>{try{const b=hc(dc,"test","connexion"),zt=await cv(b);zt.exists()?console.log("✅ Connexion Firebase OK ! Données :",zt.data()):console.log("📭 Aucun document trouvé. Firebase fonctionne !")}catch(b){console.error("❌ Erreur Firebase :",b)}})()},[]);const[s,t]=fn.useState(!1),[i,a]=fn.useState(""),[l,c]=fn.useState(null),[d,g]=fn.useState({}),[p,v]=fn.useState(""),[A,O]=fn.useState(""),[x,G]=fn.useState(null),[W,nt]=fn.useState(""),[Z,At]=fn.useState(""),_t=ZT();fn.useEffect(()=>{const I=LI(_t,b=>{G(b)});return()=>I()},[]);const lt=async()=>{try{const I=await PI(_t,W,Z);G(I.user),nt(""),At("")}catch(I){console.error("Erreur de connexion :",I.message)}},Vt=async()=>{await xI(_t),G(null)},gt={1:{length:3,width:1.2,volumeConstant:4.5},2:{length:4.5,width:1.2,volumeConstant:1},3:{length:2.5,width:1.2,volumeConstant:1},4:{length:2.5,width:2,volumeConstant:1.01},5:{length:2.5,width:2,volumeConstant:1.02},6:{length:2.5,width:2,volumeConstant:1},7:{length:5,width:2,volumeConstant:1},8:{length:5.5,width:1.6,volumeConstant:0},9:{length:4,width:1.3,volumeConstant:1.45},10:{length:4,width:1.3,volumeConstant:1.5},11:{length:4,width:1.3,volumeConstant:1.5},12:{length:4,width:1.3,volumeConstant:1},13:{length:3,width:1.7,volumeConstant:1.01},14:{length:3,width:1.7,volumeConstant:1.02},15:{length:3,width:1.7,volumeConstant:1},16:{length:3,width:1.7,volumeConstant:1.8},17:{length:8,width:3,volumeConstant:4},18:{length:2,width:1.3,volumeConstant:0},19:{length:2,width:1.3,volumeConstant:0},20:{length:2,width:1.3,volumeConstant:0},21:{length:5,width:4,volumeConstant:0},22:{length:5,width:4,volumeConstant:0},23:{length:1.5,width:1,volumeConstant:.151},24:{length:1.5,width:1,volumeConstant:.152},25:{length:1.5,width:1,volumeConstant:.153},26:{length:1.5,width:1,volumeConstant:.154},27:{length:1.5,width:1,volumeConstant:.155},28:{length:1.5,width:1,volumeConstant:.156}},[wt,M]=fn.useState(null),S=()=>{const I=parseFloat(i);isNaN(I)||l&&M(l.length*l.width*I+(l.volumeConstant||0))},w=async()=>{if(l&&p&&A){const I=JSON.stringify(l),b={date:p,text:A},zt=[...d[I]||[],b];g(H=>({...H,[I]:zt})),v(""),O("");const Gt=hc(dc,"bassins",I);await hv(Gt,{actions:zt},{merge:!0})}},N=async I=>{if(l){const b=JSON.stringify(l),zt=d[b].filter(H=>H!==I);g(H=>({...H,[b]:zt}));const Gt=hc(dc,"bassins",b);await hv(Gt,{actions:zt},{merge:!0})}},V=async I=>{const b=JSON.stringify(I),zt=hc(dc,"bassins",b),Gt=await cv(zt);Gt.exists()&&g(H=>({...H,[b]:Gt.data().actions||[]}))};return vt.jsxs(vt.Fragment,{children:[vt.jsx("div",{className:"auth-container",children:x?vt.jsxs("div",{children:[vt.jsxs("p",{children:["Connecté en tant que : ",x.email]}),vt.jsx("button",{onClick:Vt,children:"Se déconnecter"})]}):vt.jsxs("div",{className:"login-form",children:[vt.jsx("h2",{children:"Connexion"}),vt.jsx("input",{type:"email",placeholder:"Email",value:W,onChange:I=>nt(I.target.value)}),vt.jsx("input",{type:"password",placeholder:"Mot de passe",value:Z,onChange:I=>At(I.target.value)}),vt.jsx("button",{onClick:lt,children:"Se connecter"})]})}),vt.jsx("h1",{children:"Calcul des volumes des bassins de St-Pierre"}),vt.jsxs("div",{className:"content-layout",children:[vt.jsx("img",{src:ZC,alt:"Plan du magasin",className:"plan-magasin"}),vt.jsx("div",{className:"buttons-grid",children:[...Array(28)].map((I,b)=>vt.jsx("button",{className:"store-button",onClick:()=>{const zt=gt[b+1];c(zt),V(zt),t(!0)},children:b+1},b+1))})]}),s&&vt.jsx("div",{className:"modal",children:vt.jsxs("div",{className:"modal-content",children:[vt.jsx("h2",{children:"Calcul du volume"}),vt.jsxs("p",{children:["Longueur: ",l==null?void 0:l.length,"m"]}),vt.jsxs("p",{children:["Largeur: ",l==null?void 0:l.width,"m"]}),vt.jsx("label",{children:"Hauteur (m) :"}),vt.jsx("input",{type:"number",value:i,onChange:I=>a(I.target.value),placeholder:"Entrez la hauteur"}),vt.jsx("button",{onClick:S,children:"Calculer"}),wt!==null&&vt.jsxs("p",{className:"resultat",children:["Volume : ",wt.toFixed(2)," m³"]}),vt.jsx("hr",{}),x?vt.jsxs(vt.Fragment,{children:[vt.jsx("h3",{children:"Ajouter une action"}),vt.jsx("label",{children:"Date :"}),vt.jsx("input",{type:"date",value:p,onChange:I=>v(I.target.value)}),vt.jsx("label",{children:"Action réalisée :"}),vt.jsx("input",{type:"text",value:A,onChange:I=>O(I.target.value),placeholder:"Ex: Changement d'eau, nettoyage..."}),vt.jsx("button",{onClick:w,children:"Ajouter l'action"}),l&&d[JSON.stringify(l)]&&vt.jsxs("div",{className:"action-list",children:[vt.jsx("h4",{children:"Historique des actions :"}),vt.jsx("ul",{children:d[JSON.stringify(l)].map((I,b)=>vt.jsxs("li",{children:[vt.jsxs("div",{className:"action-item",children:[vt.jsx("p",{className:"date",children:I.date}),vt.jsx("button",{onClick:()=>N(I),className:"delete-action-button",children:"❌"})]}),vt.jsx("p",{className:"action-text",children:I.text})]},b))})]})]}):vt.jsx("p",{className:"not-connected-message",children:"Connectez-vous pour voir l'historique et ajouter des actions."}),vt.jsx("button",{onClick:()=>{t(!1),c(null),a(""),M(null)},children:"Fermer"})]})})]})}UA.createRoot(document.getElementById("root")).render(vt.jsx(fn.StrictMode,{children:vt.jsx(WC,{})}));const JC={apiKey:"TA_CLE_API",authDomain:"TON_DOMAINE.firebaseapp.com",projectId:"TON_PROJECT_ID",storageBucket:"TON_PROJECT_ID.appspot.com",messagingSenderId:"XXXXXXXXXXXX",appId:"1:XXXXXXXXXXXX:web:XXXXXXXXXXXX"},tD=SA(JC),eD=bA(tD);RA(eD,"bassins");
